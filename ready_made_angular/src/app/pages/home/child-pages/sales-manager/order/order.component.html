<div id="create-order-div">
    <div fxLayout="row" fxLayout.xs="column">
        <div class="child-1" fxFlex="50">
            <mat-card id="stock-form-div">
                <form [formGroup] = orderFormMaster>
                    <div fxLayoutGap="15px" style="padding-left: 50px">
                        <div class="col-8">
                            <ng-select [items]="agents"
                                       bindLabel="agent_name"
                                       class="custom"
                                       (change)="agentSelected()"
                                       bindValue="agent_id"
                                       formControlName="agent_id"
                                       placeholder="Select Agent">
                            </ng-select>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column"  fxLayoutGap="15px" style="padding-left: 50px">
                        <div class="col-8">
                            <ng-select [items]="customers"
                                       bindLabel="cust_name"
                                       class="custom"
                                       (change)="customerSelected($event)"
                                       bindValue="cust_id"
                                       formControlName="cust_id"
                                       placeholder="Select Customer">
                            </ng-select>
                        </div>
                        <mat-form-field fxFlex="10">
                            <mat-label>MV</mat-label>
                            <input type="number" class="text-right" matInput formControlName="cust_mv" placeholder="MV">
                        </mat-form-field>
                    </div>
                </form>
                <form [formGroup] = orderFormDetails>
                    <div fxLayout="row" fxLayout.xs="column"  fxLayoutGap="15px" style="padding-left: 50px">
                        <div cfxLayout="row" fxLayout.xs="column"  fxLayoutGap="15px">
                            <ng-select fxFlex="150px" [items]="products"
                                       [virtualScroll]="true"
                                       bindLabel="product_code"
                                       class="custom"
                                       (change)="productSelected($event)"
                                       bindValue="product_code"
                                       formControlName="product_code"
                                       placeholder="Select Product">

                            </ng-select>
                            <span *ngIf="selectedProduct" [matBadge]="selectedProduct.price_code" matBadgeOverlap="false"></span>
                        </div>

                        <div cfxLayout="row" fxLayout.xs="column"  fxLayoutGap="15px">
                            <ng-select fxFlex="150px" [items]="customerCategories"
                                       bindLabel="category"
                                       class="custom"
                                       (change)="customerCategorySelected($event)"
                                       bindValue="ID"
                                       formControlName="customer_category_id"
                                       placeholder="Select Category">

                            </ng-select>
                        </div>
                        <mat-form-field fxFlex="10">
                            <mat-label>LC</mat-label>
                            <input type="number" class="text-right" matInput formControlName="lc" placeholder="LC">
                        </mat-form-field>
                        <mat-form-field fxFlex="10">
                            <mat-label>Ploss</mat-label>
                            <input type="number" class="text-right" matInput formControlName="ploss" placeholder="LC">
                        </mat-form-field>
                        <mat-form-field fxFlex="10">
                            <mat-label>Pr. MV</mat-label>
                            <input type="number" class="text-right" matInput formControlName="product_mv" placeholder="MV">
                        </mat-form-field>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column"  fxLayoutGap="15px" style="padding-left: 50px">
                        <mat-form-field fxFlex="10">
                            <mat-label>Size</mat-label>
                            <input type="text" class="text-right" matInput formControlName="product_size" placeholder="Size">
                        </mat-form-field>
                        <mat-form-field fxFlex="15">
                            <mat-label>Exp. Gold</mat-label>
                            <input type="text" class="text-right" matInput formControlName="expected_gold" placeholder="Gold">
                        </mat-form-field>
                        <mat-form-field fxFlex="10">
                            <mat-label>Qty</mat-label>
                            <input type="number" class="text-right" matInput formControlName="qty" placeholder="Qty">
                        </mat-form-field>
                        <div class="example-button-row" fxFlex="40">
                            <button mat-raised-button color="accent" (click)="addItem()" [disabled]="!orderFormDetails.valid" >Add</button>
                        </div>
                    </div>
                </form>
            </mat-card>
        </div>
        <div class="child-2" fxFlex="50">
            <mat-card id="stock-form-div">
                <table  class="table table-bordered table-responsive">
                    <thead>
                    <tr>
                        <th class="text-center">SL</th>
                        <th class="text-center" >Model</th>
                        <th class="text-center" >Size</th>
                        <th class="text-center" >Qty</th>
                        <th class="text-center" >Exp. Gold</th>
                        <th class="text-center" >Plan</th>
                        <th class="text-center" >Ploss</th>
                        <th class="text-center" >LC</th>
                        <th class="text-center" >PR. MV</th>
                        <th class="text-center" >CMV</th>
                        <th class="text-center" >TMV</th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let row of orderDetails; let i = index">
                        <ng-container *ngIf="true">
                            <th scope="row">{{i+1}}</th>
                            <td class="text-left">{{row.product_code}}-{{row.price_code}}</td>
                            <td class="text-left">{{row.product_size}}</td>
                            <td class="text-right">{{row.qty}}</td>
                            <td class="text-right">{{row.expected_gold | number: '1.3'}}</td>
                            <td class="text-right" >{{row.cust_category.category }}</td>
                            <td class="text-right">{{row.ploss}}</td>
                            <td class="text-right">{{row.lc}}</td>
                            <td class="text-right">{{row.product_mv | number: '1.3'}}</td>
                            <td class="text-right">{{row.cust_mv | number: '1.3'}}</td>
                            <td class="text-right">{{(row.product_mv+row.cust_mv) | number: '1.3'}}</td>
                            <td class="text-right">
                                <a [routerLink]="" (click)="populateOrderFormDetails(row , i)"><fa-icon class="edit" [icon]="faPencilAlt"></fa-icon></a>
                            </td>
                            <td class="text-right">
                                <a [routerLink]="" (click)="deleteItem(i)"><fa-icon class="edit" [icon]="faTrashAlt"></fa-icon></a>
                            </td>

                        </ng-container>
                    </tr>

                    </tbody>
                    <tfoot>

                    </tfoot>
                </table>
                <div class="example-button-row">
                    <button mat-raised-button color="accent" (click)="test()"  >Clear</button>
                </div>
                <pre>
                    orderFormDetails = {{orderFormDetails.value | json}}
                </pre>
            </mat-card>
        </div>
    </div>
</div>


<div *ngIf="true" id="developer-div">
    <pre>
        orderForm = {{orderFormDetails.valid | json}}
    </pre>
    <pre>
        orderDetails = {{orderDetails | json}}
    </pre>
    <pre>
        item = {{item | json}}
    </pre>
<!--    <pre>-->
<!--        products = {{products | json}}-->
<!--    </pre>-->

</div>
