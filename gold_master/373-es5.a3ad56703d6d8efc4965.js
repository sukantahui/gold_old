!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),n)}var i,o}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[373],{10373:function(t,n,i){i.r(n),i.d(n,{SendRawMaterialToEmployeeModule:function(){return M}});var o=i(38583),a=i(63423),l=i(92340),c=i(3679),s=i(88259),u=i.n(s),p=i(37716),m=i(91841),v=i(82820),f=i(57916),g=i(5620),d=i(86640),h=i(98295),Z=i(49983),b=i(51095),T=i(42542),y=i(65939);function A(e,t){if(1&e&&(p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td",19),p._uU(4),p.qZA(),p.qZA()),2&e){var r=t.$implicit;p.xp6(2),p.Oqu(r.rawMaterialName),p.xp6(2),p.Oqu(r.closingBalance)}}function S(e,t){if(1&e&&(p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td",19),p._uU(4),p.qZA(),p.qZA()),2&e){var r=t.$implicit;p.xp6(2),p.Oqu(r.rawMaterialName),p.xp6(2),p.Oqu(r.closingBalance)}}function w(e,t){if(1&e&&(p.TgZ(0,"div",11),p.TgZ(1,"table",12),p.TgZ(2,"thead"),p.TgZ(3,"tr"),p.TgZ(4,"td",13),p._uU(5,"Updated Value"),p.qZA(),p.qZA(),p.TgZ(6,"tr"),p.TgZ(7,"th",14),p._uU(8,"Material Name"),p.qZA(),p.TgZ(9,"th",14),p._uU(10,"Value"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(11,"tbody"),p.YNc(12,S,5,2,"tr",15),p.qZA(),p.qZA(),p.qZA()),2&e){var r=p.oxw();p.xp6(12),p.Q6J("ngForOf",r.savedResponse.data.sender_all_material_balance)}}function q(e,t){if(1&e){var r=p.EpF();p.TgZ(0,"mat-button-toggle-group",20),p.TgZ(1,"mat-button-toggle",21),p.NdJ("click",function(){return p.CHM(r),p.oxw().showDeveloperDiv=!0}),p._uU(2,"Show"),p.qZA(),p.TgZ(3,"mat-button-toggle",21),p.NdJ("click",function(){return p.CHM(r),p.oxw().showDeveloperDiv=!1}),p._uU(4,"Hide"),p.qZA(),p.qZA()}}function x(e,t){if(1&e&&(p.TgZ(0,"pre"),p._uU(1),p.ALo(2,"json"),p.qZA()),2&e){var r=p.oxw(2);p.xp6(1),p.hij("                    savedResponse = ",p.lcZ(2,1,r.savedResponse.data.sender_all_material_balance),"\n                ")}}function _(e,t){if(1&e&&(p.TgZ(0,"div",22),p.TgZ(1,"div",23),p.TgZ(2,"h2"),p._uU(3,"Developer Area"),p.qZA(),p.TgZ(4,"mat-tab-group",24),p.TgZ(5,"mat-tab",25),p.TgZ(6,"pre"),p._uU(7),p.ALo(8,"json"),p.qZA(),p.qZA(),p.TgZ(9,"mat-tab",26),p.YNc(10,x,3,3,"pre",27),p.qZA(),p.TgZ(11,"mat-tab",28),p.TgZ(12,"pre"),p._uU(13),p.ALo(14,"json"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var r=p.oxw();p.xp6(7),p.hij("                    materialSendingForm = ",p.lcZ(8,3,r.materialSendingForm.value),"\n                "),p.xp6(3),p.Q6J("ngIf",r.savedResponse),p.xp6(3),p.hij("                    materialBalances = ",p.lcZ(14,5,r.materialBalances),"\n                ")}}var k,I=[{path:"",component:(k=function(){function t(r,n,i,o,a){var s=this;e(this,t),this.route=r,this.http=n,this.reportService=i,this.managerService=o,this.commonservice=a,this.isProduction=l.N.production,this.materialBalances=[],this.receverMaterialBalance=[],this.route.data.subscribe(function(e){s.user=e.materialResolver.user.data,console.log(s.user),s.resolverValues=e.materialResolver,s.employees=e.materialResolver.employees.data,s.projectDetails=e.materialResolver.projectDetails,s.rawMaterials=e.materialResolver.rawMaterials.data,s.materialBalances=e.materialResolver.materialBalances.data,s.selectableEmployees=s.employees.filter(function(e){return s.projectDetails.managerToEmployeeMaterial.employees.find(function(t){return t===e.employeeId})}),s.selectableMaterials=s.rawMaterials.filter(function(e){return s.projectDetails.managerToEmployeeMaterial.materialsToSend.find(function(t){return t===e.rmID})})}),this.materialSendingForm=new c.cw({outward_employee_id:new c.NI(this.user.employeeId,[c.kI.required]),inward_employee_id:new c.NI(null,[c.kI.required]),rm_id:new c.NI(null,[c.kI.required]),value:new c.NI(0,[c.kI.required])})}return r(t,[{key:"ngOnInit",value:function(){}},{key:"saveMaterialTransfer",value:function(){var e=this;u().fire({title:"Send Material",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(t){!t.value||e.managerService.saveMaterialTransfer(e.materialSendingForm.value).subscribe(function(t){!0===t.status&&(u().fire({timer:2e3,title:"Saved",text:"Transferred successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.savedResponse=t)},function(e){u().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}},{key:"onEmployeeChange",value:function(e){var t=this,r=this.materialSendingForm.get("inward_employee_id").value;r&&this.reportService.getMaterialBalanceByEmployee(r).subscribe(function(e){t.receverMaterialBalance=e.data})}}]),t}(),k.\u0275fac=function(e){return new(e||k)(p.Y36(a.gz),p.Y36(m.eN),p.Y36(v.r),p.Y36(f.b),p.Y36(g.v))},k.\u0275cmp=p.Xpm({type:k,selectors:[["app-send-raw-material-to-employee"]],decls:31,vars:8,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","inward_employee_id","placeholder","Select Employee",1,"custom",3,"items","click"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"custom",3,"items"],[1,"example-full-width"],["type","number","matInput","","formControlName","value","placeholder","Material value",1,"text-right"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[1,"p-2","col-8","d-flex"],[1,"p-2","col-6"],[1,"table","table-striped","col-xl-12","col-lg-12","col-xs-12"],["colspan","2"],["scope","col"],[4,"ngFor","ngForOf"],["class","p-2 col-6",4,"ngIf"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"text-right"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],[4,"ngIf"],["label","Sec 3"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"form",2),p.TgZ(3,"ng-select",3),p.NdJ("click",function(e){return t.onEmployeeChange(e)}),p.qZA(),p._UZ(4,"ng-select",4),p.TgZ(5,"div"),p.TgZ(6,"mat-form-field",5),p.TgZ(7,"mat-label"),p._uU(8,"Enter Material Value"),p.qZA(),p._UZ(9,"input",6),p.qZA(),p.qZA(),p.TgZ(10,"div",7),p.TgZ(11,"div",8),p.TgZ(12,"button",9),p.NdJ("click",function(){return t.saveMaterialTransfer()}),p._uU(13,"Save Record"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(14,"div",10),p.TgZ(15,"div",11),p.TgZ(16,"table",12),p.TgZ(17,"thead"),p.TgZ(18,"tr"),p.TgZ(19,"td",13),p._uU(20,"Previous Value"),p.qZA(),p.qZA(),p.TgZ(21,"tr"),p.TgZ(22,"th",14),p._uU(23,"Material Name"),p.qZA(),p.TgZ(24,"th",14),p._uU(25,"Value"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(26,"tbody"),p.YNc(27,A,5,2,"tr",15),p.qZA(),p.qZA(),p.qZA(),p.YNc(28,w,13,1,"div",16),p.qZA(),p.qZA(),p.YNc(29,q,5,0,"mat-button-toggle-group",17),p.YNc(30,_,15,7,"div",18)),2&e&&(p.xp6(2),p.Q6J("formGroup",t.materialSendingForm),p.xp6(1),p.Q6J("items",t.selectableEmployees),p.xp6(1),p.Q6J("items",t.selectableMaterials),p.xp6(8),p.Q6J("disabled",!t.materialSendingForm.valid||t.materialSendingForm.pristine),p.xp6(15),p.Q6J("ngForOf",t.materialBalances),p.xp6(1),p.Q6J("ngIf",t.savedResponse),p.xp6(1),p.Q6J("ngIf",!t.isProduction),p.xp6(1),p.Q6J("ngIf",t.showDeveloperDiv&&!t.isProduction))},directives:[c._Y,c.JL,c.sg,d.w9,c.JJ,c.u,h.KE,h.hX,c.wV,Z.Nt,c.Fj,b.lW,o.sg,o.O5,T.A9,T.Yi,y.SP,y.uX],pipes:[o.Ts],styles:[""]}),k)}],N=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[a.Bz.forChild(I)],a.Bz]}),t}(),M=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[o.ez,N,y.Nh,T.vV,c.UX,d.A0,h.lN,Z.c,b.ot]]}),t}()},57916:function(t,n,i){i.d(n,{b:function(){return m}});var o,a=i(5304),l=i(68307),c=i(37716),s=i(5620),u=i(91841),p=i(84889),m=((o=function(){function t(r,n,i){e(this,t),this.commonService=r,this.http=n,this.errorService=i}return r(t,[{key:"saveFineToNinetyTwo",value:function(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveDalCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"savePanCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialTransfer",value:function(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveCashTransactionBetweenEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"cashTransactionsByCurrentUser",value:function(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromOwnerToManager",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromManagerToOwner",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveNitricToFine",value:function(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"addTopUpGold",value:function(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveGpTransactions",value:function(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}}]),t}()).\u0275fac=function(e){return new(e||o)(c.LFG(s.v),c.LFG(u.eN),c.LFG(p.T))},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)}}])}();