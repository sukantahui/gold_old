!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(n=i.key,u=void 0,"symbol"==typeof(u=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"))?u:String(u)),i)}var n,u}function o(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[5868],{45868:function(e,i,n){n.r(i),n.d(i,{TopUpGoldModule:function(){return P}});var u=n(38583),r=n(63423),a=n(3679),l=n(37716),s=n(57916),Z=n(82820),d=n(5620),p=n(35618),g=n(98295),c=n(49983),b=n(51095);function q(t,e){1&t&&(l.TgZ(0,"mat-error"),l._uU(1," Job number is required "),l.qZA())}function A(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",19),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&t){var o=e.$implicit;l.xp6(2),l.Oqu(o.transaction_text),l.xp6(2),l.Oqu(o.comment),l.xp6(2),l.Oqu(o.gold_value),l.xp6(2),l.Oqu(o.timestamp)}}function U(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",19),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&t){var o=e.$implicit;l.xp6(2),l.Oqu(o.transaction_text),l.xp6(2),l.Oqu(o.comment),l.xp6(2),l.Oqu(o.gold_value),l.xp6(2),l.Oqu(o.timestamp)}}function m(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",19),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&t){var o=e.$implicit;l.xp6(2),l.Oqu(o.transaction_text),l.xp6(2),l.Oqu(o.comment),l.xp6(2),l.Oqu(o.gold_value),l.xp6(2),l.Oqu(o.timestamp)}}function T(t,e){if(1&t&&(l.TgZ(0,"div",12),l.TgZ(1,"h2"),l._uU(2),l.qZA(),l.TgZ(3,"h3"),l._uU(4),l.qZA(),l.TgZ(5,"table",13),l.TgZ(6,"thead"),l.TgZ(7,"tr"),l.TgZ(8,"th"),l._uU(9,"Transaction"),l.qZA(),l.TgZ(10,"th"),l._uU(11,"Comment"),l.qZA(),l.TgZ(12,"th"),l._uU(13,"Value (gms)"),l.qZA(),l.TgZ(14,"th"),l._uU(15,"Timestamp"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"tbody"),l.YNc(17,A,9,4,"tr",14),l.TgZ(18,"tr",15),l.TgZ(19,"td",16),l._uU(20,"Gold Used"),l.qZA(),l.TgZ(21,"td",17),l._uU(22),l.ALo(23,"number"),l.qZA(),l.qZA(),l.YNc(24,U,9,4,"tr",14),l.TgZ(25,"tr",15),l.TgZ(26,"td",16),l._uU(27,"Pan Used"),l.qZA(),l.TgZ(28,"td",17),l._uU(29),l.ALo(30,"number"),l.qZA(),l.qZA(),l.YNc(31,m,9,4,"tr",14),l.TgZ(32,"tr",15),l.TgZ(33,"td",18),l._uU(34,"Nitric Used"),l.qZA(),l.TgZ(35,"td",17),l._uU(36),l.ALo(37,"number"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"h3"),l._uU(39,"Final Calculation"),l.qZA(),l.TgZ(40,"table",13),l.TgZ(41,"thead"),l.TgZ(42,"tr"),l.TgZ(43,"td"),l._uU(44,"Sl"),l.qZA(),l.TgZ(45,"td"),l._uU(46,"Subject"),l.qZA(),l.TgZ(47,"td"),l._uU(48,"Value"),l.qZA(),l.TgZ(49,"td"),l._uU(50,"Job%"),l.qZA(),l.TgZ(51,"td"),l._uU(52,"Bill%"),l.qZA(),l.TgZ(53,"td"),l._uU(54,"Bill Value"),l.qZA(),l.TgZ(55,"td"),l._uU(56,"Fine 92%"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(57,"tbody"),l.TgZ(58,"tr"),l.TgZ(59,"th"),l._uU(60,"1"),l.qZA(),l.TgZ(61,"td"),l._uU(62,"Gold Used"),l.qZA(),l.TgZ(63,"td"),l._uU(64),l.ALo(65,"number"),l.qZA(),l.TgZ(66,"td"),l._uU(67,"100%"),l.qZA(),l.TgZ(68,"td"),l._uU(69,"100%"),l.qZA(),l.TgZ(70,"td"),l._uU(71),l.ALo(72,"number"),l.qZA(),l.TgZ(73,"td",19),l._uU(74),l.ALo(75,"number"),l.qZA(),l.qZA(),l.TgZ(76,"tr"),l.TgZ(77,"th"),l._uU(78,"2"),l.qZA(),l.TgZ(79,"td"),l._uU(80,"Pan Used"),l.qZA(),l.TgZ(81,"td"),l._uU(82),l.ALo(83,"number"),l.qZA(),l.TgZ(84,"td"),l._uU(85,"100%"),l.qZA(),l.TgZ(86,"td"),l._uU(87,"40%"),l.qZA(),l.TgZ(88,"td"),l._uU(89),l.ALo(90,"number"),l.qZA(),l.TgZ(91,"td",19),l._uU(92),l.ALo(93,"number"),l.qZA(),l.qZA(),l.TgZ(94,"tr"),l.TgZ(95,"th"),l._uU(96,"3"),l.qZA(),l.TgZ(97,"td"),l._uU(98,"Nitric Used"),l.qZA(),l.TgZ(99,"td"),l._uU(100),l.ALo(101,"number"),l.qZA(),l.TgZ(102,"td"),l._uU(103,"93%"),l.qZA(),l.TgZ(104,"td"),l._uU(105,"100%"),l.qZA(),l.TgZ(106,"td"),l._uU(107),l.ALo(108,"number"),l.qZA(),l.TgZ(109,"td",19),l._uU(110),l.ALo(111,"number"),l.qZA(),l.qZA(),l.TgZ(112,"tr"),l.TgZ(113,"th"),l._uU(114,"4"),l.qZA(),l.TgZ(115,"td"),l._uU(116,"P Loss"),l.qZA(),l.TgZ(117,"td",20),l._uU(118),l.ALo(119,"number"),l.qZA(),l.TgZ(120,"td"),l._uU(121),l.ALo(122,"number"),l.qZA(),l.TgZ(123,"td",19),l._uU(124),l.ALo(125,"number"),l.qZA(),l.qZA(),l.TgZ(126,"tr"),l.TgZ(127,"th"),l._uU(128,"5"),l.qZA(),l.TgZ(129,"td"),l._uU(130,"MV"),l.qZA(),l.TgZ(131,"td",20),l._uU(132),l.ALo(133,"number"),l.qZA(),l.TgZ(134,"td"),l._uU(135),l.ALo(136,"number"),l.qZA(),l.TgZ(137,"td",19),l._uU(138),l.ALo(139,"number"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(140,"tfoot"),l.TgZ(141,"tr",15),l.TgZ(142,"th",21),l._uU(143,"Final Bill Calculated"),l.qZA(),l.TgZ(144,"th"),l._uU(145),l.ALo(146,"number"),l.qZA(),l.TgZ(147,"th",19),l._uU(148),l.ALo(149,"number"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){var o=l.oxw();l.xp6(2),l.hij("JOB Details for ID: ",o.jobDetails.job.job_id,""),l.xp6(2),l.hij("Bill No . ",o.jobDetails.bill_no,""),l.xp6(13),l.Q6J("ngForOf",o.jobDetails.gold),l.xp6(5),l.hij(" ",l.xi3(23,27,o.totalGoldUse,"1.3-3"),""),l.xp6(2),l.Q6J("ngForOf",o.jobDetails.pan),l.xp6(5),l.hij(" ",l.xi3(30,30,o.totalPanUse,"1.3-3"),""),l.xp6(2),l.Q6J("ngForOf",o.jobDetails.nitric),l.xp6(5),l.hij(" ",l.xi3(37,33,o.totalNitricUse,"1.3-3"),""),l.xp6(28),l.Oqu(l.xi3(65,36,o.totalGoldUse,"1.3-3")),l.xp6(7),l.Oqu(l.xi3(72,39,o.totalGoldUse,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(75,42,.92*o.totalGoldUse,"1.3-3")),l.xp6(8),l.Oqu(l.xi3(83,45,o.totalPanUse,"1.3-3")),l.xp6(7),l.Oqu(l.xi3(90,48,o.totalPanUse*o.jobDetails.rm_bangle_pan.bill_percentage,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(93,51,o.totalPanUse*o.jobDetails.rm_bangle_pan.bill_percentage*.92,"1.3-3")),l.xp6(8),l.Oqu(l.xi3(101,54,o.totalNitricUse,"1.3-3")),l.xp6(7),l.Oqu(l.xi3(108,57,o.totalNitricUse*o.jobDetails.rm_nitric.job_percentage,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(111,60,o.totalNitricUse*o.jobDetails.rm_nitric.job_percentage*.92,"1.3-3")),l.xp6(8),l.AsE("",l.xi3(119,63,o.jobDetails.job.p_loss,"1.3-3")," X ",o.jobDetails.job.pieces," pcs "),l.xp6(3),l.Oqu(l.xi3(122,66,o.totalPLoss,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(125,69,.92*o.totalPLoss,"1.3-3")),l.xp6(8),l.AsE("",l.xi3(133,72,o.jobDetails.job.markup_value,"1.3-3")," X ",o.jobDetails.job.pieces," pcs "),l.xp6(3),l.Oqu(l.xi3(136,75,o.totalMV,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(139,78,.92*o.totalMV,"1.3-3")),l.xp6(7),l.Oqu(l.xi3(146,81,o.finalGini,"1.3-3")),l.xp6(3),l.Oqu(l.xi3(149,84,.92*o.finalGini,"1.3-3"))}}var f,_=[{path:"",component:(f=function(){function e(o,i,n,u){t(this,e),this.managerService=o,this.reportService=i,this.commonService=n,this.fb=u,this.responseMessage=null,this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0,this.topUpGoldForm=this.fb.group({job:[null,a.kI.required],gold:[0,a.kI.required]})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this,e=this.topUpGoldForm.value,o=e.job,i=e.gold;this.managerService.addTopUpGold(o,i).subscribe({next:function(e){t.responseMessage=e.data[0]}}),this.loadJobDetails(o)}},{key:"onReset",value:function(){this.topUpGoldForm.reset({job:null,gold:0}),this.responseMessage=null,this.resetTotals()}},{key:"onSearch",value:function(){var t=this.topUpGoldForm.value.job;t&&this.loadJobDetails(t)}},{key:"loadJobDetails",value:function(t){var e=this;this.reportService.getJobDetailsforOwner(t).subscribe({next:function(t){e.jobDetails=t.data,e.calculateTotals()},error:function(t){alert("Error: "+t.error.message)}})}},{key:"resetTotals",value:function(){this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0}},{key:"calculateTotals",value:function(){this.totalGoldUse=this.sumValues(this.jobDetails.gold),this.totalPanUse=this.sumValues(this.jobDetails.pan),this.totalNitricUse=this.sumValues(this.jobDetails.nitric),this.totalPLoss=this.jobDetails.job.p_loss*this.jobDetails.job.pieces,this.totalMV=this.jobDetails.job.markup_value*this.jobDetails.job.pieces,this.finalGini=this.totalGoldUse+this.totalPanUse*this.jobDetails.rm_bangle_pan.bill_percentage+.93*this.totalNitricUse+this.totalPLoss+this.totalMV}},{key:"sumValues",value:function(t){return t.reduce(function(t,e){return t+e.gold_value},0)}}]),e}(),f.\u0275fac=function(t){return new(t||f)(l.Y36(s.b),l.Y36(Z.r),l.Y36(d.v),l.Y36(a.qu))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-top-up-gold"]],decls:16,vars:4,consts:[["id","main-div"],[3,"formGroup"],["fxLayoutGap","15px",2,"padding-left","50px"],["fxFlex","10"],["type","text","formControlName","job","matInput","","placeholder","Job Number",1,"p-1",2,"border-radius","5px"],["type","number","formControlName","gold","matInput","","placeholder","Gold",1,"p-1",2,"border-radius","5px"],["fxLayoutGap","15px",2,"text-align","center"],["mat-raised-button","",1,"btn-info",3,"click"],["mat-raised-button","",1,"btn-info",3,"disabled","click"],["mat-raised-button","","color","warn","type","button",3,"click"],[4,"ngIf"],["style","margin-left: 50px;","id","print-job-details",4,"ngIf"],["id","print-job-details",2,"margin-left","50px"],["border","1","cellpadding","8","cellspacing","0"],[4,"ngFor","ngForOf"],[2,"border-top","1px solid black","border-bottom","1px solid black"],["colspan","2",1,"text-center","fw-bold"],[1,"text-end","fw-bold"],["colspan","2",1,"text-end","fw-bold"],[1,"text-end"],["colspan","3"],["colspan","5"]],template:function(t,e){var o;1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"mat-form-field",3),l._UZ(4,"input",4),l.qZA(),l.TgZ(5,"mat-form-field",3),l._UZ(6,"input",5),l.qZA(),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"button",7),l.NdJ("click",function(){return e.onSearch()}),l._uU(9,"Search Job"),l.qZA(),l.TgZ(10,"button",8),l.NdJ("click",function(){return e.onSubmit()}),l._uU(11,"Update Topup Gold"),l.qZA(),l.TgZ(12,"button",9),l.NdJ("click",function(){return e.onReset()}),l._uU(13,"Reset"),l.qZA(),l.qZA(),l.YNc(14,q,2,0,"mat-error",10),l.qZA(),l.YNc(15,T,150,87,"div",11),l.qZA()),2&t&&(l.xp6(1),l.Q6J("formGroup",e.topUpGoldForm),l.xp6(9),l.Q6J("disabled",null!=e.responseMessage),l.xp6(4),l.Q6J("ngIf",(null==(o=e.topUpGoldForm.get("job"))?null:o.hasError("required"))&&(null==(o=e.topUpGoldForm.get("job"))?null:o.touched)),l.xp6(1),l.Q6J("ngIf",e.jobDetails))},directives:[a._Y,a.JL,a.sg,p.SQ,g.KE,p.yH,a.Fj,c.Nt,a.JJ,a.u,a.wV,b.lW,u.O5,g.TO,u.sg],pipes:[u.JJ],styles:["#main-div[_ngcontent-%COMP%]{margin-top:100px;min-height:90vh;margin-left:50}"]}),f)}],h=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(_)],r.Bz]}),e}(),x=n(45480),j=n(43220),v=n(67441),O=n(45396),y=n(93738),L=n(86640),D=n(7539),G=n(44981),J=n(72533),k=n(70346),N=n(76627),P=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[u.ez,h,x.q,g.lN,a.UX,c.c,j.FA,v.LD,O.rP,b.ot,y.QW,L.A0,p.ae,D.p9,a.u5,G.h,J.JX,k.g,N.Ps]]}),e}()}}])}();