!function(){"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,"symbol"==typeof(o=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(i,"string"))?o:String(o)),n)}var i,o}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8515],{8515:function(r,n,i){i.r(n),i.d(n,{DalCreationModule:function(){return I}});var o=i(38583),a=i(63423),l=i(92340),u=i(3679),s=i(88259),c=i.n(s),v=i(37716),p=i(91841),d=i(57916),m=i(86640),h=i(98295),g=i(49983),f=i(51095),Z=i(42542),b=i(65939),T=i(33839);function A(e,r){1&e&&(v.TgZ(0,"h2"),v._uU(1,"Previous balance"),v.qZA())}function C(e,r){1&e&&(v.TgZ(0,"h2"),v._uU(1,"Current balance"),v.qZA())}function _(e,r){if(1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td"),v._uU(2),v.qZA(),v.TgZ(3,"td",24),v._uU(4),v.ALo(5,"noCommaNumber"),v.qZA(),v.qZA()),2&e){var t=r.$implicit;v.xp6(2),v.Oqu(t.rawMaterialName),v.xp6(2),v.Oqu(v.xi3(5,2,t.closingBalance,3))}}function q(e,r){1&e&&(v.TgZ(0,"h2"),v._uU(1,"Current balance"),v.qZA())}function N(e,r){if(1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td"),v._uU(2),v.qZA(),v.TgZ(3,"td",24),v._uU(4),v.ALo(5,"noCommaNumber"),v.qZA(),v.qZA()),2&e){var t=r.$implicit;v.xp6(2),v.Oqu(t.rawMaterialName),v.xp6(2),v.Oqu(v.xi3(5,2,t.closingBalance,3))}}function y(e,r){if(1&e&&(v.TgZ(0,"div",1),v.YNc(1,q,2,0,"h2",17),v.TgZ(2,"table",18),v.TgZ(3,"thead"),v.TgZ(4,"tr"),v.TgZ(5,"th",19),v._uU(6,"Material Name"),v.qZA(),v.TgZ(7,"th",19),v._uU(8,"Value"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(9,"tbody"),v.YNc(10,N,6,5,"tr",20),v.qZA(),v.qZA(),v.qZA()),2&e){var t=v.oxw();v.xp6(1),v.Q6J("ngIf",t.savedResponse),v.xp6(9),v.Q6J("ngForOf",t.savedResponse.data.material_balance)}}function w(e,r){if(1&e){var t=v.EpF();v.TgZ(0,"mat-button-toggle-group",25),v.TgZ(1,"mat-button-toggle",26),v.NdJ("click",function(){return v.CHM(t),v.oxw().showDeveloperDiv=!0}),v._uU(2,"Show"),v.qZA(),v.TgZ(3,"mat-button-toggle",26),v.NdJ("click",function(){return v.CHM(t),v.oxw().showDeveloperDiv=!1}),v._uU(4,"Hide"),v.qZA(),v.qZA()}}function S(e,r){if(1&e&&(v.TgZ(0,"div",27),v.TgZ(1,"div",28),v.TgZ(2,"h2"),v._uU(3,"Developer Area"),v.qZA(),v.TgZ(4,"mat-tab-group",29),v.TgZ(5,"mat-tab",30),v.TgZ(6,"pre"),v._uU(7),v.ALo(8,"json"),v.qZA(),v.qZA(),v.TgZ(9,"mat-tab",31),v.TgZ(10,"pre"),v._uU(11),v.ALo(12,"json"),v.qZA(),v.qZA(),v.TgZ(13,"mat-tab",32),v.TgZ(14,"pre"),v._uU(15),v.ALo(16,"json"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e){var t=v.oxw();v.xp6(7),v.hij("                    dalConversionForm = ",v.lcZ(8,3,t.dalConversionForm.value),"\n                "),v.xp6(4),v.hij("                    savedResponse=",v.lcZ(12,5,t.savedResponse),"\n                "),v.xp6(4),v.hij("                    this.dalCreationRation = ",v.lcZ(16,7,t.dalCreationRation),"\n                ")}}var k,x=[{path:"",component:(k=function(){function r(t,n,i){var o=this;e(this,r),this.route=t,this.http=n,this.managerService=i,this.isProduction=l.N.production,this.showDeveloperDiv=!1,this.silverPlusCopper=0,this.isSaved=!1,this.route.data.subscribe(function(e){o.materialBalance=e.fineToNinetyTwoResolver.materialBalance.data,o.user=e.fineToNinetyTwoResolver.user.data,o.karigars=e.fineToNinetyTwoResolver.karigars.data}),this.http.get("assets/projectDetails.json").subscribe(function(e){o.projectDetails=e,o.dalCreationRation=o.projectDetails.dalCreationRation,console.log(o.projectDetails.dalCreationRation)}),this.dalConversionForm=new u.cw({employee_id:new u.NI(this.user.emp_id,[u.kI.required]),karigar_id:new u.NI(null,[u.kI.required]),silver_id:new u.NI(38,[u.kI.required]),copper_id:new u.NI(37,[u.kI.required]),zinc_id:new u.NI(39,[u.kI.required]),dal_id:new u.NI(33,[u.kI.required]),silver_value:new u.NI(0,[u.kI.required]),copper_value:new u.NI({value:0,disables:!1},[u.kI.required]),zinc_value:new u.NI({value:0,disables:!1},[u.kI.required]),dal_value:new u.NI({value:0,disabled:!1},[u.kI.required,u.kI.min(.001)])})}return t(r,[{key:"ngOnInit",value:function(){var e=this;this.dalConversionForm.valueChanges.subscribe(function(r){e.silverPlusCopper=(+r.silver_value||0)+(+r.copper_value||0)})}},{key:"onSilverChange",value:function(e){var r=Number(e.value);if(isNaN(r))this.dalConversionForm.patchValue({copper_value:"",zinc_value:"",dal_value:""});else{var t=(r*this.dalCreationRation.copperToSilverRatio).toFixed(3);this.dalConversionForm.patchValue({copper_value:t});var n=((Number(e.value)+Number(t))*this.dalCreationRation.zincToSilverAndCopper).toFixed(3);this.dalConversionForm.patchValue({zinc_value:n});var i=(r+Number(t)+Number(n)).toFixed(3);this.dalConversionForm.patchValue({dal_value:i})}}},{key:"onCopperChange",value:function(e){var r,t=Number(e.value);if(isNaN(t))this.dalConversionForm.patchValue({zinc_value:"",dal_value:""});else{var n=Number(null===(r=this.dalConversionForm.get("silver_value"))||void 0===r?void 0:r.value)||0,i=((n+t)*this.dalCreationRation.zincToSilverAndCopper).toFixed(3);this.dalConversionForm.patchValue({zinc_value:i});var o=(n+t+Number(i)).toFixed(3);this.dalConversionForm.patchValue({dal_value:o})}}},{key:"onZincChange",value:function(e){var r,t,n=Number(e.value);if(isNaN(n))this.dalConversionForm.patchValue({dal_value:""});else{var i=Number(null===(r=this.dalConversionForm.get("silver_value"))||void 0===r?void 0:r.value)||0,o=Number(null===(t=this.dalConversionForm.get("copper_value"))||void 0===t?void 0:t.value)||0;this.dalConversionForm.patchValue({dal_value:(i+o+n).toFixed(3)})}}},{key:"resetForm",value:function(){var e;this.dalConversionForm.reset({employee_id:(null===(e=this.user)||void 0===e?void 0:e.emp_id)||null,karigar_id:null,silver_id:38,copper_id:37,zinc_id:39,dal_id:33,silver_value:0,copper_value:0,zinc_value:0,dal_value:0}),this.savedResponse&&(this.materialBalance=this.savedResponse.data.material_balance,this.savedResponse=null),this.dalConversionForm.markAsPristine(),this.isSaved=!1}},{key:"saveDalConversion",value:function(){var e=this;c().fire({title:"Dal Creation",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(r){!r.value||e.managerService.saveDalCreation(e.dalConversionForm.value).subscribe(function(r){!0===r.status&&(c().fire({timer:2e3,title:"Saved",text:"Dal Created successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.isSaved=!0,e.savedResponse=r)},function(e){c().fire({title:e.message,text:"Conversion unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}}]),r}(),k.\u0275fac=function(e){return new(e||k)(v.Y36(a.gz),v.Y36(p.eN),v.Y36(d.b))},k.\u0275cmp=v.Xpm({type:k,selectors:[["app-dal-creation"]],decls:55,vars:13,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","emp_name","bindValue","emp_id","formControlName","karigar_id","placeholder","Select karigar",1,"custom",3,"items"],[1,"example-full-width"],["type","number","matInput","","formControlName","silver_value","placeholder","Silver",1,"text-right",3,"input"],["silverValue",""],["type","number","matInput","","formControlName","copper_value","placeholder","Copper",1,"text-right",3,"input"],["copperValue",""],["type","number","matInput","","formControlName","zinc_value","placeholder","Zinc",1,"text-right",3,"input"],["zincValue",""],["type","number","matInput","","formControlName","dal_value","placeholder","Dal",1,"text-right"],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"click"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[4,"ngIf"],[1,"table","table-striped","col-xl-12","col-lg-12","col-xs-12"],["scope","col"],[4,"ngFor","ngForOf"],["class","p-2 col-4",4,"ngIf"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"text-right"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,r){if(1&e){var t=v.EpF();v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"form",2),v._UZ(3,"ng-select",3),v.TgZ(4,"div"),v.TgZ(5,"mat-form-field",4),v.TgZ(6,"mat-label"),v._uU(7,"Enter Silver"),v.qZA(),v.TgZ(8,"input",5,6),v.NdJ("input",function(){v.CHM(t);var e=v.MAs(9);return r.onSilverChange(e)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div"),v.TgZ(11,"mat-form-field",4),v.TgZ(12,"mat-label"),v._uU(13,"Enter Copper"),v.qZA(),v.TgZ(14,"input",7,8),v.NdJ("input",function(){v.CHM(t);var e=v.MAs(15);return r.onCopperChange(e)}),v.qZA(),v.qZA(),v.TgZ(16,"div"),v._uU(17),v.ALo(18,"noCommaNumber"),v.qZA(),v._UZ(19,"hr"),v.qZA(),v.TgZ(20,"div"),v.TgZ(21,"mat-form-field",4),v.TgZ(22,"mat-label"),v._uU(23,"Enter Zinc"),v.qZA(),v.TgZ(24,"input",9,10),v.NdJ("input",function(){v.CHM(t);var e=v.MAs(25);return r.onZincChange(e)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(26,"div"),v.TgZ(27,"mat-form-field",4),v.TgZ(28,"mat-label"),v._uU(29,"Dal Valuation"),v.qZA(),v._UZ(30,"input",11),v.qZA(),v.qZA(),v.TgZ(31,"div",12),v.TgZ(32,"div",13),v.TgZ(33,"div",14),v.TgZ(34,"button",15),v.NdJ("click",function(){return r.resetForm()}),v._uU(35,"Reset"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(36,"div",13),v.TgZ(37,"div",14),v.TgZ(38,"button",16),v.NdJ("click",function(){return r.saveDalConversion()}),v._uU(39," Save Record "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(40,"div",1),v.YNc(41,A,2,0,"h2",17),v.YNc(42,C,2,0,"h2",17),v.TgZ(43,"table",18),v.TgZ(44,"thead"),v.TgZ(45,"tr"),v.TgZ(46,"th",19),v._uU(47,"Material Name"),v.qZA(),v.TgZ(48,"th",19),v._uU(49,"Value"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(50,"tbody"),v.YNc(51,_,6,5,"tr",20),v.qZA(),v.qZA(),v.qZA(),v.YNc(52,y,11,2,"div",21),v.qZA(),v.YNc(53,w,5,0,"mat-button-toggle-group",22),v.YNc(54,S,17,9,"div",23)}2&e&&(v.xp6(2),v.Q6J("formGroup",r.dalConversionForm),v.xp6(1),v.Q6J("items",r.karigars),v.xp6(14),v.hij("Silver + Copper = ",v.xi3(18,10,r.silverPlusCopper,3)," gm"),v.xp6(21),v.Q6J("disabled",r.isSaved||!r.dalConversionForm.valid||r.dalConversionForm.pristine),v.xp6(3),v.Q6J("ngIf",r.savedResponse),v.xp6(1),v.Q6J("ngIf",!r.savedResponse),v.xp6(9),v.Q6J("ngForOf",r.materialBalance),v.xp6(1),v.Q6J("ngIf",r.savedResponse),v.xp6(1),v.Q6J("ngIf",!r.isProduction),v.xp6(1),v.Q6J("ngIf",r.showDeveloperDiv&&!r.isProduction))},directives:[u._Y,u.JL,u.sg,m.w9,u.JJ,u.u,h.KE,h.hX,u.wV,g.Nt,u.Fj,f.lW,o.O5,o.sg,Z.A9,Z.Yi,b.SP,b.uX],pipes:[T.S,o.Ts],styles:["input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),k)}],F=function(){var r=t(function r(){e(this,r)});return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),r}(),I=function(){var r=t(function r(){e(this,r)});return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[o.ez,F,h.lN,u.UX,g.c,Z.vV,b.Nh,m.A0,f.ot]]}),r}()},33839:function(r,n,i){i.d(n,{S:function(){return l}});var o,a=i(37716),l=(o=function(){function r(){e(this,r)}return t(r,[{key:"transform",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(null==e||""===e)return"";var t=Number(e);return isNaN(t)?"":t.toFixed(r)}}]),r}(),o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=a.Yjl({name:"noCommaNumber",type:o,pure:!0}),o)},57916:function(r,n,i){i.d(n,{b:function(){return p}});var o,a=i(5304),l=i(68307),u=i(37716),s=i(5620),c=i(91841),v=i(84889),p=((o=function(){function r(t,n,i){e(this,r),this.commonService=t,this.http=n,this.errorService=i}return t(r,[{key:"saveFineToNinetyTwo",value:function(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveDalCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"savePanCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialTransfer",value:function(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveCashTransactionBetweenEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"cashTransactionsByCurrentUser",value:function(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromOwnerToManager",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveMaterialFromManagerToOwner",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveNitricToFine",value:function(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"addTopUpGold",value:function(e,r){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+r,{}).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}},{key:"saveGpTransactions",value:function(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,l.b)(function(e){}))}}]),r}()).\u0275fac=function(e){return new(e||o)(u.LFG(s.v),u.LFG(c.eN),u.LFG(v.T))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)}}])}();