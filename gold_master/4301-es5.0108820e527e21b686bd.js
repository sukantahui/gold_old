!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[4301],{74301:function(t,n,a){a.r(n),a.d(n,{ManagerCashWithdrawnModule:function(){return O}});var o=a(38583),i=a(63423),s=a(92340),c=a(3679),u=a(88259),l=a.n(u),h=a(37716),p=a(57916),d=a(82820),m=a(93738),g=a(86640),v=a(98295),f=a(49983),Z=a(42542),T=a(65939);function A(e,t){1&e&&(h.TgZ(0,"div",18),h._uU(1," Employee selection is required "),h.qZA())}function b(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1," Cash value is required "),h.qZA())}function y(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1," Cash must be greater than 0 "),h.qZA())}var q=function(e,t){return{"text-success":e,"text-danger":t}};function w(e,t){if(1&e&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td",11),h._uU(6),h.ALo(7,"number"),h.qZA(),h.TgZ(8,"td",23),h._uU(9),h.ALo(10,"number"),h.qZA(),h.TgZ(11,"td",24),h._uU(12),h.ALo(13,"number"),h.qZA(),h.TgZ(14,"td",25),h._uU(15),h.ALo(16,"number"),h.qZA(),h.qZA()),2&e){var r=t.$implicit;h.xp6(2),h.Oqu(r.emp_id),h.xp6(2),h.Oqu(r.emp_name),h.xp6(2),h.Oqu(h.lcZ(7,7,r.op_balance)),h.xp6(3),h.Oqu(h.lcZ(10,9,r.inward)),h.xp6(3),h.Oqu(h.lcZ(13,11,r.outward)),h.xp6(2),h.Q6J("ngClass",h.WLB(15,q,r.balance>=0,r.balance<0)),h.xp6(1),h.hij(" ",h.lcZ(16,13,r.balance)," ")}}function x(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",19),h.TgZ(2,"table",20),h.TgZ(3,"thead",21),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"ID"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"Name"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Opening Balance"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Inward"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"Outward"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Balance"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"tbody"),h.YNc(18,w,17,18,"tr",22),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var r=h.oxw();h.xp6(18),h.Q6J("ngForOf",r.cashBalances)}}function _(e,t){1&e&&(h.TgZ(0,"p",26),h._uU(1,"No Cash Balance available."),h.qZA())}function U(e,t){if(1&e&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.ALo(3,"date"),h.qZA(),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.TgZ(6,"td"),h._uU(7),h.qZA(),h.TgZ(8,"td",11),h._uU(9),h.ALo(10,"number"),h.qZA(),h.qZA()),2&e){var r=t.$implicit;h.xp6(2),h.Oqu(h.xi3(3,4,r.tr_date,"short")),h.xp6(3),h.Oqu(r.payer_name||r.payer_id),h.xp6(2),h.Oqu(r.payee_name||r.payee_id),h.xp6(2),h.Oqu(h.xi3(10,7,r.cash,"1.2-2"))}}function C(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",19),h.TgZ(2,"table",20),h.TgZ(3,"thead",21),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"Date"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"Payer(\u09a6\u09bf\u09df\u09c7\u099b\u09c7)"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Payee(\u09a8\u09bf\u09df\u09c7\u099b\u09c7)"),h.qZA(),h.TgZ(11,"th",11),h._uU(12,"Cash"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"tbody"),h.YNc(14,U,11,10,"tr",22),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var r=h.oxw();h.xp6(14),h.Q6J("ngForOf",r.cashTransactions)}}function I(e,t){1&e&&(h.TgZ(0,"p",26),h._uU(1,"No transactions available."),h.qZA())}function S(e,t){if(1&e&&(h.TgZ(0,"div",31),h.TgZ(1,"mat-card",3),h.TgZ(2,"mat-card-title"),h._uU(3,"Developer Area"),h.qZA(),h.TgZ(4,"mat-tab-group",32),h.TgZ(5,"mat-tab",33),h.TgZ(6,"pre"),h._uU(7),h.ALo(8,"json"),h.qZA(),h.qZA(),h.TgZ(9,"mat-tab",34),h.TgZ(10,"pre"),h._uU(11),h.ALo(12,"json"),h.qZA(),h.qZA(),h.TgZ(13,"mat-tab",35),h.TgZ(14,"pre"),h._uU(15),h.ALo(16,"json"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var r=h.oxw(2);h.xp6(7),h.hij("                            cashWithdrawForm=",h.lcZ(8,3,r.cashWithdrawForm.value),"\n                        "),h.xp6(4),h.hij("                            cashBalances=",h.lcZ(12,5,r.cashBalances),"\n                        "),h.xp6(4),h.hij("                            cashTransactions = ",h.lcZ(16,7,r.cashTransactions),"\n                        ")}}function E(e,t){if(1&e){var r=h.EpF();h.TgZ(0,"div",27),h.TgZ(1,"mat-button-toggle-group",28),h.NdJ("ngModelChange",function(e){return h.CHM(r),h.oxw().showDeveloperDiv=e}),h.TgZ(2,"mat-button-toggle",29),h._uU(3,"Show Developer Area"),h.qZA(),h.TgZ(4,"mat-button-toggle",29),h._uU(5,"Hide Developer Area"),h.qZA(),h.qZA(),h.YNc(6,S,17,9,"div",30),h.qZA()}if(2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngModel",n.showDeveloperDiv),h.xp6(1),h.Q6J("value",!0),h.xp6(2),h.Q6J("value",!1),h.xp6(2),h.Q6J("ngIf",n.showDeveloperDiv)}}var B,N=[{path:"",component:(B=function(){function t(r,n,a){e(this,t),this.route=r,this.managerService=n,this.reportService=a,this.showDeveloperDiv=!1,this.isProduction=s.N.production,this.employees=[],this.cashWithdrawForm=new c.cw({payer_id:new c.NI(null,[c.kI.required]),payee_id:new c.NI(null,[c.kI.required]),cash:new c.NI(null,[c.kI.required])})}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.employees=this.route.snapshot.data.employeeResolver.data,this.projectDetails=this.route.snapshot.data.projectDetails,this.cashBalances=this.route.snapshot.data.cashBalances.data,this.currentUser=this.route.snapshot.data.currentUser.data,this.cashWithdrawForm.patchValue({payee_id:this.currentUser.employeeId}),this.currentUser&&72===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(function(t){return e.projectDetails.managerCashWithdrawn.employees.find(function(e){return e===t.employeeId})})),this.currentUser&&28===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(function(t){return e.projectDetails.ownerCashWithdrawnFromManager.employees.find(function(e){return e===t.employeeId})})),this.cashTransactions=this.route.snapshot.data.cashTransactionsByEmployee.data}},{key:"saveCashWithdrawn",value:function(){var e=this;l().fire({title:"Withdraw Cash from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Withdraw",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(t){!t.value||e.managerService.saveCashTransactionBetweenEmployee(e.cashWithdrawForm.value).subscribe(function(t){!0===t.status&&(l().fire({timer:2e3,title:"Saved",text:"Cash Withdrawn successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.savedResponse=t,e.managerService.cashTransactionsByCurrentUser().subscribe(function(t){e.cashTransactions=t.data}),e.reportService.cashBalance().subscribe(function(t){e.cashBalances=t.data}),e.cashWithdrawForm.reset())},function(e){l().fire({title:e.message,text:"Cash Withdrawn Unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}},{key:"onEmployeeChange",value:function(e){console.log(e),this.cashTransactions=e?this.route.snapshot.data.cashTransactionsByEmployee.data.filter(function(t){return t.payer_id===e.employeeId||t.payee_id===e.employeeId}):this.route.snapshot.data.cashTransactionsByEmployee.data}}]),t}(),B.\u0275fac=function(e){return new(e||B)(h.Y36(i.gz),h.Y36(p.b),h.Y36(d.r))},B.\u0275cmp=h.Xpm({type:B,selectors:[["app-manager-cash-withdrawn"]],decls:35,vars:12,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","payer_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"w-100"],["type","number","matInput","","formControlName","cash","placeholder","Cash",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[4,"ngIf","ngIfElse"],["noCashBalances",""],["noTransactions",""],["class","mt-4",4,"ngIf"],[1,"text-danger","mt-1"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-end","text-success"],[1,"text-end","text-danger"],[1,"text-end",3,"ngClass"],[1,"text-muted","m-3"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"mat-card",3),h.TgZ(4,"mat-card-title",4),h._uU(5),h.qZA(),h.TgZ(6,"form",5),h.TgZ(7,"div",4),h.TgZ(8,"ng-select",6),h.NdJ("change",function(e){return t.onEmployeeChange(e)}),h.qZA(),h.YNc(9,A,2,0,"div",7),h.qZA(),h.TgZ(10,"div",4),h.TgZ(11,"mat-form-field",8),h.TgZ(12,"mat-label"),h._uU(13,"Enter Cash"),h.qZA(),h._UZ(14,"input",9),h.YNc(15,b,2,0,"mat-error",10),h.YNc(16,y,2,0,"mat-error",10),h.qZA(),h.qZA(),h._UZ(17,"div",4),h.TgZ(18,"div",11),h.TgZ(19,"button",12),h.NdJ("click",function(){return t.saveCashWithdrawn()}),h._uU(20," \ud83d\udcbe Save Record "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(21,"div",13),h.TgZ(22,"mat-card",3),h.TgZ(23,"mat-card-title"),h._uU(24,"Cash Balance"),h.qZA(),h.YNc(25,x,19,1,"div",14),h.YNc(26,_,2,0,"ng-template",null,15,h.W1O),h.qZA(),h.TgZ(28,"mat-card",3),h.TgZ(29,"mat-card-title"),h._uU(30,"Cash Transactions"),h.qZA(),h.YNc(31,C,15,1,"div",14),h.YNc(32,I,2,0,"ng-template",null,16,h.W1O),h.qZA(),h.qZA(),h.qZA(),h.YNc(34,E,7,4,"div",17),h.qZA()),2&e){var r,n,a,o=h.MAs(27),i=h.MAs(33);h.xp6(5),h.hij("Cash Withdraw by ",t.currentUser.userName,""),h.xp6(1),h.Q6J("formGroup",t.cashWithdrawForm),h.xp6(2),h.Q6J("items",t.selectableEmployees),h.xp6(1),h.Q6J("ngIf",(null==(r=t.cashWithdrawForm.get("payer_id"))?null:r.touched)&&(null==(r=t.cashWithdrawForm.get("payer_id"))?null:r.invalid)),h.xp6(6),h.Q6J("ngIf",null==(n=t.cashWithdrawForm.get("cash"))?null:n.hasError("required")),h.xp6(1),h.Q6J("ngIf",null==(a=t.cashWithdrawForm.get("cash"))?null:a.hasError("min")),h.xp6(3),h.Q6J("disabled",!t.cashWithdrawForm.valid||t.cashWithdrawForm.pristine),h.xp6(6),h.Q6J("ngIf",t.cashBalances&&t.cashBalances.length)("ngIfElse",o),h.xp6(6),h.Q6J("ngIf",t.cashTransactions&&t.cashTransactions.length)("ngIfElse",i),h.xp6(3),h.Q6J("ngIf",!t.isProduction)}},directives:[m.a8,m.n5,c._Y,c.JL,c.sg,g.w9,c.JJ,c.u,o.O5,v.KE,v.hX,c.wV,f.Nt,c.Fj,v.TO,o.sg,o.mk,Z.A9,c.On,Z.Yi,T.SP,T.uX],pipes:[o.JJ,o.uU,o.Ts],styles:["button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),B)}],k=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[i.Bz.forChild(N)],i.Bz]}),t}(),F=a(1769),O=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[o.ez,k,Z.vV,c.u5,m.QW,T.Nh,c.UX,g.A0,v.lN,F.t,f.c]]}),t}()},57916:function(t,n,a){a.d(n,{b:function(){return p}});var o,i=a(5304),s=a(68307),c=a(37716),u=a(5620),l=a(91841),h=a(84889),p=((o=function(){function t(r,n,a){e(this,t),this.commonService=r,this.http=n,this.errorService=a}return r(t,[{key:"saveFineToNinetyTwo",value:function(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveDalCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"savePanCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveMaterialTransfer",value:function(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveMaterialFromEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveCashTransactionBetweenEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"cashTransactionsByCurrentUser",value:function(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveMaterialFromOwnerToManager",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveMaterialFromManagerToOwner",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveNitricToFine",value:function(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"addTopUpGold",value:function(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}},{key:"saveGpTransactions",value:function(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(function(e){}))}}]),t}()).\u0275fac=function(e){return new(e||o)(c.LFG(u.v),c.LFG(l.eN),c.LFG(h.T))},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)}}])}();