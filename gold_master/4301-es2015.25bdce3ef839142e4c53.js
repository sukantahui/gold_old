"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[4301],{74301:function(e,t,r){r.r(t),r.d(t,{ManagerCashWithdrawnModule:function(){return F}});var a=r(38583),n=r(63423),s=r(92340),o=r(3679),i=r(88259),c=r.n(i),h=r(37716),l=r(57916),u=r(82820),p=r(93738),d=r(86640),g=r(98295),m=r(49983),Z=r(42542),v=r(65939);function T(e,t){1&e&&(h.TgZ(0,"div",18),h._uU(1," Employee selection is required "),h.qZA())}function A(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1," Cash value is required "),h.qZA())}function f(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1," Cash must be greater than 0 "),h.qZA())}const q=function(e,t){return{"text-success":e,"text-danger":t}};function b(e,t){if(1&e&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td",11),h._uU(6),h.ALo(7,"number"),h.qZA(),h.TgZ(8,"td",23),h._uU(9),h.ALo(10,"number"),h.qZA(),h.TgZ(11,"td",24),h._uU(12),h.ALo(13,"number"),h.qZA(),h.TgZ(14,"td",25),h._uU(15),h.ALo(16,"number"),h.qZA(),h.qZA()),2&e){const e=t.$implicit;h.xp6(2),h.Oqu(e.emp_id),h.xp6(2),h.Oqu(e.emp_name),h.xp6(2),h.Oqu(h.lcZ(7,7,e.op_balance)),h.xp6(3),h.Oqu(h.lcZ(10,9,e.inward)),h.xp6(3),h.Oqu(h.lcZ(13,11,e.outward)),h.xp6(2),h.Q6J("ngClass",h.WLB(15,q,e.balance>=0,e.balance<0)),h.xp6(1),h.hij(" ",h.lcZ(16,13,e.balance)," ")}}function w(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",19),h.TgZ(2,"table",20),h.TgZ(3,"thead",21),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"ID"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"Name"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Opening Balance"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Inward"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"Outward"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Balance"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"tbody"),h.YNc(18,b,17,18,"tr",22),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw();h.xp6(18),h.Q6J("ngForOf",e.cashBalances)}}function y(e,t){1&e&&(h.TgZ(0,"p",26),h._uU(1,"No Cash Balance available."),h.qZA())}function x(e,t){if(1&e&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.ALo(3,"date"),h.qZA(),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.TgZ(6,"td"),h._uU(7),h.qZA(),h.TgZ(8,"td",11),h._uU(9),h.ALo(10,"number"),h.qZA(),h.qZA()),2&e){const e=t.$implicit;h.xp6(2),h.Oqu(h.xi3(3,4,e.tr_date,"short")),h.xp6(3),h.Oqu(e.payer_name||e.payer_id),h.xp6(2),h.Oqu(e.payee_name||e.payee_id),h.xp6(2),h.Oqu(h.xi3(10,7,e.cash,"1.2-2"))}}function _(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",19),h.TgZ(2,"table",20),h.TgZ(3,"thead",21),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"Date"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"Payer(\u09a6\u09bf\u09df\u09c7\u099b\u09c7)"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Payee(\u09a8\u09bf\u09df\u09c7\u099b\u09c7)"),h.qZA(),h.TgZ(11,"th",11),h._uU(12,"Cash"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"tbody"),h.YNc(14,x,11,10,"tr",22),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw();h.xp6(14),h.Q6J("ngForOf",e.cashTransactions)}}function U(e,t){1&e&&(h.TgZ(0,"p",26),h._uU(1,"No transactions available."),h.qZA())}function C(e,t){if(1&e&&(h.TgZ(0,"div",31),h.TgZ(1,"mat-card",3),h.TgZ(2,"mat-card-title"),h._uU(3,"Developer Area"),h.qZA(),h.TgZ(4,"mat-tab-group",32),h.TgZ(5,"mat-tab",33),h.TgZ(6,"pre"),h._uU(7),h.ALo(8,"json"),h.qZA(),h.qZA(),h.TgZ(9,"mat-tab",34),h.TgZ(10,"pre"),h._uU(11),h.ALo(12,"json"),h.qZA(),h.qZA(),h.TgZ(13,"mat-tab",35),h.TgZ(14,"pre"),h._uU(15),h.ALo(16,"json"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw(2);h.xp6(7),h.hij("                            cashWithdrawForm=",h.lcZ(8,3,e.cashWithdrawForm.value),"\n                        "),h.xp6(4),h.hij("                            cashBalances=",h.lcZ(12,5,e.cashBalances),"\n                        "),h.xp6(4),h.hij("                            cashTransactions = ",h.lcZ(16,7,e.cashTransactions),"\n                        ")}}function I(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",27),h.TgZ(1,"mat-button-toggle-group",28),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().showDeveloperDiv=t}),h.TgZ(2,"mat-button-toggle",29),h._uU(3,"Show Developer Area"),h.qZA(),h.TgZ(4,"mat-button-toggle",29),h._uU(5,"Hide Developer Area"),h.qZA(),h.qZA(),h.YNc(6,C,17,9,"div",30),h.qZA()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngModel",e.showDeveloperDiv),h.xp6(1),h.Q6J("value",!0),h.xp6(2),h.Q6J("value",!1),h.xp6(2),h.Q6J("ngIf",e.showDeveloperDiv)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,r){this.route=e,this.managerService=t,this.reportService=r,this.showDeveloperDiv=!1,this.isProduction=s.N.production,this.employees=[],this.cashWithdrawForm=new o.cw({payer_id:new o.NI(null,[o.kI.required]),payee_id:new o.NI(null,[o.kI.required]),cash:new o.NI(null,[o.kI.required])})}ngOnInit(){this.employees=this.route.snapshot.data.employeeResolver.data,this.projectDetails=this.route.snapshot.data.projectDetails,this.cashBalances=this.route.snapshot.data.cashBalances.data,this.currentUser=this.route.snapshot.data.currentUser.data,this.cashWithdrawForm.patchValue({payee_id:this.currentUser.employeeId}),this.currentUser&&72===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(e=>this.projectDetails.managerCashWithdrawn.employees.find(t=>t===e.employeeId))),this.currentUser&&28===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(e=>this.projectDetails.ownerCashWithdrawnFromManager.employees.find(t=>t===e.employeeId))),this.cashTransactions=this.route.snapshot.data.cashTransactionsByEmployee.data}saveCashWithdrawn(){c().fire({title:"Withdraw Cash from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Withdraw",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{!e.value||this.managerService.saveCashTransactionBetweenEmployee(this.cashWithdrawForm.value).subscribe(e=>{!0===e.status&&(c().fire({timer:2e3,title:"Saved",text:"Cash Withdrawn successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.savedResponse=e,this.managerService.cashTransactionsByCurrentUser().subscribe(e=>{this.cashTransactions=e.data}),this.reportService.cashBalance().subscribe(e=>{this.cashBalances=e.data}),this.cashWithdrawForm.reset())},e=>{c().fire({title:e.message,text:"Cash Withdrawn Unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}onEmployeeChange(e){console.log(e),this.cashTransactions=e?this.route.snapshot.data.cashTransactionsByEmployee.data.filter(t=>t.payer_id===e.employeeId||t.payee_id===e.employeeId):this.route.snapshot.data.cashTransactionsByEmployee.data}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(n.gz),h.Y36(l.b),h.Y36(u.r))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-manager-cash-withdrawn"]],decls:35,vars:12,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","payer_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"w-100"],["type","number","matInput","","formControlName","cash","placeholder","Cash",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[4,"ngIf","ngIfElse"],["noCashBalances",""],["noTransactions",""],["class","mt-4",4,"ngIf"],[1,"text-danger","mt-1"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-end","text-success"],[1,"text-end","text-danger"],[1,"text-end",3,"ngClass"],[1,"text-muted","m-3"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"mat-card",3),h.TgZ(4,"mat-card-title",4),h._uU(5),h.qZA(),h.TgZ(6,"form",5),h.TgZ(7,"div",4),h.TgZ(8,"ng-select",6),h.NdJ("change",function(e){return t.onEmployeeChange(e)}),h.qZA(),h.YNc(9,T,2,0,"div",7),h.qZA(),h.TgZ(10,"div",4),h.TgZ(11,"mat-form-field",8),h.TgZ(12,"mat-label"),h._uU(13,"Enter Cash"),h.qZA(),h._UZ(14,"input",9),h.YNc(15,A,2,0,"mat-error",10),h.YNc(16,f,2,0,"mat-error",10),h.qZA(),h.qZA(),h._UZ(17,"div",4),h.TgZ(18,"div",11),h.TgZ(19,"button",12),h.NdJ("click",function(){return t.saveCashWithdrawn()}),h._uU(20," \ud83d\udcbe Save Record "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(21,"div",13),h.TgZ(22,"mat-card",3),h.TgZ(23,"mat-card-title"),h._uU(24,"Cash Balance"),h.qZA(),h.YNc(25,w,19,1,"div",14),h.YNc(26,y,2,0,"ng-template",null,15,h.W1O),h.qZA(),h.TgZ(28,"mat-card",3),h.TgZ(29,"mat-card-title"),h._uU(30,"Cash Transactions"),h.qZA(),h.YNc(31,_,15,1,"div",14),h.YNc(32,U,2,0,"ng-template",null,16,h.W1O),h.qZA(),h.qZA(),h.qZA(),h.YNc(34,I,7,4,"div",17),h.qZA()),2&e){const e=h.MAs(27),r=h.MAs(33);let a,n,s;h.xp6(5),h.hij("Cash Withdraw by ",t.currentUser.userName,""),h.xp6(1),h.Q6J("formGroup",t.cashWithdrawForm),h.xp6(2),h.Q6J("items",t.selectableEmployees),h.xp6(1),h.Q6J("ngIf",(null==(a=t.cashWithdrawForm.get("payer_id"))?null:a.touched)&&(null==(a=t.cashWithdrawForm.get("payer_id"))?null:a.invalid)),h.xp6(6),h.Q6J("ngIf",null==(n=t.cashWithdrawForm.get("cash"))?null:n.hasError("required")),h.xp6(1),h.Q6J("ngIf",null==(s=t.cashWithdrawForm.get("cash"))?null:s.hasError("min")),h.xp6(3),h.Q6J("disabled",!t.cashWithdrawForm.valid||t.cashWithdrawForm.pristine),h.xp6(6),h.Q6J("ngIf",t.cashBalances&&t.cashBalances.length)("ngIfElse",e),h.xp6(6),h.Q6J("ngIf",t.cashTransactions&&t.cashTransactions.length)("ngIfElse",r),h.xp6(3),h.Q6J("ngIf",!t.isProduction)}},directives:[p.a8,p.n5,o._Y,o.JL,o.sg,d.w9,o.JJ,o.u,a.O5,g.KE,g.hX,o.wV,m.Nt,o.Fj,g.TO,a.sg,a.mk,Z.A9,o.On,Z.Yi,v.SP,v.uX],pipes:[a.JJ,a.uU,a.Ts],styles:["button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[n.Bz.forChild(S)],n.Bz]}),e})();var B=r(1769);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[a.ez,E,Z.vV,o.u5,p.QW,v.Nh,o.UX,d.A0,g.lN,B.t,m.c]]}),e})()},57916:function(e,t,r){r.d(t,{b:function(){return h}});var a=r(5304),n=r(68307),s=r(37716),o=r(5620),i=r(91841),c=r(84889);let h=(()=>{class e{constructor(e,t,r){this.commonService=e,this.http=t,this.errorService=r}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}addTopUpGold(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(o.v),s.LFG(i.eN),s.LFG(c.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);