"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8942],{38942:function(t,e,r){r.r(e),r.d(e,{MaterialToEmployeesReportModule:function(){return I}});var o=r(38583),n=r(63423),a=r(92340),i=r(3679),l=r(37716),s=r(82820),c=r(5620),p=r(72458),u=r(98295),d=r(49983),m=r(43220),Z=r(86640),g=r(4207),f=r(26584),A=r(33013),q=r(95913),T=r(76627);function x(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"h4"),l._uU(1),l.qZA(),l.TgZ(2,"div",27),l.TgZ(3,"div",28),l._UZ(4,"i",29),l.TgZ(5,"input",30),l.NdJ("input",function(e){return l.CHM(t),l.oxw(),l.MAs(3).filterGlobal(e.target.value,"contains")}),l.qZA(),l.qZA(),l.TgZ(6,"div"),l.TgZ(7,"button",31),l.TgZ(8,"mat-icon"),l._uU(9,"print"),l.qZA(),l.qZA(),l.TgZ(10,"button",32),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).commonService.exportToExcel("transaction-table","stock")}),l.TgZ(11,"mat-icon"),l._uU(12,"cloud_download"),l.qZA(),l.qZA(),l.TgZ(13,"button",32),l.NdJ("click",function(){l.CHM(t);const e=l.oxw(2);return e.commonService.arrayToExcel(e.materialTransactions,"transactions.xlsx")}),l.TgZ(14,"mat-icon"),l._uU(15,"shuffle"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw(2);l.xp6(1),l.AsE("Material submitted to employees from ",t.reportForm.value.startDateSql," to ",t.reportForm.value.endDateSql,""),l.xp6(6),l.Q6J("useExistingCss",!1)}}function h(t,e){1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"th"),l._uU(2,"SL"),l.qZA(),l.TgZ(3,"th",33),l._uU(4,"Date "),l._UZ(5,"p-sortIcon",34),l.qZA(),l.TgZ(6,"th",35),l._uU(7,"Employee "),l._UZ(8,"p-sortIcon",36),l.qZA(),l.TgZ(9,"th",37),l._uU(10,"Employee "),l._UZ(11,"p-sortIcon",38),l.qZA(),l.TgZ(12,"th",39),l._uU(13,"Value "),l._UZ(14,"p-sortIcon",40),l.qZA(),l.qZA())}function _(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td",41),l._uU(10),l.ALo(11,"number"),l.qZA(),l.qZA()),2&t){const t=e.$implicit,r=e.rowIndex;l.xp6(2),l.Oqu(r+1),l.xp6(2),l.Oqu(t.record_time),l.xp6(2),l.Oqu(t.emp_name),l.xp6(2),l.Oqu(t.rm_name),l.xp6(2),l.Oqu(l.xi3(11,5,t.inward,"0.3-3"))}}function v(t,e){if(1&t&&(l.TgZ(0,"tr",42),l.TgZ(1,"td"),l._uU(2,"SL"),l.qZA(),l.TgZ(3,"td"),l._uU(4,"Date"),l.qZA(),l.TgZ(5,"td"),l._uU(6,"Employee"),l.qZA(),l.TgZ(7,"td"),l._uU(8,"Employee"),l.qZA(),l.TgZ(9,"td"),l._uU(10,"Value"),l.qZA(),l.qZA(),l.TgZ(11,"tr"),l.TgZ(12,"td",43),l._uU(13,"Total"),l.qZA(),l.TgZ(14,"td",41),l._uU(15),l.ALo(16,"number"),l.qZA(),l.qZA()),2&t){const t=l.oxw(2);l.xp6(15),l.Oqu(l.xi3(16,1,t.totalInward,"0.3-3"))}}const w=function(){return[2e3,3e3,5e3,100,400,600,1e3,5e3]},b=function(){return["emp_name"]};function S(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"div",20),l.TgZ(2,"p-table",21,22),l.NdJ("onFilter",function(e){l.CHM(t);const r=l.MAs(3);return l.oxw().onFilter(e,r)}),l.YNc(4,x,16,3,"ng-template",23),l.YNc(5,h,15,0,"ng-template",24),l.YNc(6,_,12,8,"ng-template",25),l.YNc(7,v,17,4,"ng-template",26),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.Q6J("value",t.materialTransactions)("rows",5e3)("showCurrentPageReport",!0)("rowsPerPageOptions",l.DdM(7,w))("paginator",!0)("globalFilterFields",l.DdM(8,b))("responsive",!0)}}function U(t,e){if(1&t&&(l.TgZ(0,"div",44),l.TgZ(1,"div",45),l.TgZ(2,"div",46),l.TgZ(3,"div",47),l.TgZ(4,"pre"),l._uU(5),l.ALo(6,"json"),l.qZA(),l.qZA(),l.TgZ(7,"div",48),l.TgZ(8,"pre"),l._uU(9),l.ALo(10,"json"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(5),l.hij("                        reportForm = ",l.lcZ(6,2,t.reportForm.value),"\n                    "),l.xp6(4),l.hij("                        this.materialTransactions = ",l.lcZ(10,4,t.materialTransactions),"\n                    ")}}const D=[{path:"",component:(()=>{class t{constructor(t,e,r){this.reportService=t,this.commonService=e,this.adapter=r,this.isProduction=a.N.production,this.isLoading=!1,this.totalInward=0,this.adapter.setLocale("in");const o=new Date,n=new Date;this.reportForm=new i.cw({startDate:new i.NI(o),startDateSql:new i.NI(o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()),endDate:new i.NI(n),endDateSql:new i.NI(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()),reportLimit:new i.NI(50),rm_id:new i.NI(null)})}setStartDateSQL(t){this.reportForm.patchValue({startDateSql:this.commonService.getSQLDate2(t)})}setEndDateSQL(t){this.reportForm.patchValue({endDateSql:this.commonService.getSQLDate2(t)})}ngOnInit(){this.reportService.getOwnerSubmittedMaterials().subscribe(t=>{this.materialList=t.data})}loadReport(){console.log(this.reportForm.value.startDateSql,this.reportForm.value.endDateSql,this.reportForm.value.rm_id),this.reportService.getMaterialsSendByOwnerByDatesAndMaterial(this.reportForm.value.startDateSql,this.reportForm.value.endDateSql,this.reportForm.value.rm_id).subscribe(t=>{this.materialTransactions=t.data,this.totalInward=this.materialTransactions.map(t=>t.inward).reduce((t,e)=>t+e)})}onFilter(t,e){this.totalInward=e.filteredValue.map(t=>t.inward).reduce((t,e)=>t+e)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.r),l.Y36(c.v),l.Y36(p._A))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-material-to-employees-report"]],decls:31,vars:13,consts:[[1,"p-2"],[1,"container-fluid","rounded","d-flex","flex-xl-row","justify-content-xl-between","flex-column"],[1,"p-2","col-xl-10",2,"background-color","#e4e5d7","border-radius","10px","margin-bottom","5px"],[3,"formGroup"],[1,"form-row"],[1,"col"],["appearance","outline",1,"p-2"],["matInput","","formControlName","startDate",3,"matDatepicker","dateInput"],["ref1",""],["matSuffix","",3,"for"],["startView","year",3,"opened"],["matDatepicker1",""],["matInput","","formControlName","endDate",3,"matDatepicker","dateInput"],["ref2",""],["matDatepicker2",""],["bindLabel","rm_name","bindValue","rm_id","formControlName","rm_id","placeholder","Select Material",1,"custom",3,"items"],["materialId",""],["pButton","","type","button","label","Show Record","icon","pi pi-check",3,"loading","click"],["class","container-fluid rounded d-flex flex-xl-row justify-content-xl-between flex-column",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"p-2",2,"border","1px solid #454141","border-radius","10px"],["id","transaction-table","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","responsive","onFilter"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"d-flex","justify-content-between"],[1,"p-input-icon-left","ml-auto","mr-3"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"text-right","no-print",3,"input"],["mat-button","","color","primary","printSectionId","transaction-table","styleSheetFile","assets/print_css/material_from_owner/style1.css","ngxPrint","",1,"no-print","ml-1",3,"useExistingCss"],["mat-button","","color","primary",1,"no-print","ml-1",3,"click"],["pSortableColumn","record_time"],["field","record_time"],["pSortableColumn","emp_name"],["field","emp_name"],["pSortableColumn","rm_name"],["field","rm_name"],["pSortableColumn","inward"],["field","inward"],[1,"text-right"],[1,"no-print"],["colspan","4"],["id","developer-div"],[1,"outerContainer"],["fxLayout","row","fxLayoutGap","1px","fxLayout.sm","column",1,"container"],["fxLayoutAlign","center center",1,"col"],["fxFlex","2 1 auto","fxLayoutAlign","center center",1,"col"]],template:function(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"form",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.TgZ(6,"mat-form-field",6),l.TgZ(7,"mat-label"),l._uU(8,"Start Date"),l.qZA(),l.TgZ(9,"input",7,8),l.NdJ("dateInput",function(){l.CHM(t);const r=l.MAs(10);return e.setStartDateSQL(r.value)}),l.qZA(),l._UZ(11,"mat-datepicker-toggle",9),l._UZ(12,"mat-datepicker",10,11),l.qZA(),l.TgZ(14,"mat-form-field",6),l.TgZ(15,"mat-label"),l._uU(16,"End Date"),l.qZA(),l.TgZ(17,"input",12,13),l.NdJ("dateInput",function(){l.CHM(t);const r=l.MAs(18);return e.setEndDateSQL(r.value)}),l.qZA(),l._UZ(19,"mat-datepicker-toggle",9),l._UZ(20,"mat-datepicker",10,14),l.qZA(),l.qZA(),l.TgZ(22,"div",5),l._UZ(23,"ng-select",15,16),l.qZA(),l.TgZ(25,"div",5),l.TgZ(26,"div"),l._uU(27),l.qZA(),l.TgZ(28,"button",17),l.NdJ("click",function(){return e.loadReport()}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(29,S,8,9,"div",18),l.qZA(),l.YNc(30,U,11,6,"div",19)}if(2&t){const t=l.MAs(10),r=l.MAs(13),o=l.MAs(18),n=l.MAs(21);l.xp6(3),l.Q6J("formGroup",e.reportForm),l.xp6(6),l.Q6J("matDatepicker",r),l.xp6(2),l.Q6J("for",r),l.xp6(1),l.Q6J("opened",!0),l.xp6(5),l.Q6J("matDatepicker",n),l.xp6(2),l.Q6J("for",n),l.xp6(1),l.Q6J("opened",!1),l.xp6(3),l.Q6J("items",e.materialList),l.xp6(4),l.AsE("Material Submit from ",t.value," to ",o.value,""),l.xp6(1),l.Q6J("loading",e.isLoading),l.xp6(1),l.Q6J("ngIf",e.materialTransactions),l.xp6(1),l.Q6J("ngIf",!e.isProduction)}},directives:[i._Y,i.JL,i.sg,u.KE,u.hX,d.Nt,i.Fj,m.hl,i.JJ,i.u,m.nW,u.R9,m.Mq,Z.w9,g.Hq,o.O5,f.iA,A.jx,q.I,T.Hw,f.lQ,f.fz],pipes:[o.JJ,o.Ts],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.Bz.forChild(D)],n.Bz]}),t})();var F=r(70705);let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,y,m.FA,d.c,p.XK,i.UX,g.hJ,f.U$,F.L$,Z.A0,T.Ps,q.K]]}),t})()}}]);