!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(a=r.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?o:String(o)),r)}var a,o}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[1358],{61358:function(e,r,a){a.r(r),a.d(r,{GpTransactionModule:function(){return N}});var o=a(72458),i=a(38583),u=a(63423),c=a(92340),l=a(3679),s=a(37716),p=a(57916),g=a(98295),m=a(49983),f=a(43220),d=a(67441),v=a(51095),Z=a(42542),T=a(65939);function _(t,e){if(1&t&&(s.TgZ(0,"mat-option",17),s._uU(1),s.qZA()),2&t){var n=e.$implicit;s.Q6J("value",n.id),s.xp6(1),s.hij(" ",n.name," ")}}function b(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Transaction type is required. "),s.qZA())}function h(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Must be a valid transaction type. "),s.qZA())}function y(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," GP value is required. "),s.qZA())}function A(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Must be at least 0.001. "),s.qZA())}function q(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"mat-button-toggle-group",18),s.TgZ(1,"mat-button-toggle",19),s.NdJ("click",function(){return s.CHM(n),s.oxw().showDeveloperDiv=!0}),s._uU(2,"Show"),s.qZA(),s.TgZ(3,"mat-button-toggle",19),s.NdJ("click",function(){return s.CHM(n),s.oxw().showDeveloperDiv=!1}),s._uU(4,"Hide"),s.qZA(),s.qZA()}}function w(t,e){if(1&t&&(s.TgZ(0,"div",20),s.TgZ(1,"div",21),s.TgZ(2,"h2"),s._uU(3,"Developer Area"),s.qZA(),s.TgZ(4,"mat-tab-group",22),s.TgZ(5,"mat-tab",23),s.TgZ(6,"pre"),s._uU(7),s.ALo(8,"json"),s.qZA(),s.qZA(),s.TgZ(9,"mat-tab",24),s.TgZ(10,"pre"),s._uU(11,"\n                "),s.qZA(),s.qZA(),s.TgZ(12,"mat-tab",25),s.TgZ(13,"pre"),s._uU(14,"\n                "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var n=s.oxw();s.xp6(7),s.hij("                    transanctionForm = ",s.lcZ(8,1,n.gpTransactionForm.value),"\n                ")}}var F,S=[{path:"",component:(F=function(){function e(n){t(this,e),this.managerService=n,this.isProduction=c.N.production,this.showDeveloperDiv=!1,this.transactionTypes=[{id:2,name:"Purchased"},{id:3,name:"Brought from owner, \u09ae\u09be\u09b2\u09bf\u0995 \u09a6\u09bf\u09df\u09c7\u099b\u09c7"},{id:4,name:"Used \u0995\u09be\u099c\u09c7 \u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7"},{id:5,name:"Destroyed \u09a8\u09b7\u09cd\u099f \u09b9\u09df\u09c7 \u0997\u09c7\u099b\u09c7"},{id:6,name:"Returned to owner \u09ae\u09be\u09b2\u09bf\u0995 \u0995\u09c7 \u09ab\u09c7\u09b0\u09a4 \u09a6\u09c7\u0993\u09df\u09be \u09b9\u09df\u09c7\u099b\u09c7"}],this.gpTransactionForm=new l.cw({transaction_date:new l.NI(new Date,[l.kI.required,this.dateNotInFutureValidator]),gp_transaction_type_id:new l.NI(null,[l.kI.required,l.kI.pattern("^[1-6]$")]),gp_value:new l.NI(null,[l.kI.required,l.kI.min(.001)])})}return n(e,[{key:"dateNotInFutureValidator",value:function(t){var e=new Date(t.value),n=new Date;return e.setHours(0,0,0,0),n.setHours(0,0,0,0),e<=n?null:{dateInFuture:!0}}},{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this;if(!this.gpTransactionForm.invalid){var e=new Date(this.gpTransactionForm.value.transaction_date),n={comment:"Save",transaction_date:"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),gp_transaction_type_id:this.gpTransactionForm.value.gp_transaction_type_id,gp_value:this.gpTransactionForm.value.gp_value};console.log(n),this.managerService.saveGpTransactions(n).subscribe({next:function(e){console.log("Transaction saved successfully",e),alert("Transaction saved successfully!"),t.gpTransactionForm.reset(),t.gpTransactionForm.patchValue({transaction_date:new Date})},error:function(t){console.error("Error saving transaction:",t),alert("Failed to save transaction. Please try again.")}})}}}]),e}(),F.\u0275fac=function(t){return new(t||F)(s.Y36(p.b))},F.\u0275cmp=s.Xpm({type:F,selectors:[["app-gp-transaction"]],decls:32,vars:11,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[1,"mat-elevation-z2","p-4","bg-white","rounded",3,"formGroup","ngSubmit"],[1,"mat-headline","mb-4"],["appearance","fill"],["matInput","","formControlName","transaction_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["appearance","fill",1,"w-100","mb-3"],["formControlName","gp_transaction_type_id"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","formControlName","gp_value","placeholder","Enter GP value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"p-2","col-8","d-flex"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[3,"value"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(t,e){if(1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3"),s._uU(3,"GP Transaction"),s.qZA(),s.TgZ(4,"form",2),s.NdJ("ngSubmit",function(){return e.onSubmit()}),s.TgZ(5,"h2",3),s._uU(6,"GP Transaction Form"),s.qZA(),s.TgZ(7,"mat-form-field",4),s.TgZ(8,"mat-label"),s._uU(9,"Transaction Date"),s.qZA(),s._UZ(10,"input",5),s._UZ(11,"mat-datepicker-toggle",6),s._UZ(12,"mat-datepicker",null,7),s.qZA(),s.TgZ(14,"mat-form-field",8),s.TgZ(15,"mat-label"),s._uU(16,"Transaction Type"),s.qZA(),s.TgZ(17,"mat-select",9),s.YNc(18,_,2,2,"mat-option",10),s.qZA(),s.YNc(19,b,2,0,"mat-error",11),s.YNc(20,h,2,0,"mat-error",11),s.qZA(),s.TgZ(21,"mat-form-field",8),s.TgZ(22,"mat-label"),s._uU(23,"GP Value"),s.qZA(),s._UZ(24,"input",12),s.YNc(25,y,2,0,"mat-error",11),s.YNc(26,A,2,0,"mat-error",11),s.qZA(),s.TgZ(27,"button",13),s._uU(28," Submit "),s.qZA(),s.qZA(),s.qZA(),s._UZ(29,"div",14),s.qZA(),s.YNc(30,q,5,0,"mat-button-toggle-group",15),s.YNc(31,w,15,3,"div",16)),2&t){var n,r,a,o,i=s.MAs(13);s.xp6(4),s.Q6J("formGroup",e.gpTransactionForm),s.xp6(6),s.Q6J("matDatepicker",i),s.xp6(1),s.Q6J("for",i),s.xp6(7),s.Q6J("ngForOf",e.transactionTypes),s.xp6(1),s.Q6J("ngIf",null==(n=e.gpTransactionForm.get("gp_transaction_type_id"))?null:n.hasError("required")),s.xp6(1),s.Q6J("ngIf",null==(r=e.gpTransactionForm.get("gp_transaction_type_id"))?null:r.hasError("pattern")),s.xp6(5),s.Q6J("ngIf",null==(a=e.gpTransactionForm.get("gp_value"))?null:a.hasError("required")),s.xp6(1),s.Q6J("ngIf",null==(o=e.gpTransactionForm.get("gp_value"))?null:o.hasError("min")),s.xp6(1),s.Q6J("disabled",e.gpTransactionForm.invalid),s.xp6(3),s.Q6J("ngIf",!e.isProduction),s.xp6(1),s.Q6J("ngIf",e.showDeveloperDiv&&!e.isProduction)}},directives:[l._Y,l.JL,l.sg,g.KE,g.hX,m.Nt,l.Fj,f.hl,l.JJ,l.u,f.nW,g.R9,f.Mq,d.gD,i.sg,i.O5,l.wV,v.lW,o.ey,g.TO,Z.A9,Z.Yi,T.SP,T.uX],pipes:[i.Ts],styles:[""]}),F)}],U=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),e}(),I=a(86640),N=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[{provide:o.Ad,useValue:"en-GB"}],imports:[[i.ez,U,T.Nh,g.lN,l.UX,m.c,Z.vV,I.A0,v.ot,f.FA,d.LD,o.XK]]}),e}()}}])}();