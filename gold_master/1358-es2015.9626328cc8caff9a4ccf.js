"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[1358],{61358:function(t,e,n){n.r(e),n.d(e,{GpTransactionModule:function(){return S}});var a=n(72458),r=n(38583),o=n(63423),i=n(92340),s=n(3679),l=n(37716),u=n(57916),c=n(98295),p=n(49983),g=n(43220),m=n(67441),d=n(51095),Z=n(42542),f=n(65939);function T(t,e){if(1&t&&(l.TgZ(0,"mat-option",17),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.id),l.xp6(1),l.hij(" ",t.name," ")}}function v(t,e){1&t&&(l.TgZ(0,"mat-error"),l._uU(1," Transaction type is required. "),l.qZA())}function _(t,e){1&t&&(l.TgZ(0,"mat-error"),l._uU(1," Must be a valid transaction type. "),l.qZA())}function h(t,e){1&t&&(l.TgZ(0,"mat-error"),l._uU(1," GP value is required. "),l.qZA())}function A(t,e){1&t&&(l.TgZ(0,"mat-error"),l._uU(1," Must be at least 0.001. "),l.qZA())}function b(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"mat-button-toggle-group",18),l.TgZ(1,"mat-button-toggle",19),l.NdJ("click",function(){return l.CHM(t),l.oxw().showDeveloperDiv=!0}),l._uU(2,"Show"),l.qZA(),l.TgZ(3,"mat-button-toggle",19),l.NdJ("click",function(){return l.CHM(t),l.oxw().showDeveloperDiv=!1}),l._uU(4,"Hide"),l.qZA(),l.qZA()}}function q(t,e){if(1&t&&(l.TgZ(0,"div",20),l.TgZ(1,"div",21),l.TgZ(2,"h2"),l._uU(3,"Developer Area"),l.qZA(),l.TgZ(4,"mat-tab-group",22),l.TgZ(5,"mat-tab",23),l.TgZ(6,"pre"),l._uU(7),l.ALo(8,"json"),l.qZA(),l.qZA(),l.TgZ(9,"mat-tab",24),l.TgZ(10,"pre"),l._uU(11,"\n                "),l.qZA(),l.qZA(),l.TgZ(12,"mat-tab",25),l.TgZ(13,"pre"),l._uU(14,"\n                "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(7),l.hij("                    transanctionForm = ",l.lcZ(8,1,t.gpTransactionForm.value),"\n                ")}}const w=[{path:"",component:(()=>{class t{constructor(t){this.managerService=t,this.isProduction=i.N.production,this.showDeveloperDiv=!1,this.transactionTypes=[{id:2,name:"Purchased"},{id:3,name:"Brought from owner, \u09ae\u09be\u09b2\u09bf\u0995 \u09a6\u09bf\u09df\u09c7\u099b\u09c7"},{id:4,name:"Used \u0995\u09be\u099c\u09c7 \u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7"},{id:5,name:"Destroyed \u09a8\u09b7\u09cd\u099f \u09b9\u09df\u09c7 \u0997\u09c7\u099b\u09c7"},{id:6,name:"Returned to owner \u09ae\u09be\u09b2\u09bf\u0995 \u0995\u09c7 \u09ab\u09c7\u09b0\u09a4 \u09a6\u09c7\u0993\u09df\u09be \u09b9\u09df\u09c7\u099b\u09c7"}],this.gpTransactionForm=new s.cw({transaction_date:new s.NI(new Date,[s.kI.required,this.dateNotInFutureValidator]),gp_transaction_type_id:new s.NI(null,[s.kI.required,s.kI.pattern("^[1-6]$")]),gp_value:new s.NI(null,[s.kI.required,s.kI.min(.001)])})}dateNotInFutureValidator(t){const e=new Date(t.value),n=new Date;return e.setHours(0,0,0,0),n.setHours(0,0,0,0),e<=n?null:{dateInFuture:!0}}ngOnInit(){}onSubmit(){if(this.gpTransactionForm.invalid)return;const t=new Date(this.gpTransactionForm.value.transaction_date),e={comment:"Save",transaction_date:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,gp_transaction_type_id:this.gpTransactionForm.value.gp_transaction_type_id,gp_value:this.gpTransactionForm.value.gp_value};console.log(e),this.managerService.saveGpTransactions(e).subscribe({next:t=>{console.log("Transaction saved successfully",t),alert("Transaction saved successfully!"),this.gpTransactionForm.reset(),this.gpTransactionForm.patchValue({transaction_date:new Date})},error:t=>{console.error("Error saving transaction:",t),alert("Failed to save transaction. Please try again.")}})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.b))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-gp-transaction"]],decls:32,vars:11,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[1,"mat-elevation-z2","p-4","bg-white","rounded",3,"formGroup","ngSubmit"],[1,"mat-headline","mb-4"],["appearance","fill"],["matInput","","formControlName","transaction_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["appearance","fill",1,"w-100","mb-3"],["formControlName","gp_transaction_type_id"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","formControlName","gp_value","placeholder","Enter GP value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"p-2","col-8","d-flex"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[3,"value"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h3"),l._uU(3,"GP Transaction"),l.qZA(),l.TgZ(4,"form",2),l.NdJ("ngSubmit",function(){return e.onSubmit()}),l.TgZ(5,"h2",3),l._uU(6,"GP Transaction Form"),l.qZA(),l.TgZ(7,"mat-form-field",4),l.TgZ(8,"mat-label"),l._uU(9,"Transaction Date"),l.qZA(),l._UZ(10,"input",5),l._UZ(11,"mat-datepicker-toggle",6),l._UZ(12,"mat-datepicker",null,7),l.qZA(),l.TgZ(14,"mat-form-field",8),l.TgZ(15,"mat-label"),l._uU(16,"Transaction Type"),l.qZA(),l.TgZ(17,"mat-select",9),l.YNc(18,T,2,2,"mat-option",10),l.qZA(),l.YNc(19,v,2,0,"mat-error",11),l.YNc(20,_,2,0,"mat-error",11),l.qZA(),l.TgZ(21,"mat-form-field",8),l.TgZ(22,"mat-label"),l._uU(23,"GP Value"),l.qZA(),l._UZ(24,"input",12),l.YNc(25,h,2,0,"mat-error",11),l.YNc(26,A,2,0,"mat-error",11),l.qZA(),l.TgZ(27,"button",13),l._uU(28," Submit "),l.qZA(),l.qZA(),l.qZA(),l._UZ(29,"div",14),l.qZA(),l.YNc(30,b,5,0,"mat-button-toggle-group",15),l.YNc(31,q,15,3,"div",16)),2&t){const t=l.MAs(13);let n,a,r,o;l.xp6(4),l.Q6J("formGroup",e.gpTransactionForm),l.xp6(6),l.Q6J("matDatepicker",t),l.xp6(1),l.Q6J("for",t),l.xp6(7),l.Q6J("ngForOf",e.transactionTypes),l.xp6(1),l.Q6J("ngIf",null==(n=e.gpTransactionForm.get("gp_transaction_type_id"))?null:n.hasError("required")),l.xp6(1),l.Q6J("ngIf",null==(a=e.gpTransactionForm.get("gp_transaction_type_id"))?null:a.hasError("pattern")),l.xp6(5),l.Q6J("ngIf",null==(r=e.gpTransactionForm.get("gp_value"))?null:r.hasError("required")),l.xp6(1),l.Q6J("ngIf",null==(o=e.gpTransactionForm.get("gp_value"))?null:o.hasError("min")),l.xp6(1),l.Q6J("disabled",e.gpTransactionForm.invalid),l.xp6(3),l.Q6J("ngIf",!e.isProduction),l.xp6(1),l.Q6J("ngIf",e.showDeveloperDiv&&!e.isProduction)}},directives:[s._Y,s.JL,s.sg,c.KE,c.hX,p.Nt,s.Fj,g.hl,s.JJ,s.u,g.nW,c.R9,g.Mq,m.gD,r.sg,r.O5,s.wV,d.lW,a.ey,c.TO,Z.A9,Z.Yi,f.SP,f.uX],pipes:[r.Ts],styles:[""]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.Bz.forChild(w)],o.Bz]}),t})();var y=n(86640);let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[{provide:a.Ad,useValue:"en-GB"}],imports:[[r.ez,F,f.Nh,c.lN,s.UX,p.c,Z.vV,y.A0,d.ot,g.FA,m.LD,a.XK]]}),t})()}}]);