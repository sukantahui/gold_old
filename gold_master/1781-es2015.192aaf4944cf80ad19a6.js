"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[1781],{1781:function(e,t,r){r.r(t),r.d(t,{ManagerCashSubmitModule:function(){return N}});var a=r(38583),s=r(63423),n=r(92340),o=r(3679),i=r(88259),c=r.n(i),l=r(37716),h=r(57916),u=r(82820),p=r(93738),m=r(86640),g=r(98295),d=r(49983),Z=r(42542),v=r(65939);function T(e,t){1&e&&(l.TgZ(0,"div",18),l._uU(1," Employee selection is required "),l.qZA())}function A(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1," Cash value is required "),l.qZA())}function b(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1," Cash must be greater than 0 "),l.qZA())}const f=function(e,t){return{"text-success":e,"text-danger":t}};function q(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",11),l._uU(6),l.ALo(7,"number"),l.qZA(),l.TgZ(8,"td",23),l._uU(9),l.ALo(10,"number"),l.qZA(),l.TgZ(11,"td",24),l._uU(12),l.ALo(13,"number"),l.qZA(),l.TgZ(14,"td",25),l._uU(15),l.ALo(16,"number"),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.emp_id),l.xp6(2),l.Oqu(e.emp_name),l.xp6(2),l.Oqu(l.lcZ(7,7,e.op_balance)),l.xp6(3),l.Oqu(l.lcZ(10,9,e.inward)),l.xp6(3),l.Oqu(l.lcZ(13,11,e.outward)),l.xp6(2),l.Q6J("ngClass",l.WLB(15,f,e.balance>=0,e.balance<0)),l.xp6(1),l.hij(" ",l.lcZ(16,13,e.balance)," ")}}function y(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"div",19),l.TgZ(2,"table",20),l.TgZ(3,"thead",21),l.TgZ(4,"tr"),l.TgZ(5,"th"),l._uU(6,"ID"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Name"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Opening Balance"),l.qZA(),l.TgZ(11,"th"),l._uU(12,"Inward"),l.qZA(),l.TgZ(13,"th"),l._uU(14,"Outward"),l.qZA(),l.TgZ(15,"th"),l._uU(16,"Balance"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"tbody"),l.YNc(18,q,17,18,"tr",22),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(18),l.Q6J("ngForOf",e.cashBalances)}}function w(e,t){1&e&&(l.TgZ(0,"p",26),l._uU(1,"No Cash Balance available."),l.qZA())}function x(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.ALo(3,"date"),l.qZA(),l.TgZ(4,"td"),l._uU(5),l.qZA(),l.TgZ(6,"td"),l._uU(7),l.qZA(),l.TgZ(8,"td",11),l._uU(9),l.ALo(10,"number"),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Oqu(l.xi3(3,4,e.tr_date,"short")),l.xp6(3),l.Oqu(e.payer_name||e.payer_id),l.xp6(2),l.Oqu(e.payee_name||e.payee_id),l.xp6(2),l.Oqu(l.xi3(10,7,e.cash,"1.2-2"))}}function S(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"div",19),l.TgZ(2,"table",20),l.TgZ(3,"thead",21),l.TgZ(4,"tr"),l.TgZ(5,"th"),l._uU(6,"Date"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Payer(\u09a6\u09bf\u09df\u09c7\u099b\u09c7)"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Payee(\u09a8\u09bf\u09df\u09c7\u099b\u09c7)"),l.qZA(),l.TgZ(11,"th",11),l._uU(12,"Cash"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"tbody"),l.YNc(14,x,11,10,"tr",22),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(14),l.Q6J("ngForOf",e.cashTransactions)}}function _(e,t){1&e&&(l.TgZ(0,"p",26),l._uU(1,"No transactions available."),l.qZA())}function U(e,t){if(1&e&&(l.TgZ(0,"div",31),l.TgZ(1,"mat-card",3),l.TgZ(2,"mat-card-title"),l._uU(3,"Developer Area"),l.qZA(),l.TgZ(4,"mat-tab-group",32),l.TgZ(5,"mat-tab",33),l.TgZ(6,"pre"),l._uU(7),l.ALo(8,"json"),l.qZA(),l.qZA(),l.TgZ(9,"mat-tab",34),l.TgZ(10,"pre"),l._uU(11),l.ALo(12,"json"),l.qZA(),l.qZA(),l.TgZ(13,"mat-tab",35),l.TgZ(14,"pre"),l._uU(15),l.ALo(16,"json"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(7),l.hij("                            cashWithdrawForm=",l.lcZ(8,3,e.cashSubmit.value),"\n                        "),l.xp6(4),l.hij("                            cashBalances=",l.lcZ(12,5,e.cashBalances),"\n                        "),l.xp6(4),l.hij("                            cashTransactions = ",l.lcZ(16,7,e.cashTransactions),"\n                        ")}}function C(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",27),l.TgZ(1,"mat-button-toggle-group",28),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().showDeveloperDiv=t}),l.TgZ(2,"mat-button-toggle",29),l._uU(3,"Show Developer Area"),l.qZA(),l.TgZ(4,"mat-button-toggle",29),l._uU(5,"Hide Developer Area"),l.qZA(),l.qZA(),l.YNc(6,U,17,9,"div",30),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngModel",e.showDeveloperDiv),l.xp6(1),l.Q6J("value",!0),l.xp6(2),l.Q6J("value",!1),l.xp6(2),l.Q6J("ngIf",e.showDeveloperDiv)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,r){this.route=e,this.managerService=t,this.reportService=r,this.showDeveloperDiv=!1,this.isProduction=n.N.production,this.employees=[],this.cashSubmit=new o.cw({payer_id:new o.NI(null,[o.kI.required]),cash:new o.NI(null,[o.kI.required])})}ngOnInit(){this.employees=this.route.snapshot.data.employeeResolver.data,this.projectDetails=this.route.snapshot.data.projectDetails,this.cashBalances=this.route.snapshot.data.cashBalances.data,this.currentUser=this.route.snapshot.data.currentUser.data,this.currentUser&&72===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(e=>this.projectDetails.managerCashWithdrawn.employees.find(t=>t===e.employeeId))),this.currentUser&&28===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(e=>this.projectDetails.ownerCashWithdrawnFromManager.employees.find(t=>t===e.employeeId))),this.cashTransactions=this.route.snapshot.data.cashTransactionsByEmployee.data}saveCashWithdrawn(){c().fire({title:"Withdraw Cash from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Withdraw",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{!e.value||this.managerService.saveCashTransactionBetweenEmployee(this.cashSubmit.value).subscribe(e=>{!0===e.status&&(c().fire({timer:2e3,title:"Saved",text:"Cash Withdrawn successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.savedResponse=e,this.managerService.cashTransactionsByCurrentUser().subscribe(e=>{this.cashTransactions=e.data}),this.reportService.cashBalance().subscribe(e=>{this.cashBalances=e.data}),this.cashSubmit.reset())},e=>{c().fire({title:e.message,text:"Cash Withdrawn Unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}onEmployeeChange(e){console.log(e),this.cashTransactions=e?this.route.snapshot.data.cashTransactionsByEmployee.data.filter(t=>t.payer_id===e.employeeId||t.payee_id===e.employeeId):this.route.snapshot.data.cashTransactionsByEmployee.data}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(s.gz),l.Y36(h.b),l.Y36(u.r))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-manager-cash-submit"]],decls:35,vars:12,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","payer_id","placeholder","Sending to",1,"w-100",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"w-100"],["type","number","matInput","","formControlName","cash","placeholder","Cash",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[4,"ngIf","ngIfElse"],["noCashBalances",""],["noTransactions",""],["class","mt-4",4,"ngIf"],[1,"text-danger","mt-1"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-end","text-success"],[1,"text-end","text-danger"],[1,"text-end",3,"ngClass"],[1,"text-muted","m-3"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"mat-card",3),l.TgZ(4,"mat-card-title",4),l._uU(5),l.qZA(),l.TgZ(6,"form",5),l.TgZ(7,"div",4),l.TgZ(8,"ng-select",6),l.NdJ("change",function(e){return t.onEmployeeChange(e)}),l.qZA(),l.YNc(9,T,2,0,"div",7),l.qZA(),l.TgZ(10,"div",4),l.TgZ(11,"mat-form-field",8),l.TgZ(12,"mat-label"),l._uU(13,"Enter Cash"),l.qZA(),l._UZ(14,"input",9),l.YNc(15,A,2,0,"mat-error",10),l.YNc(16,b,2,0,"mat-error",10),l.qZA(),l.qZA(),l._UZ(17,"div",4),l.TgZ(18,"div",11),l.TgZ(19,"button",12),l.NdJ("click",function(){return t.saveCashWithdrawn()}),l._uU(20," \ud83d\udcbe Save Record "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",13),l.TgZ(22,"mat-card",3),l.TgZ(23,"mat-card-title"),l._uU(24,"Cash Balance"),l.qZA(),l.YNc(25,y,19,1,"div",14),l.YNc(26,w,2,0,"ng-template",null,15,l.W1O),l.qZA(),l.TgZ(28,"mat-card",3),l.TgZ(29,"mat-card-title"),l._uU(30,"Cash Transactions"),l.qZA(),l.YNc(31,S,15,1,"div",14),l.YNc(32,_,2,0,"ng-template",null,16,l.W1O),l.qZA(),l.qZA(),l.qZA(),l.YNc(34,C,7,4,"div",17),l.qZA()),2&e){const e=l.MAs(27),r=l.MAs(33);let a,s,n;l.xp6(5),l.hij("Cash Submit by ",t.currentUser.userName,""),l.xp6(1),l.Q6J("formGroup",t.cashSubmit),l.xp6(2),l.Q6J("items",t.selectableEmployees),l.xp6(1),l.Q6J("ngIf",(null==(a=t.cashSubmit.get("payer_id"))?null:a.touched)&&(null==(a=t.cashSubmit.get("payer_id"))?null:a.invalid)),l.xp6(6),l.Q6J("ngIf",null==(s=t.cashSubmit.get("cash"))?null:s.hasError("required")),l.xp6(1),l.Q6J("ngIf",null==(n=t.cashSubmit.get("cash"))?null:n.hasError("min")),l.xp6(3),l.Q6J("disabled",!t.cashSubmit.valid||t.cashSubmit.pristine),l.xp6(6),l.Q6J("ngIf",t.cashBalances&&t.cashBalances.length)("ngIfElse",e),l.xp6(6),l.Q6J("ngIf",t.cashTransactions&&t.cashTransactions.length)("ngIfElse",r),l.xp6(3),l.Q6J("ngIf",!t.isProduction)}},directives:[p.a8,p.n5,o._Y,o.JL,o.sg,m.w9,o.JJ,o.u,a.O5,g.KE,g.hX,o.wV,d.Nt,o.Fj,g.TO,a.sg,a.mk,Z.A9,o.On,Z.Yi,v.SP,v.uX],pipes:[a.JJ,a.uU,a.Ts],styles:[""]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(I)],s.Bz]}),e})();var B=r(1769);let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.ez,E,Z.vV,o.u5,p.QW,v.Nh,o.UX,m.A0,g.lN,B.t,d.c]]}),e})()},57916:function(e,t,r){r.d(t,{b:function(){return l}});var a=r(5304),s=r(68307),n=r(37716),o=r(5620),i=r(91841),c=r(84889);let l=(()=>{class e{constructor(e,t,r){this.commonService=e,this.http=t,this.errorService=r}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}addTopUpGold(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,s.b)(e=>{}))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(o.v),n.LFG(i.eN),n.LFG(c.T))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);