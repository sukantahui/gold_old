"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8515],{8515:function(e,r,t){t.r(r),t.d(r,{DalCreationModule:function(){return F}});var o=t(38583),i=t(63423),n=t(92340),a=t(3679),s=t(88259),l=t.n(s),u=t(37716),c=t(91841),p=t(57916),v=t(86640),d=t(98295),m=t(49983),h=t(51095),g=t(42542),Z=t(65939),b=t(33839);function f(e,r){1&e&&(u.TgZ(0,"h2"),u._uU(1,"Previous balance"),u.qZA())}function T(e,r){1&e&&(u.TgZ(0,"h2"),u._uU(1,"Current balance"),u.qZA())}function A(e,r){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td",24),u._uU(4),u.ALo(5,"noCommaNumber"),u.qZA(),u.qZA()),2&e){const e=r.$implicit;u.xp6(2),u.Oqu(e.rawMaterialName),u.xp6(2),u.Oqu(u.xi3(5,2,e.closingBalance,3))}}function C(e,r){1&e&&(u.TgZ(0,"h2"),u._uU(1,"Current balance"),u.qZA())}function q(e,r){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td",24),u._uU(4),u.ALo(5,"noCommaNumber"),u.qZA(),u.qZA()),2&e){const e=r.$implicit;u.xp6(2),u.Oqu(e.rawMaterialName),u.xp6(2),u.Oqu(u.xi3(5,2,e.closingBalance,3))}}function N(e,r){if(1&e&&(u.TgZ(0,"div",1),u.YNc(1,C,2,0,"h2",17),u.TgZ(2,"table",18),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"th",19),u._uU(6,"Material Name"),u.qZA(),u.TgZ(7,"th",19),u._uU(8,"Value"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"tbody"),u.YNc(10,q,6,5,"tr",20),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.savedResponse),u.xp6(9),u.Q6J("ngForOf",e.savedResponse.data.material_balance)}}function _(e,r){if(1&e){const e=u.EpF();u.TgZ(0,"mat-button-toggle-group",25),u.TgZ(1,"mat-button-toggle",26),u.NdJ("click",function(){return u.CHM(e),u.oxw().showDeveloperDiv=!0}),u._uU(2,"Show"),u.qZA(),u.TgZ(3,"mat-button-toggle",26),u.NdJ("click",function(){return u.CHM(e),u.oxw().showDeveloperDiv=!1}),u._uU(4,"Hide"),u.qZA(),u.qZA()}}function w(e,r){if(1&e&&(u.TgZ(0,"div",27),u.TgZ(1,"div",28),u.TgZ(2,"h2"),u._uU(3,"Developer Area"),u.qZA(),u.TgZ(4,"mat-tab-group",29),u.TgZ(5,"mat-tab",30),u.TgZ(6,"pre"),u._uU(7),u.ALo(8,"json"),u.qZA(),u.qZA(),u.TgZ(9,"mat-tab",31),u.TgZ(10,"pre"),u._uU(11),u.ALo(12,"json"),u.qZA(),u.qZA(),u.TgZ(13,"mat-tab",32),u.TgZ(14,"pre"),u._uU(15),u.ALo(16,"json"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(7),u.hij("                    dalConversionForm = ",u.lcZ(8,3,e.dalConversionForm.value),"\n                "),u.xp6(4),u.hij("                    savedResponse=",u.lcZ(12,5,e.savedResponse),"\n                "),u.xp6(4),u.hij("                    this.dalCreationRation = ",u.lcZ(16,7,e.dalCreationRation),"\n                ")}}const S=[{path:"",component:(()=>{class e{constructor(e,r,t){this.route=e,this.http=r,this.managerService=t,this.isProduction=n.N.production,this.showDeveloperDiv=!1,this.silverPlusCopper=0,this.isSaved=!1,this.route.data.subscribe(e=>{this.materialBalance=e.fineToNinetyTwoResolver.materialBalance.data,this.user=e.fineToNinetyTwoResolver.user.data,this.karigars=e.fineToNinetyTwoResolver.karigars.data}),this.http.get("assets/projectDetails.json").subscribe(e=>{this.projectDetails=e,this.dalCreationRation=this.projectDetails.dalCreationRation,console.log(this.projectDetails.dalCreationRation)}),this.dalConversionForm=new a.cw({employee_id:new a.NI(this.user.emp_id,[a.kI.required]),karigar_id:new a.NI(null,[a.kI.required]),silver_id:new a.NI(38,[a.kI.required]),copper_id:new a.NI(37,[a.kI.required]),zinc_id:new a.NI(39,[a.kI.required]),dal_id:new a.NI(33,[a.kI.required]),silver_value:new a.NI(0,[a.kI.required]),copper_value:new a.NI({value:0,disables:!1},[a.kI.required]),zinc_value:new a.NI({value:0,disables:!1},[a.kI.required]),dal_value:new a.NI({value:0,disabled:!1},[a.kI.required,a.kI.min(.001)])})}ngOnInit(){this.dalConversionForm.valueChanges.subscribe(e=>{this.silverPlusCopper=(+e.silver_value||0)+(+e.copper_value||0)})}onSilverChange(e){const r=Number(e.value);if(isNaN(r))return void this.dalConversionForm.patchValue({copper_value:"",zinc_value:"",dal_value:""});const t=(r*this.dalCreationRation.copperToSilverRatio).toFixed(3);this.dalConversionForm.patchValue({copper_value:t});const o=((Number(e.value)+Number(t))*this.dalCreationRation.zincToSilverAndCopper).toFixed(3);this.dalConversionForm.patchValue({zinc_value:o});const i=(r+Number(t)+Number(o)).toFixed(3);this.dalConversionForm.patchValue({dal_value:i})}onCopperChange(e){var r;const t=Number(e.value);if(isNaN(t))return void this.dalConversionForm.patchValue({zinc_value:"",dal_value:""});const o=Number(null===(r=this.dalConversionForm.get("silver_value"))||void 0===r?void 0:r.value)||0,i=((o+t)*this.dalCreationRation.zincToSilverAndCopper).toFixed(3);this.dalConversionForm.patchValue({zinc_value:i});const n=(o+t+Number(i)).toFixed(3);this.dalConversionForm.patchValue({dal_value:n})}onZincChange(e){var r,t;const o=Number(e.value);if(isNaN(o))return void this.dalConversionForm.patchValue({dal_value:""});const i=Number(null===(r=this.dalConversionForm.get("silver_value"))||void 0===r?void 0:r.value)||0,n=Number(null===(t=this.dalConversionForm.get("copper_value"))||void 0===t?void 0:t.value)||0;this.dalConversionForm.patchValue({dal_value:(i+n+o).toFixed(3)})}resetForm(){this.savedResponse&&(this.materialBalance=this.savedResponse.data.material_balance,this.savedResponse=null),this.dalConversionForm.reset(),this.dalConversionForm.markAsPristine(),this.isSaved=!1}saveDalConversion(){l().fire({title:"Dal Creation",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{!e.value||this.managerService.saveDalCreation(this.dalConversionForm.value).subscribe(e=>{!0===e.status&&(l().fire({timer:2e3,title:"Saved",text:"Dal Created successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.isSaved=!0,this.savedResponse=e)},e=>{l().fire({title:e.message,text:"Conversion unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}}return e.\u0275fac=function(r){return new(r||e)(u.Y36(i.gz),u.Y36(c.eN),u.Y36(p.b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-dal-creation"]],decls:55,vars:13,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","emp_name","bindValue","emp_id","formControlName","karigar_id","placeholder","Select karigar",1,"custom",3,"items"],[1,"example-full-width"],["type","number","matInput","","formControlName","silver_value","placeholder","Silver",1,"text-right",3,"input"],["silverValue",""],["type","number","matInput","","formControlName","copper_value","placeholder","Copper",1,"text-right",3,"input"],["copperValue",""],["type","number","matInput","","formControlName","zinc_value","placeholder","Zinc",1,"text-right",3,"input"],["zincValue",""],["type","number","matInput","","formControlName","dal_value","placeholder","Dal",1,"text-right"],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"click"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[4,"ngIf"],[1,"table","table-striped","col-xl-12","col-lg-12","col-xs-12"],["scope","col"],[4,"ngFor","ngForOf"],["class","p-2 col-4",4,"ngIf"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"text-right"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,r){if(1&e){const e=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"form",2),u._UZ(3,"ng-select",3),u.TgZ(4,"div"),u.TgZ(5,"mat-form-field",4),u.TgZ(6,"mat-label"),u._uU(7,"Enter Silver"),u.qZA(),u.TgZ(8,"input",5,6),u.NdJ("input",function(){u.CHM(e);const t=u.MAs(9);return r.onSilverChange(t)}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div"),u.TgZ(11,"mat-form-field",4),u.TgZ(12,"mat-label"),u._uU(13,"Enter Copper"),u.qZA(),u.TgZ(14,"input",7,8),u.NdJ("input",function(){u.CHM(e);const t=u.MAs(15);return r.onCopperChange(t)}),u.qZA(),u.qZA(),u.TgZ(16,"div"),u._uU(17),u.ALo(18,"noCommaNumber"),u.qZA(),u._UZ(19,"hr"),u.qZA(),u.TgZ(20,"div"),u.TgZ(21,"mat-form-field",4),u.TgZ(22,"mat-label"),u._uU(23,"Enter Zinc"),u.qZA(),u.TgZ(24,"input",9,10),u.NdJ("input",function(){u.CHM(e);const t=u.MAs(25);return r.onZincChange(t)}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"div"),u.TgZ(27,"mat-form-field",4),u.TgZ(28,"mat-label"),u._uU(29,"Dal Valuation"),u.qZA(),u._UZ(30,"input",11),u.qZA(),u.qZA(),u.TgZ(31,"div",12),u.TgZ(32,"div",13),u.TgZ(33,"div",14),u.TgZ(34,"button",15),u.NdJ("click",function(){return r.resetForm()}),u._uU(35,"Reset"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"div",13),u.TgZ(37,"div",14),u.TgZ(38,"button",16),u.NdJ("click",function(){return r.saveDalConversion()}),u._uU(39," Save Record "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(40,"div",1),u.YNc(41,f,2,0,"h2",17),u.YNc(42,T,2,0,"h2",17),u.TgZ(43,"table",18),u.TgZ(44,"thead"),u.TgZ(45,"tr"),u.TgZ(46,"th",19),u._uU(47,"Material Name"),u.qZA(),u.TgZ(48,"th",19),u._uU(49,"Value"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(50,"tbody"),u.YNc(51,A,6,5,"tr",20),u.qZA(),u.qZA(),u.qZA(),u.YNc(52,N,11,2,"div",21),u.qZA(),u.YNc(53,_,5,0,"mat-button-toggle-group",22),u.YNc(54,w,17,9,"div",23)}2&e&&(u.xp6(2),u.Q6J("formGroup",r.dalConversionForm),u.xp6(1),u.Q6J("items",r.karigars),u.xp6(14),u.hij("Silver + Copper = ",u.xi3(18,10,r.silverPlusCopper,3)," gm"),u.xp6(21),u.Q6J("disabled",r.isSaved||!r.dalConversionForm.valid||r.dalConversionForm.pristine),u.xp6(3),u.Q6J("ngIf",r.savedResponse),u.xp6(1),u.Q6J("ngIf",!r.savedResponse),u.xp6(9),u.Q6J("ngForOf",r.materialBalance),u.xp6(1),u.Q6J("ngIf",r.savedResponse),u.xp6(1),u.Q6J("ngIf",!r.isProduction),u.xp6(1),u.Q6J("ngIf",r.showDeveloperDiv&&!r.isProduction))},directives:[a._Y,a.JL,a.sg,v.w9,a.JJ,a.u,d.KE,d.hX,a.wV,m.Nt,a.Fj,h.lW,o.O5,o.sg,g.A9,g.Yi,Z.SP,Z.uX],pipes:[b.S,o.Ts],styles:["input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.Bz.forChild(S)],i.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.ez,x,d.lN,a.UX,m.c,g.vV,Z.Nh,v.A0,h.ot]]}),e})()},33839:function(e,r,t){t.d(r,{S:function(){return i}});var o=t(37716);let i=(()=>{class e{transform(e,r=3){if(null==e||""===e)return"";const t=Number(e);return isNaN(t)?"":t.toFixed(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=o.Yjl({name:"noCommaNumber",type:e,pure:!0}),e})()},57916:function(e,r,t){t.d(r,{b:function(){return u}});var o=t(5304),i=t(68307),n=t(37716),a=t(5620),s=t(91841),l=t(84889);let u=(()=>{class e{constructor(e,r,t){this.commonService=e,this.http=r,this.errorService=t}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}addTopUpGold(e,r){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+r,{}).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(e=>{}))}}return e.\u0275fac=function(r){return new(r||e)(n.LFG(a.v),n.LFG(s.eN),n.LFG(l.T))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);