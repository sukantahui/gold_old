"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[1358],{61358:function(e,r,t){t.r(r),t.d(r,{GpTransactionModule:function(){return y}});var n=t(72458),o=t(38583),a=t(63423),i=t(92340),s=t(3679),c=t(37716),p=t(57916),u=t(98295),l=t(49983),m=t(43220),g=t(67441),v=t(51095),h=t(42542),d=t(65939);function T(e,r){if(1&e&&(c.TgZ(0,"mat-option",17),c._uU(1),c.qZA()),2&e){const e=r.$implicit;c.Q6J("value",e.id),c.xp6(1),c.hij(" ",e.name," ")}}function f(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Transaction type is required. "),c.qZA())}function Z(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Must be a valid transaction type. "),c.qZA())}function b(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," GP value is required. "),c.qZA())}function A(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Must be at least 0.001. "),c.qZA())}function _(e,r){if(1&e){const e=c.EpF();c.TgZ(0,"mat-button-toggle-group",18),c.TgZ(1,"mat-button-toggle",19),c.NdJ("click",function(){return c.CHM(e),c.oxw().showDeveloperDiv=!0}),c._uU(2,"Show"),c.qZA(),c.TgZ(3,"mat-button-toggle",19),c.NdJ("click",function(){return c.CHM(e),c.oxw().showDeveloperDiv=!1}),c._uU(4,"Hide"),c.qZA(),c.qZA()}}function S(e,r){if(1&e&&(c.TgZ(0,"div",20),c.TgZ(1,"div",21),c.TgZ(2,"h2"),c._uU(3,"Developer Area"),c.qZA(),c.TgZ(4,"mat-tab-group",22),c.TgZ(5,"mat-tab",23),c.TgZ(6,"pre"),c._uU(7),c.ALo(8,"json"),c.qZA(),c.qZA(),c.TgZ(9,"mat-tab",24),c.TgZ(10,"pre"),c._uU(11,"\n                "),c.qZA(),c.qZA(),c.TgZ(12,"mat-tab",25),c.TgZ(13,"pre"),c._uU(14,"\n                "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(7),c.hij("                    transanctionForm = ",c.lcZ(8,1,e.gpTransactionForm.value),"\n                ")}}const F=[{path:"",component:(()=>{class e{constructor(e){this.managerService=e,this.isProduction=i.N.production,this.showDeveloperDiv=!1,this.transactionTypes=[{id:2,name:"Purchased"},{id:3,name:"Brought from owner, \u09ae\u09be\u09b2\u09bf\u0995 \u09a6\u09bf\u09df\u09c7\u099b\u09c7"},{id:4,name:"Used \u0995\u09be\u099c\u09c7 \u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7"},{id:5,name:"Destroyed \u09a8\u09b7\u09cd\u099f \u09b9\u09df\u09c7 \u0997\u09c7\u099b\u09c7"},{id:6,name:"Returned to owner \u09ae\u09be\u09b2\u09bf\u0995 \u0995\u09c7 \u09ab\u09c7\u09b0\u09a4 \u09a6\u09c7\u0993\u09df\u09be \u09b9\u09df\u09c7\u099b\u09c7"}],this.gpTransactionForm=new s.cw({transaction_date:new s.NI(new Date,[s.kI.required,this.dateNotInFutureValidator]),gp_transaction_type_id:new s.NI(null,[s.kI.required,s.kI.pattern("^[1-6]$")]),gp_value:new s.NI(null,[s.kI.required,s.kI.min(.001)])})}dateNotInFutureValidator(e){const r=new Date(e.value),t=new Date;return r.setHours(0,0,0,0),t.setHours(0,0,0,0),r<=t?null:{dateInFuture:!0}}ngOnInit(){}onSubmit(){if(this.gpTransactionForm.invalid)return;const e=new Date(this.gpTransactionForm.value.transaction_date),r={comment:"Save",transaction_date:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,gp_transaction_type_id:this.gpTransactionForm.value.gp_transaction_type_id,gp_value:this.gpTransactionForm.value.gp_value};console.log(r),this.managerService.saveGpTransactions(r).subscribe({next:e=>{console.log("Transaction saved successfully",e),alert("Transaction saved successfully!"),this.gpTransactionForm.reset(),this.gpTransactionForm.patchValue({transaction_date:new Date})},error:e=>{console.error("Error saving transaction:",e),alert("Failed to save transaction. Please try again.")}})}}return e.\u0275fac=function(r){return new(r||e)(c.Y36(p.b))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-gp-transaction"]],decls:32,vars:11,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[1,"mat-elevation-z2","p-4","bg-white","rounded",3,"formGroup","ngSubmit"],[1,"mat-headline","mb-4"],["appearance","fill"],["matInput","","formControlName","transaction_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["appearance","fill",1,"w-100","mb-3"],["formControlName","gp_transaction_type_id"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","formControlName","gp_value","placeholder","Enter GP value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"p-2","col-8","d-flex"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[3,"value"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,r){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3,"GP Transaction"),c.qZA(),c.TgZ(4,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(5,"h2",3),c._uU(6,"GP Transaction Form"),c.qZA(),c.TgZ(7,"mat-form-field",4),c.TgZ(8,"mat-label"),c._uU(9,"Transaction Date"),c.qZA(),c._UZ(10,"input",5),c._UZ(11,"mat-datepicker-toggle",6),c._UZ(12,"mat-datepicker",null,7),c.qZA(),c.TgZ(14,"mat-form-field",8),c.TgZ(15,"mat-label"),c._uU(16,"Transaction Type"),c.qZA(),c.TgZ(17,"mat-select",9),c.YNc(18,T,2,2,"mat-option",10),c.qZA(),c.YNc(19,f,2,0,"mat-error",11),c.YNc(20,Z,2,0,"mat-error",11),c.qZA(),c.TgZ(21,"mat-form-field",8),c.TgZ(22,"mat-label"),c._uU(23,"GP Value"),c.qZA(),c._UZ(24,"input",12),c.YNc(25,b,2,0,"mat-error",11),c.YNc(26,A,2,0,"mat-error",11),c.qZA(),c.TgZ(27,"button",13),c._uU(28," Submit "),c.qZA(),c.qZA(),c.qZA(),c._UZ(29,"div",14),c.qZA(),c.YNc(30,_,5,0,"mat-button-toggle-group",15),c.YNc(31,S,15,3,"div",16)),2&e){const e=c.MAs(13);let t,n,o,a;c.xp6(4),c.Q6J("formGroup",r.gpTransactionForm),c.xp6(6),c.Q6J("matDatepicker",e),c.xp6(1),c.Q6J("for",e),c.xp6(7),c.Q6J("ngForOf",r.transactionTypes),c.xp6(1),c.Q6J("ngIf",null==(t=r.gpTransactionForm.get("gp_transaction_type_id"))?null:t.hasError("required")),c.xp6(1),c.Q6J("ngIf",null==(n=r.gpTransactionForm.get("gp_transaction_type_id"))?null:n.hasError("pattern")),c.xp6(5),c.Q6J("ngIf",null==(o=r.gpTransactionForm.get("gp_value"))?null:o.hasError("required")),c.xp6(1),c.Q6J("ngIf",null==(a=r.gpTransactionForm.get("gp_value"))?null:a.hasError("min")),c.xp6(1),c.Q6J("disabled",r.gpTransactionForm.invalid),c.xp6(3),c.Q6J("ngIf",!r.isProduction),c.xp6(1),c.Q6J("ngIf",r.showDeveloperDiv&&!r.isProduction)}},directives:[s._Y,s.JL,s.sg,u.KE,u.hX,l.Nt,s.Fj,m.hl,s.JJ,s.u,m.nW,u.R9,m.Mq,g.gD,o.sg,o.O5,s.wV,v.lW,n.ey,u.TO,h.A9,h.Yi,d.SP,d.uX],pipes:[o.Ts],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.Bz.forChild(F)],a.Bz]}),e})();var q=t(86640);let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[{provide:n.Ad,useValue:"en-GB"}],imports:[[o.ez,w,d.Nh,u.lN,s.UX,l.c,h.vV,q.A0,v.ot,m.FA,g.LD,n.XK]]}),e})()},57916:function(e,r,t){t.d(r,{b:function(){return p}});var n=t(5304),o=t(68307),a=t(37716),i=t(5620),s=t(91841),c=t(84889);let p=(()=>{class e{constructor(e,r,t){this.commonService=e,this.http=r,this.errorService=t}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}addTopUpGold(e,r){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+r,{}).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(i.v),a.LFG(s.eN),a.LFG(c.T))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);