"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8063],{8063:function(e,r,t){t.r(r),t.d(r,{MaterialToManagerModule:function(){return k}});var n=t(38583),o=t(63423),a=t(92340),i=t(88259),l=t.n(i),s=t(3679),c=t(37716),g=t(91841),u=t(57916),m=t(86640),p=t(98295),h=t(49983),d=t(51095),Z=t(42542),v=t(65939);function T(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Material is required "),c.qZA())}function f(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Quantity is required "),c.qZA())}function A(e,r){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Must be at least 0.001 "),c.qZA())}function b(e,r){1&e&&(c.TgZ(0,"span"),c._uU(1,"\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8\u09c7\u09b0 \u09aa\u09b0\u09c7"),c.qZA())}function w(e,r){1&e&&(c.TgZ(0,"span"),c._uU(1,"\u27a1"),c.qZA())}function q(e,r){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c.YNc(2,w,2,0,"span",4),c._uU(3),c.qZA(),c.TgZ(4,"td",22),c._uU(5),c.ALo(6,"number"),c.qZA(),c.qZA()),2&e){const e=r.$implicit,t=c.oxw(2);let n,o;c.ekj("highlight",e.rmId===(null==(n=t.ownerToMangerForm.get("rm_id"))?null:n.value)),c.xp6(2),c.Q6J("ngIf",e.rmId===(null==(o=t.ownerToMangerForm.get("rm_id"))?null:o.value)),c.xp6(1),c.hij(" ",e.rawMaterialName," "),c.xp6(2),c.Oqu(c.xi3(6,5,e.closingBalance,"1.3-3"))}}function M(e,r){if(1&e&&(c.TgZ(0,"div",17),c.TgZ(1,"table",18),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th",19),c._uU(5,"Manager Balance "),c.YNc(6,b,2,0,"span",4),c.qZA(),c.qZA(),c.TgZ(7,"tr"),c.TgZ(8,"th",20),c._uU(9,"Material Name"),c.qZA(),c.TgZ(10,"th",20),c._uU(11,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"tbody"),c.YNc(13,q,7,8,"tr",21),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngIf",e.savedResponse),c.xp6(7),c.Q6J("ngForOf",e.managerMaterialBalanceUpdated)}}function x(e,r){1&e&&(c.TgZ(0,"span"),c._uU(1,"\u098f\u0996\u09a8\u0995\u09be\u09b0"),c.qZA())}function _(e,r){1&e&&(c.TgZ(0,"span"),c._uU(1,"\u0986\u0997\u09c7\u09b0"),c.qZA())}function F(e,r){1&e&&(c.TgZ(0,"span"),c._uU(1,"\u27a1"),c.qZA())}function I(e,r){if(1&e){const e=c.EpF();c.TgZ(0,"tr",26),c.NdJ("click",function(){c.CHM(e);const r=c.oxw().$implicit;return c.oxw(2).selectMaterial(r)}),c.TgZ(1,"td"),c.YNc(2,F,2,0,"span",4),c._uU(3),c.qZA(),c.TgZ(4,"td",22),c._uU(5),c.ALo(6,"number"),c.qZA(),c.qZA()}if(2&e){const e=c.oxw().$implicit,r=c.oxw(2);let t,n;c.ekj("highlight",e.rmId===(null==(t=r.ownerToMangerForm.get("rm_id"))?null:t.value)),c.xp6(2),c.Q6J("ngIf",e.rmId===(null==(n=r.ownerToMangerForm.get("rm_id"))?null:n.value)),c.xp6(1),c.hij(" ",e.rawMaterialName," "),c.xp6(2),c.Oqu(c.xi3(6,5,e.closingBalance,"1.3-3"))}}function S(e,r){if(1&e&&(c.ynx(0),c.YNc(1,I,7,8,"tr",25),c.BQk()),2&e){const e=r.$implicit,t=c.oxw(2);let n;c.xp6(1),c.Q6J("ngIf",0!==e.closingBalance||e.rmId===(null==(n=t.ownerToMangerForm.get("rm_id"))?null:n.value))}}function N(e,r){if(1&e&&(c.TgZ(0,"div",17),c.TgZ(1,"table",23),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th",19),c._uU(5,"Manager Balance "),c.YNc(6,x,2,0,"span",4),c.YNc(7,_,2,0,"span",4),c.qZA(),c.qZA(),c.TgZ(8,"tr"),c.TgZ(9,"th",20),c._uU(10,"Material Name"),c.qZA(),c.TgZ(11,"th",20),c._uU(12,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,S,2,1,"ng-container",24),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngIf",!e.savedResponse),c.xp6(1),c.Q6J("ngIf",e.savedResponse),c.xp6(7),c.Q6J("ngForOf",e.managerMaterialBalance)}}function U(e,r){if(1&e){const e=c.EpF();c.TgZ(0,"mat-button-toggle-group",27),c.TgZ(1,"mat-button-toggle",26),c.NdJ("click",function(){return c.CHM(e),c.oxw().showDeveloperDiv=!0}),c._uU(2,"Show"),c.qZA(),c.TgZ(3,"mat-button-toggle",26),c.NdJ("click",function(){return c.CHM(e),c.oxw().showDeveloperDiv=!1}),c._uU(4,"Hide"),c.qZA(),c.qZA()}}function B(e,r){if(1&e&&(c.TgZ(0,"div",28),c.TgZ(1,"div",29),c.TgZ(2,"h2"),c._uU(3,"Developer Area"),c.qZA(),c.TgZ(4,"mat-tab-group",30),c.TgZ(5,"mat-tab",31),c.TgZ(6,"pre"),c._uU(7),c.ALo(8,"json"),c.qZA(),c.qZA(),c.TgZ(9,"mat-tab",32),c.TgZ(10,"pre"),c._uU(11),c.ALo(12,"json"),c.qZA(),c.qZA(),c.TgZ(13,"mat-tab",33),c.TgZ(14,"pre"),c._uU(15,"\n                "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(7),c.hij("                    updatedMaterialBalance = ",c.lcZ(8,2,e.managerMaterialBalance),"\n                "),c.xp6(4),c.hij("                    ownerToMangerForm=",c.lcZ(12,4,e.ownerToMangerForm.value),"\n                ")}}const J=[{path:"",component:(()=>{class e{constructor(e,r,t){this.route=e,this.http=r,this.managerService=t,this.isProduction=a.N.production,this.showDeveloperDiv=!0,this.route.data.subscribe(e=>{this.materials=e.materialResolver.rawMaterials.data,this.managerMaterialBalance=e.materialResolver.managerMaterialBalance.data}),this.ownerToMangerForm=new s.cw({rm_id:new s.NI(null,[s.kI.required]),value:new s.NI({value:0,disabled:!1},[s.kI.required,s.kI.min(.001)])})}ngOnInit(){}resetForm(){this.ownerToMangerForm.reset({rm_id:null,value:{value:0,disabled:!1}}),this.ownerToMangerForm.enable(),this.managerMaterialBalance=this.managerMaterialBalanceUpdated,this.savedResponse=null}saveTransfer(){l().fire({title:"From owner to Manager",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Transfer",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{if(e.value){if(this.ownerToMangerForm.invalid)return void this.ownerToMangerForm.markAllAsTouched();this.managerService.saveMaterialFromOwnerToManager(this.ownerToMangerForm.value).subscribe(e=>{!0===e.status&&(l().fire({timer:2e3,title:"Saved",text:"Transferred successfully to Manager",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.savedResponse=e,this.managerMaterialBalanceUpdated=e.data.manager_all_material_balance,this.ownerToMangerForm.disable())},e=>{l().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})}})}selectMaterial(e){this.ownerToMangerForm.patchValue({rm_id:e.rmId})}}return e.\u0275fac=function(r){return new(r||e)(c.Y36(o.gz),c.Y36(g.eN),c.Y36(u.b))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-material-to-manager"]],decls:32,vars:10,consts:[[1,"d-flex","flex-row","gradient-bg",2,"min-height","80vh"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"custom",3,"items"],[4,"ngIf"],[1,"example-full-width"],["type","number","min","0.001","step","1.000","matInput","","formControlName","value","placeholder","Material",1,"text-right"],["silverValue",""],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"click"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[1,"p-2","col-8","d-flex"],["class","p-2 col-6",4,"ngIf"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"p-2","col-6"],[1,"table","table-success","table-striped","col-xl-12","col-lg-12","col-xs-12"],["colspan","2"],["scope","col"],[3,"highlight",4,"ngFor","ngForOf"],[1,"text-right"],[1,"table","table-striped","col-xl-12","col-lg-12","col-xs-12"],[4,"ngFor","ngForOf"],[3,"highlight","click",4,"ngIf"],[3,"click"],["name","fontStyle","aria-label","Font Style"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,r){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h2"),c._uU(3,"Sending from Owner to Manager"),c.qZA(),c.TgZ(4,"h5"),c._uU(5,"\u09b6\u09c1\u09a7\u09c1\u09ae\u09be\u09a4\u09cd\u09b0 \u09ae\u09be\u09b2\u09bf\u0995 \u09ae\u09cd\u09af\u09be\u09a8\u09c7\u099c\u09be\u09b0\u0995\u09c7 \u09af\u09c7 \u0995\u09cb\u09a8 \u09ae\u09c7\u099f\u09be\u09b2 \u09a6\u09c7\u0993\u09df\u09be\u09b0 \u099c\u09be\u09df\u0997\u09be"),c.qZA(),c._UZ(6,"hr"),c.TgZ(7,"form",2),c._UZ(8,"ng-select",3),c.YNc(9,T,2,0,"mat-error",4),c.TgZ(10,"div"),c.TgZ(11,"mat-form-field",5),c.TgZ(12,"mat-label"),c._uU(13,"Enter Quantity"),c.qZA(),c._UZ(14,"input",6,7),c.qZA(),c.YNc(16,f,2,0,"mat-error",4),c.YNc(17,A,2,0,"mat-error",4),c.qZA(),c.TgZ(18,"div",8),c.TgZ(19,"div",9),c.TgZ(20,"div",10),c.TgZ(21,"button",11),c.NdJ("click",function(){return r.resetForm()}),c._uU(22,"Reset"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",9),c.TgZ(24,"div",10),c.TgZ(25,"button",12),c.NdJ("click",function(){return r.saveTransfer()}),c._uU(26,"Save Record"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"div",13),c.YNc(28,M,14,2,"div",14),c.YNc(29,N,15,3,"div",14),c.qZA(),c.qZA(),c.YNc(30,U,5,0,"mat-button-toggle-group",15),c.YNc(31,B,16,6,"div",16)),2&e){let e,t,n;c.xp6(7),c.Q6J("formGroup",r.ownerToMangerForm),c.xp6(1),c.Q6J("items",r.materials),c.xp6(1),c.Q6J("ngIf",null==(e=r.ownerToMangerForm.get("rm_id"))?null:e.hasError("required")),c.xp6(7),c.Q6J("ngIf",null==(t=r.ownerToMangerForm.get("value"))?null:t.hasError("required")),c.xp6(1),c.Q6J("ngIf",null==(n=r.ownerToMangerForm.get("value"))?null:n.hasError("min")),c.xp6(8),c.Q6J("disabled",!r.ownerToMangerForm.valid||r.ownerToMangerForm.pristine),c.xp6(3),c.Q6J("ngIf",r.savedResponse),c.xp6(1),c.Q6J("ngIf",r.managerMaterialBalance),c.xp6(1),c.Q6J("ngIf",!r.isProduction),c.xp6(1),c.Q6J("ngIf",r.showDeveloperDiv&&!r.isProduction)}},directives:[s._Y,s.JL,s.sg,m.w9,s.JJ,s.u,n.O5,p.KE,p.hX,s.qQ,s.wV,h.Nt,s.Fj,d.lW,p.TO,n.sg,Z.A9,Z.Yi,v.SP,v.uX],pipes:[n.JJ,n.Ts],styles:[".highlight[_ngcontent-%COMP%]{background-color:#e4e5d7!important}.highlight[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#cf0f2a!important}.gradient-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9f9f9 0%,#fdedd0 100%)}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(J)],o.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,y,v.Nh,Z.vV,s.UX,m.A0,p.lN,h.c,d.ot]]}),e})()},57916:function(e,r,t){t.d(r,{b:function(){return c}});var n=t(5304),o=t(68307),a=t(37716),i=t(5620),l=t(91841),s=t(84889);let c=(()=>{class e{constructor(e,r,t){this.commonService=e,this.http=r,this.errorService=t}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}addTopUpGold(e,r){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+r,{}).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,n.K)(this.errorService.serverError),(0,o.b)(e=>{}))}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(i.v),a.LFG(l.eN),a.LFG(s.T))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);