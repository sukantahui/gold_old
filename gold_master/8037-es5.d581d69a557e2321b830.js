!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?r:String(r)),i)}var o,r}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8037],{38037:function(t,i,o){o.r(i),o.d(i,{AgentWiseCustomerReportModule:function(){return D}});var r=o(38583),c=o(63423),u=o(92340),a=o(37716),s=o(37825),d=o(52541),l=o(5620),g=o(35618),Z=o(93738),p=o(51095),m=o(95913),f=o(76627),A=o(26584),_=o(33013);function x(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",21),a.NdJ("click",function(){a.CHM(n);var e=a.oxw(),t=e.$implicit,i=e.index;return a.oxw(2).agentSelected(t,i)}),a._uU(1),a.qZA()}if(2&e){var i=a.oxw().$implicit;a.xp6(1),a.hij(" ",i.agent_name," ")}}function q(e,t){if(1&e&&(a.TgZ(0,"span",22),a._uU(1),a.TgZ(2,"mat-icon"),a._uU(3,"done_outline"),a.qZA(),a.qZA()),2&e){var n=a.oxw().$implicit;a.xp6(1),a.hij(" ",n.agent_name,"")}}function T(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a.YNc(6,x,2,1,"a",19),a.YNc(7,q,4,1,"span",20),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td",18),a._uU(11),a.ALo(12,"number"),a.qZA(),a.TgZ(13,"td",18),a._uU(14),a.qZA(),a.qZA()),2&e){var n=t.$implicit,i=t.index,o=a.oxw(2);a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(n.agent_id),a.xp6(2),a.Q6J("ngIf",o.selectedAgentIndex!=i),a.xp6(1),a.Q6J("ngIf",o.selectedAgentIndex==i),a.xp6(2),a.Oqu(n.agent_phone),a.xp6(2),a.Oqu(a.xi3(12,7,n.gold_due,"1.3")),a.xp6(3),a.Oqu(n.lc_due)}}function h(e,t){if(1&e&&(a.TgZ(0,"div",14),a.TgZ(1,"h3"),a._uU(2,"Agent List"),a.qZA(),a.TgZ(3,"table",15),a.TgZ(4,"thead"),a.TgZ(5,"tr"),a.TgZ(6,"th"),a._uU(7,"SL"),a.qZA(),a.TgZ(8,"th"),a._uU(9,"Agent ID"),a.qZA(),a.TgZ(10,"th"),a._uU(11,"Agent Name"),a.qZA(),a.TgZ(12,"th"),a._uU(13,"Phone"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"Gold"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"LC"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"tbody"),a.YNc(19,T,15,10,"tr",16),a.qZA(),a.TgZ(20,"tfoot"),a.TgZ(21,"tr"),a.TgZ(22,"td",17),a._uU(23,"All Agents"),a.qZA(),a.TgZ(24,"td",18),a._uU(25),a.ALo(26,"number"),a.qZA(),a.TgZ(27,"td",18),a._uU(28),a.qZA(),a.qZA(),a._UZ(29,"tfoot"),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw();a.xp6(19),a.Q6J("ngForOf",n.agents),a.xp6(6),a.Oqu(a.xi3(26,3,n.agentDues.gold,"1.3")),a.xp6(3),a.Oqu(n.agentDues.lc)}}function v(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td",18),a._uU(10),a.qZA(),a.TgZ(11,"td",18),a._uU(12),a.ALo(13,"number"),a.qZA(),a.TgZ(14,"td",18),a._uU(15),a.qZA(),a.TgZ(16,"td",18),a._uU(17),a.ALo(18,"number"),a.qZA(),a.TgZ(19,"td",18),a._uU(20),a.qZA(),a.qZA()),2&e){var n=t.$implicit,i=t.index;a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(n.tr_date),a.xp6(2),a.Oqu(n.particulars),a.xp6(2),a.Oqu(n.reference),a.xp6(2),a.Oqu(n.billed_qty),a.xp6(2),a.Oqu(a.xi3(13,9,n.op_gold_due+n.billed_gold+n.received_gold,"1.3")),a.xp6(3),a.Oqu(n.op_lc_due+n.billed_lc+n.received_lc),a.xp6(2),a.Oqu(a.xi3(18,12,n.current_gold_due,"1.3")),a.xp6(3),a.Oqu(n.current_lc_due)}}function b(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"mat-card",23),a.TgZ(1,"mat-card-content"),a.TgZ(2,"button",24),a.TgZ(3,"mat-icon"),a._uU(4,"print"),a.qZA(),a.qZA(),a.TgZ(5,"button",5),a.NdJ("click",function(){a.CHM(n);var e=a.oxw();return e.showCustomerReceiptPayment=!1,e.selectedCustomerIndex=-1}),a.TgZ(6,"mat-icon"),a._uU(7,"delete_forever"),a.qZA(),a.qZA(),a.TgZ(8,"div",25),a.TgZ(9,"h3"),a._uU(10),a.qZA(),a.TgZ(11,"table",26),a.TgZ(12,"thead"),a.TgZ(13,"tr"),a.TgZ(14,"th"),a._uU(15,"SL"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"Date"),a.qZA(),a.TgZ(18,"th"),a._uU(19,"Particulars"),a.qZA(),a.TgZ(20,"th"),a._uU(21,"Reference"),a.qZA(),a.TgZ(22,"th"),a._uU(23,"Qty"),a.qZA(),a.TgZ(24,"th"),a._uU(25,"Gold"),a.qZA(),a.TgZ(26,"th"),a._uU(27,"LC"),a.qZA(),a.TgZ(28,"th"),a._uU(29,"Gold Balance"),a.qZA(),a.TgZ(30,"th"),a._uU(31,"LC Balance"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"tbody"),a.YNc(33,v,21,15,"tr",16),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var i=a.oxw();a.xp6(2),a.Q6J("useExistingCss",!0),a.xp6(8),a.hij("Receipt and Payment of ",i.selectedCustomer.cust_name,""),a.xp6(23),a.Q6J("ngForOf",i.customerReceiptPayment)}}function y(e,t){if(1&e&&(a.TgZ(0,"h3"),a._uU(1),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.hij("Customers of ",n.selectedAgent.agent_name,"")}}function U(e,t){1&e&&(a.TgZ(0,"h3"),a._uU(1,"All Customers"),a.qZA())}function w(e,t){1&e&&(a.TgZ(0,"h3"),a._uU(1,"\u098f\u0987 \u098f\u099c\u09c7\u09a8\u09cd\u099f\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u0995\u09cb\u09a8 \u09b0\u0995\u09ae \u0995\u09be\u09b8\u09cd\u099f\u09cb\u09ae\u09be\u09b0 \u09a8\u09bf\u09b0\u09cd\u09a7\u09be\u09b0\u09a3 \u0995\u09b0\u09be \u09b9\u09df \u09a8\u09bf"),a.qZA())}function C(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",32),a.TgZ(1,"div",33),a._UZ(2,"i",34),a.TgZ(3,"input",35),a.NdJ("input",function(e){return a.CHM(n),a.oxw(),a.MAs(1).filterGlobal(e.target.value,"contains")}),a.qZA(),a.qZA(),a.qZA()}}function I(e,t){1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"th"),a._uU(2,"SL"),a.qZA(),a.TgZ(3,"th",36),a._uU(4,"Customer Id "),a._UZ(5,"p-sortIcon",37),a.qZA(),a.TgZ(6,"th",38),a._uU(7,"Customer"),a._UZ(8,"p-sortIcon",39),a.qZA(),a.TgZ(9,"th",40),a._uU(10,"City"),a._UZ(11,"p-sortIcon",41),a.qZA(),a.TgZ(12,"th",42),a._uU(13,"Gold"),a._UZ(14,"p-sortIcon",43),a.qZA(),a.TgZ(15,"th",44),a._uU(16,"LC"),a._UZ(17,"p-sortIcon",45),a.qZA(),a.qZA())}function P(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",21),a.NdJ("click",function(){a.CHM(n);var e=a.oxw(),t=e.$implicit,i=e.rowIndex;return a.oxw(2).customerSelected(t,i)}),a._uU(1),a.qZA()}if(2&e){var i=a.oxw().$implicit;a.xp6(1),a.hij(" ",i.cust_name," ")}}function O(e,t){if(1&e&&(a.TgZ(0,"span",22),a._uU(1),a.TgZ(2,"mat-icon"),a._uU(3,"done_outline"),a.qZA(),a.qZA()),2&e){var n=a.oxw().$implicit;a.xp6(1),a.hij(" ",n.cust_name,"")}}function S(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td",46),a._uU(4),a.qZA(),a.TgZ(5,"td",46),a.YNc(6,P,2,1,"a",19),a.YNc(7,O,4,1,"span",20),a.qZA(),a.TgZ(8,"td",47),a._uU(9),a.qZA(),a.TgZ(10,"td",18),a._uU(11),a.ALo(12,"number"),a.qZA(),a.TgZ(13,"td",18),a._uU(14),a.qZA(),a.qZA()),2&e){var n=t.$implicit,i=t.rowIndex,o=a.oxw(2);a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(n.cust_id),a.xp6(2),a.Q6J("ngIf",o.selectedCustomerIndex!=i),a.xp6(1),a.Q6J("ngIf",o.selectedCustomerIndex==i),a.xp6(2),a.Oqu(n.city),a.xp6(2),a.Oqu(a.xi3(12,7,n.gold_due,"1.3")),a.xp6(3),a.Oqu(n.lc_due)}}var k=function(){return[200,300,500]},J=function(){return["cust_id","cust_name","city","gold_due","lc_due"]};function N(e,t){if(1&e&&(a.TgZ(0,"p-table",27,28),a.YNc(2,C,4,0,"ng-template",29),a.YNc(3,I,18,0,"ng-template",30),a.YNc(4,S,15,10,"ng-template",31),a.qZA()),2&e){var n=a.oxw();a.Q6J("value",n.customers)("rows",1e4)("showCurrentPageReport",!0)("rowsPerPageOptions",a.DdM(7,k))("paginator",!0)("globalFilterFields",a.DdM(8,J))("responsive",!0)}}function L(e,t){if(1&e&&(a.TgZ(0,"div",48),a.TgZ(1,"div",49),a.TgZ(2,"div",50),a.TgZ(3,"div",51),a.TgZ(4,"pre"),a._uU(5),a.ALo(6,"json"),a.qZA(),a.qZA(),a._UZ(7,"div",52),a.TgZ(8,"div",51),a._uU(9,"3"),a.qZA(),a.TgZ(10,"div",51),a._uU(11,"4"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw();a.xp6(5),a.hij("                    selectedAgentIndex = ",a.lcZ(6,1,n.selectedAgentIndex),"\n                ")}}var R,Q=[{path:"",component:(R=function(){function t(n,i,o){e(this,t),this.agentService=n,this.customerService=i,this.commonService=o,this.isProduction=u.N.production,this.selectedAgentIndex=-2,this.selectedCustomerIndex=-1,this.showCustomerReceiptPayment=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.agentService.getAgentsWithDues().subscribe(function(t){e.agents=t.data;var n=e.agents.reduce(function(e,t){return e+t.lc_due},0),i=e.agents.reduce(function(e,t){return e+t.gold_due},0);e.agentDues={gold:i,lc:n}}),this.customerService.getCustomersWithBalance().subscribe(function(t){e.customers=t.data,e.showCustomerReceiptPayment=!0})}},{key:"agentSelected",value:function(e,t){var n=this;this.selectedAgentIndex=t,this.selectedAgent=e,this.selectedCustomerIndex=-1,this.agentService.getCustomersWithDuesByAgent(e.agent_id).subscribe(function(e){n.customers=e.data,n.showCustomerReceiptPayment=!0,n.customerReceiptPayment=null})}},{key:"customerSelected",value:function(e,t){var n=this;this.agentService.getCustomerReceiptPayment(e.cust_id).subscribe(function(i){n.customerReceiptPayment=i.data,n.selectedCustomer=e,n.selectedCustomerIndex=t,n.showCustomerReceiptPayment=!0})}}]),t}(),R.\u0275fac=function(e){return new(e||R)(a.Y36(s.R),a.Y36(d.v),a.Y36(l.v))},R.\u0275cmp=a.Xpm({type:R,selectors:[["app-agent-wise-customer-report"]],decls:31,vars:9,consts:[["id","agent-wise-customer-report-div"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","40",1,"child-1"],["id","agent-card",1,"example-card"],["mat-button","","color","primary","printSectionId","agent-list-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["mat-button","","color","primary",3,"click"],["id","agent-list-table","class","table-responsive",4,"ngIf"],["fxFlex","60",1,"child-2"],["class","example-card","id","customer-receipt-payment-div",4,"ngIf"],[1,"example-card"],["mat-button","","color","primary","printSectionId","customer-list-table-new","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],[4,"ngIf"],["id","customer-list-table-new","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","responsive",4,"ngIf"],["id","developer-div",4,"ngIf"],["id","agent-list-table",1,"table-responsive"],["id","printable-agent-table",1,"table","table-bodered","table-condensed","ml-3"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"text-right"],["style","text-decoration: none;",3,"routerLink","click",4,"ngIf"],["style","color: red;",4,"ngIf"],[2,"text-decoration","none",3,"routerLink","click"],[2,"color","red"],["id","customer-receipt-payment-div",1,"example-card"],["mat-button","","color","primary","printSectionId","customer-receipt-payment-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["id","customer-receipt-payment-table",1,"table-responsive"],["id","printable-receipt-payment-table",1,"table","table-bodered","table-condensed"],["id","customer-list-table-new","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","responsive"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","justify-content-between"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"text-right",3,"input"],["pSortableColumn","cust_id"],["field","cust_id"],["pSortableColumn","cust_name"],["field","cust_name"],["pSortableColumn","city"],["field","city"],["pSortableColumn","gold_due"],["field","gold_due"],["pSortableColumn","lc_due"],["field","lc_due"],[1,"text-left"],[1,"text-leftt"],["id","developer-div"],[1,"outerContainer"],["fxLayout","row","fxLayoutGap","1px","fxLayout.sm","column",1,"container"],["fxLayoutAlign","center center"],["fxFlex","2 1 auto","fxLayoutAlign","center center"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"mat-card",3),a.TgZ(4,"mat-card-header"),a.TgZ(5,"mat-card-subtitle"),a.TgZ(6,"button",4),a.TgZ(7,"mat-icon"),a._uU(8,"print"),a.qZA(),a.qZA(),a.TgZ(9,"button",5),a.NdJ("click",function(){return t.commonService.exportToExcel("printable-agent-table","all_agents.xlsx",6)}),a.TgZ(10,"mat-icon"),a._uU(11,"cloud_download"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"mat-card-content"),a.YNc(13,h,30,6,"div",6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",7),a.YNc(15,b,34,3,"mat-card",8),a.TgZ(16,"mat-card",9),a.TgZ(17,"mat-card-header"),a.TgZ(18,"mat-card-subtitle"),a.TgZ(19,"button",10),a.TgZ(20,"mat-icon"),a._uU(21,"print"),a.qZA(),a.qZA(),a.TgZ(22,"button",5),a.NdJ("click",function(){return t.commonService.exportToExcel("customer-list-table-new","customers.xlsx",6)}),a.TgZ(23,"mat-icon"),a._uU(24,"cloud_download"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"mat-card-content"),a.YNc(26,y,2,1,"h3",11),a.YNc(27,U,2,0,"h3",11),a.YNc(28,w,2,0,"h3",11),a.YNc(29,N,5,9,"p-table",12),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(30,L,12,3,"div",13)),2&e&&(a.xp6(6),a.Q6J("useExistingCss",!0),a.xp6(7),a.Q6J("ngIf",t.agents),a.xp6(2),a.Q6J("ngIf",t.customerReceiptPayment&&t.showCustomerReceiptPayment),a.xp6(4),a.Q6J("useExistingCss",!0),a.xp6(7),a.Q6J("ngIf",t.selectedAgent),a.xp6(1),a.Q6J("ngIf",!t.selectedAgent),a.xp6(1),a.Q6J("ngIf",t.customers.length<=0),a.xp6(1),a.Q6J("ngIf",t.customers.length>0),a.xp6(1),a.Q6J("ngIf",!t.isProduction))},directives:[g.xw,g.yH,Z.a8,Z.dk,Z.$j,p.lW,m.I,f.Hw,Z.dn,r.O5,r.sg,c.yS,A.iA,_.jx,A.lQ,A.fz,g.SQ,g.Wh],pipes:[r.JJ,r.Ts],styles:["@media print{.noprint[_ngcontent-%COMP%]{visibility:hidden}}#working-job-report-div[_ngcontent-%COMP%]{min-height:100vh;width:100vw;padding-left:35px;padding-right:65px}#developer-div[_ngcontent-%COMP%]{padding-left:35px;padding-right:65px}#agent-card[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#f5e7d6,#f3f3c4)}#customer-receipt-payment-div[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#e9e7f8,#f3e3c7)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:unset}"]}),R)}],F=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[c.Bz.forChild(Q)],c.Bz]}),t}(),Y=o(86640),j=o(3679),M=o(49983),E=o(39577),$=o(80291),D=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.ez,F,Z.QW,Y.A0,g.ae,f.Ps,j.u5,j.UX,M.c,p.ot,E.uH,$.pm,m.K,A.U$]]}),t}()}}])}();