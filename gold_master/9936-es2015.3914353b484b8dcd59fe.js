"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[9936],{39936:function(e,t,o){o.r(t),o.d(t,{LabourChargeModule:function(){return y}});var i=o(38583),r=o(63423),c=o(92340),n=o(3679),s=o(88259),a=o.n(s),l=o(37716),u=o(52541),d=o(82820),p=o(30535),m=o(86640),g=o(82613),Z=o(98295),h=o(49983),_=o(51095),f=o(95913),b=o(76627),v=o(26584),q=o(33013);function A(e,t){if(1&e&&(l.TgZ(0,"div",27),l.TgZ(1,"span"),l._uU(2),l.qZA(),l._uU(3," and "),l.TgZ(4,"span"),l._uU(5),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.hij(" Gold Due: ",e.customerDues.gold_due,""),l.xp6(3),l.hij(" LC Due: ",e.customerDues.lc_due,"")}}function T(e,t){1&e&&(l.TgZ(0,"mat-form-field",28),l.TgZ(1,"mat-label"),l._uU(2,"Enter Cheque Details"),l.qZA(),l._UZ(3,"textarea",29),l.qZA())}function x(e,t){if(1&e&&(l.TgZ(0,"div",30),l._uU(1),l._UZ(2,"br"),l._uU(3),l._UZ(4,"br"),l._uU(5),l._UZ(6,"br"),l._uU(7),l._UZ(8,"br"),l._uU(9),l._UZ(10,"br"),l.TgZ(11,"table"),l.TgZ(12,"tbody"),l.TgZ(13,"tr",31),l.TgZ(14,"td"),l._uU(15,"Previous Dues: "),l.qZA(),l.TgZ(16,"td",32),l._uU(17),l.qZA(),l.qZA(),l.TgZ(18,"tr"),l.TgZ(19,"td"),l._uU(20,"Less: Now refund"),l.qZA(),l.TgZ(21,"td",32),l._uU(22),l.qZA(),l.qZA(),l.TgZ(23,"tr",33),l.TgZ(24,"td"),l._uU(25,"Current Due "),l.qZA(),l.TgZ(26,"td",32),l._uU(27),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(28,"br"),l._UZ(29,"br"),l._uU(30),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ID: ",e.afterSaveResponse.lc_receipt.lc_receipt_no,""),l.xp6(2),l.hij(" From ",e.afterSaveResponse.customer.mailing_name,""),l.xp6(2),l.hij(" of ",e.afterSaveResponse.customer.city,""),l.xp6(2),l.hij(" through ",e.afterSaveResponse.agent.agent_name,""),l.xp6(2),l.hij(" Received by ",e.afterSaveResponse.employee.emp_name,""),l.xp6(8),l.Oqu(e.afterSaveResponse.lc_due.lc_due_before),l.xp6(5),l.Oqu(e.afterSaveResponse.lc_receipt.amount),l.xp6(5),l.Oqu(e.afterSaveResponse.lc_due.lc_due_before-e.afterSaveResponse.lc_receipt.amount),l.xp6(3),l.hij(" Signature ",e.afterSaveResponse.user.displayName," ")}}function R(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th"),l._uU(2,"Date"),l.qZA(),l.TgZ(3,"th"),l._uU(4,"Receipt No."),l.qZA(),l.TgZ(5,"th"),l._uU(6,"Amount"),l.qZA(),l.qZA())}function U(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td",34),l.TgZ(4,"a",35),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().onLcReceiptSelected(t)}),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"td",34),l._uU(7),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.hij(" ",e.lc_receipt_date," "),l.xp6(3),l.Oqu(e.lc_receipt_no),l.xp6(2),l.hij(" ",e.amount," ")}}function S(e,t){if(1&e&&(l.TgZ(0,"div",36),l.TgZ(1,"div",0),l.TgZ(2,"div",37),l.TgZ(3,"pre"),l._uU(4),l.ALo(5,"json"),l.qZA(),l.qZA(),l.TgZ(6,"div",37),l.TgZ(7,"pre"),l._uU(8),l.ALo(9,"json"),l.qZA(),l.qZA(),l.TgZ(10,"div",37),l.TgZ(11,"pre"),l._uU(12),l.ALo(13,"json"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.hij("                LcReceiptForm.value=",l.lcZ(5,3,e.lcReceiptForm.value),"\n            "),l.xp6(4),l.hij("                customers= ",l.lcZ(9,5,e.customers),"\n            "),l.xp6(4),l.hij("                agents= ",l.lcZ(13,7,e.agents),"\n            ")}}const w=[{path:"",component:(()=>{class e{constructor(e,t,o,r){this.route=e,this.customerService=t,this.reportService=o,this.receiptService=r,this.afterSaveResponse=null,this.isProduction=c.N.production,this.showChequeDetails=!1,this.printDivStyle={table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},th:{border:"1px  solid black",fontSize:"small"},td:{border:"1px  solid black",fontSize:"small"}},this.route.data.subscribe(e=>{this.agents=e.customerReceiptResolver.agents.data,this.customers=e.customerReceiptResolver.customers.data});const s=new Date,a=(0,i.p6)(s,"yyyy-MM-dd","en");this.lcReceiptForm=new n.cw({lc_receipt_date:new n.NI(a),agent_id:new n.NI(null,[n.kI.required]),cust_id:new n.NI(null,[n.kI.required]),mode:new n.NI("1",[n.kI.required]),emp_id:new n.NI(72,[n.kI.required]),amount:new n.NI(null,[n.kI.required]),discount:new n.NI(0),cheque_details:new n.NI(null)})}ngOnInit(){this.onPaymentModeValueChanged()}agentSelected(){}onLcReceiptFormValueChange(){this.lcReceiptForm.valueChanges.subscribe(e=>{console.log("value changed",e)})}onPaymentModeValueChanged(){this.lcReceiptForm.get("mode").valueChanges.subscribe(e=>{this.showChequeDetails="2"===e})}onCustomerSelected(e){this.selectedCustomer=e.cust_id,this.afterSaveResponse=null,this.customerService.getCustomerDues(e.cust_id).subscribe(e=>{console.log("value changed",e.data),this.customerDues=e.data}),this.receiptService.getLcReceiptsByCustomer(this.selectedCustomer).subscribe(e=>{this.lcReceipts=e.data})}saveLcReceipt(){this.receiptService.saveLcReceipt(this.lcReceiptForm.value).subscribe(e=>{!0===e.status&&(a().fire({title:"Done",text:"LC Received added successfully",icon:"success"}),this.customerDues.lc_due=this.customerDues.lc_due-this.lcReceiptForm.value.amount,console.log(e.data),this.afterSaveResponse=e.data,this.lcReceiptForm.markAsPristine())},e=>{a().fire({title:"Done",text:"Error saving LC",icon:"error"})})}resetForm(){this.lcReceiptForm.reset(),this.customerDues=null}onLcReceiptSelected(e){console.log(e.lc_receipt_no),this.receiptService.getLcReceiptById(e.lc_receipt_no).subscribe(e=>{this.afterSaveResponse=e.data})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.gz),l.Y36(u.v),l.Y36(d.r),l.Y36(p.V))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-labour-charge"]],decls:40,vars:9,consts:[[1,"d-flex","flex-row"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","agent_name","bindValue","agent_id","formControlName","agent_id","placeholder","Select Agent",1,"custom",3,"items","change"],["bindLabel","cust_name","bindValue","cust_id","formControlName","cust_id","placeholder","Select Customer",1,"custom",3,"items","change"],["class","border-glow",4,"ngIf"],["aria-label","Select an option","formControlName","mode",1,"payment-mode"],["value","1"],["value","2"],[1,"col-12"],["class","example-full-width  col-12",4,"ngIf"],[1,"example-full-width"],["type","number","matInput","","formControlName","amount","placeholder","LC Amount",1,"text-right"],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"click"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[1,"p-2","col-8"],[2,"text-align","right"],["mat-button","","color","primary","styleSheetFile","assets/print_css/lc_receipt_print.css","printSectionId","lc-receipt-report","ngxPrint",""],["id","lc-receipt-report",4,"ngIf"],[3,"value"],["myTab",""],["pTemplate","header"],["pTemplate","body"],["id","developer-div",4,"ngIf"],[1,"border-glow"],[1,"example-full-width","col-12"],["matInput","","aria-placeholder","Cheque number and Bank","formControlName","cheque_details","placeholder","Cheque No. Bank Name"],["id","lc-receipt-report"],[2,"border-top","1px solid black"],["align","right"],[2,"border-top","1px solid black","border-bottom","1px double black"],[1,"text-right"],[3,"routerLink","click"],["id","developer-div"],[1,"p-2"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"form",2),l.TgZ(3,"ng-select",3),l.NdJ("change",function(){return t.agentSelected()}),l.qZA(),l.TgZ(4,"ng-select",4),l.NdJ("change",function(e){return t.onCustomerSelected(e)}),l.qZA(),l.YNc(5,A,6,2,"div",5),l.TgZ(6,"div"),l.TgZ(7,"mat-radio-group",6),l.TgZ(8,"mat-radio-button",7),l._uU(9,"Cash"),l.qZA(),l.TgZ(10,"mat-radio-button",8),l._uU(11,"Cheque"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",9),l.YNc(13,T,4,0,"mat-form-field",10),l.qZA(),l.TgZ(14,"div"),l.TgZ(15,"mat-form-field",11),l.TgZ(16,"mat-label"),l._uU(17,"Enter LC Received"),l.qZA(),l._UZ(18,"input",12),l.qZA(),l.qZA(),l.TgZ(19,"div",13),l.TgZ(20,"div",14),l.TgZ(21,"div",15),l.TgZ(22,"button",16),l.NdJ("click",function(){return t.resetForm()}),l._uU(23,"Reset"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",14),l.TgZ(25,"div",15),l.TgZ(26,"button",17),l.NdJ("click",function(){return t.saveLcReceipt()}),l._uU(27,"Save Record"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",18),l.TgZ(29,"div",19),l.TgZ(30,"button",20),l.TgZ(31,"mat-icon"),l._uU(32,"print"),l.qZA(),l.qZA(),l.qZA(),l.YNc(33,x,31,9,"div",21),l.TgZ(34,"div"),l.TgZ(35,"p-table",22,23),l.YNc(37,R,7,0,"ng-template",24),l.YNc(38,U,8,3,"ng-template",25),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(39,S,14,9,"div",26)),2&e&&(l.xp6(2),l.Q6J("formGroup",t.lcReceiptForm),l.xp6(1),l.Q6J("items",t.agents),l.xp6(1),l.Q6J("items",t.customers),l.xp6(1),l.Q6J("ngIf",t.customerDues),l.xp6(8),l.Q6J("ngIf",t.showChequeDetails),l.xp6(13),l.Q6J("disabled",!t.lcReceiptForm.valid||t.lcReceiptForm.pristine),l.xp6(7),l.Q6J("ngIf",t.afterSaveResponse),l.xp6(2),l.Q6J("value",t.lcReceipts),l.xp6(4),l.Q6J("ngIf",!t.isProduction&&!1))},directives:[n._Y,n.JL,n.sg,m.w9,n.JJ,n.u,i.O5,g.VQ,g.U0,Z.KE,Z.hX,n.wV,h.Nt,n.Fj,_.lW,f.I,b.Hw,v.iA,q.jx,r.yS],pipes:[i.Ts],styles:[".payment-mode[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.border-glow[_ngcontent-%COMP%]{padding:2px;border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540;border-radius:5px;margin-bottom:5px}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(w)],r.Bz]}),e})();var N=o(80291);let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,C,n.UX,m.A0,g.Fk,Z.lN,h.c,_.ot,b.Ps,N.pm,f.K,v.U$]]}),e})()}}]);