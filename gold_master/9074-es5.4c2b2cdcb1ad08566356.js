!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?i:String(i)),n)}var r,i}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[9074],{69074:function(t,n,r){r.r(n),r.d(n,{ReceivedRawMaterialFromEmployeeModule:function(){return I}});var i=r(38583),o=r(63423),l=r(92340),c=r(3679),u=r(88259),g=r.n(u),d=r(37716),s=r(91841),m=r(57916),Z=r(5620),p=r(82820),f=r(93738),v=r(86640),b=r(98295),A=r(49983),T=r(1769),q=r(42542),h=r(65939);function _(e,t){1&e&&(d.TgZ(0,"mat-error"),d._uU(1," Value is required "),d.qZA())}function M(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",11),d._uU(4),d.ALo(5,"number"),d.qZA(),d.qZA()),2&e){var a=t.$implicit;d.xp6(2),d.Oqu(a.rawMaterialName),d.xp6(2),d.hij("",d.xi3(5,2,a.closingBalance,"1.3-3")," gm")}}function x(e,t){if(1&e&&(d.TgZ(0,"div",15),d.TgZ(1,"mat-card",3),d.TgZ(2,"mat-card-title"),d._uU(3,"Sender Material Balance (Updated)"),d.qZA(),d.TgZ(4,"table",16),d.TgZ(5,"thead",17),d.TgZ(6,"tr"),d.TgZ(7,"th"),d._uU(8,"Material Name"),d.qZA(),d.TgZ(9,"th",11),d._uU(10,"Value"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"tbody"),d.YNc(12,M,6,5,"tr",21),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw(2);d.xp6(12),d.Q6J("ngForOf",a.savedResponse.data.sender_material_balance)}}function w(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",11),d._uU(4),d.ALo(5,"number"),d.qZA(),d.qZA()),2&e){var a=t.$implicit;d.xp6(2),d.Oqu(a.rawMaterialName),d.xp6(2),d.hij("",d.xi3(5,2,a.closingBalance,"1.3-3")," gm")}}function y(e,t){if(1&e&&(d.TgZ(0,"div"),d._UZ(1,"mat-divider",14),d.TgZ(2,"h3",4),d._uU(3,"Balance after Transaction"),d.qZA(),d.TgZ(4,"div",1),d.YNc(5,x,13,1,"div",19),d.TgZ(6,"div",15),d.TgZ(7,"mat-card",3),d.TgZ(8,"mat-card-title"),d._uU(9,"Your Material Balance (Updated)"),d.qZA(),d.TgZ(10,"table",16),d.TgZ(11,"thead",17),d.TgZ(12,"tr"),d.TgZ(13,"th"),d._uU(14,"Material Name"),d.qZA(),d.TgZ(15,"th",11),d._uU(16,"Value"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"tbody"),d.YNc(18,w,6,5,"tr",21),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw();d.xp6(5),d.Q6J("ngIf",null==a.savedResponse.data.sender_material_balance?null:a.savedResponse.data.sender_material_balance.length),d.xp6(13),d.Q6J("ngForOf",a.savedResponse.data.receiver_material_balance)}}var C=function(e){return{"table-active":e}};function O(e,t){if(1&e&&(d.TgZ(0,"tr",22),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",11),d._uU(4),d.ALo(5,"number"),d.qZA(),d.qZA()),2&e){var a,n=t.$implicit,r=d.oxw();d.Q6J("ngClass",d.VKq(6,C,n.rawMaterial.rm_ID==(null==(a=r.materialRecivingForm.get("rm_id"))?null:a.value))),d.xp6(2),d.Oqu(n.rawMaterialName),d.xp6(2),d.hij("",d.xi3(5,3,n.closingBalance,"1.3-3")," gm")}}function U(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",11),d._uU(4),d.ALo(5,"number"),d.qZA(),d.qZA()),2&e){var a=t.$implicit;d.xp6(2),d.Oqu(a.rawMaterialName),d.xp6(2),d.hij("",d.xi3(5,2,a.closingBalance,"1.3-3")," gm")}}function N(e,t){if(1&e&&(d.TgZ(0,"div",15),d.TgZ(1,"mat-card",3),d.TgZ(2,"mat-card-title"),d._uU(3,"Sender Material Balance"),d.qZA(),d.TgZ(4,"table",16),d.TgZ(5,"thead",17),d.TgZ(6,"tr"),d.TgZ(7,"th"),d._uU(8,"Material Name"),d.qZA(),d.TgZ(9,"th",11),d._uU(10,"Value"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"tbody"),d.YNc(12,U,6,5,"tr",21),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw();d.xp6(12),d.Q6J("ngForOf",a.senderMaterialBalances)}}function P(e,t){if(1&e&&(d.TgZ(0,"div",27),d.TgZ(1,"mat-card",3),d.TgZ(2,"mat-card-title"),d._uU(3,"Developer Area"),d.qZA(),d.TgZ(4,"mat-tab-group",28),d.TgZ(5,"mat-tab",29),d.TgZ(6,"pre"),d._uU(7),d.ALo(8,"json"),d.qZA(),d.qZA(),d.TgZ(9,"mat-tab",30),d.TgZ(10,"pre"),d._uU(11),d.ALo(12,"json"),d.qZA(),d.qZA(),d.TgZ(13,"mat-tab",31),d.TgZ(14,"pre"),d._uU(15),d.ALo(16,"json"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw(2);d.xp6(7),d.Oqu(d.lcZ(8,3,a.materialRecivingForm.value)),d.xp6(4),d.hij("savedResponse=",d.lcZ(12,5,null==a.savedResponse?null:a.savedResponse.data),""),d.xp6(4),d.hij("materialBalances=",d.lcZ(16,7,a.materialBalances),"")}}function B(e,t){if(1&e){var a=d.EpF();d.TgZ(0,"div",23),d.TgZ(1,"mat-button-toggle-group",24),d.NdJ("ngModelChange",function(e){return d.CHM(a),d.oxw().showDeveloperDiv=e}),d.TgZ(2,"mat-button-toggle",25),d._uU(3,"Show Developer Area"),d.qZA(),d.TgZ(4,"mat-button-toggle",25),d._uU(5,"Hide Developer Area"),d.qZA(),d.qZA(),d.YNc(6,P,17,9,"div",26),d.qZA()}if(2&e){var n=d.oxw();d.xp6(1),d.Q6J("ngModel",n.showDeveloperDiv),d.xp6(1),d.Q6J("value",!0),d.xp6(2),d.Q6J("value",!1),d.xp6(2),d.Q6J("ngIf",n.showDeveloperDiv)}}var R,J=[{path:"",component:(R=function(){function t(a,n,r,i,o){var u=this;e(this,t),this.route=a,this.http=n,this.managerService=r,this.commonservice=i,this.reportService=o,this.isProduction=l.N.production,this.materialBalances=[],this.route.data.subscribe(function(e){u.user=e.materialResolver.user,u.resolverValues=e.materialResolver,u.employees=e.materialResolver.employees.data,u.projectDetails=e.materialResolver.projectDetails,u.rawMaterials=e.materialResolver.rawMaterials.data,u.materialBalances=e.materialResolver.materialBalances.data,u.selectableEmployees=u.employees.filter(function(e){return u.projectDetails.employeeToManagerMaterial.employees.find(function(t){return t===e.employeeId})}),u.selectableMaterials=u.rawMaterials.filter(function(e){return u.projectDetails.employeeToManagerMaterial.materialsToSend.find(function(t){return t===e.rmID})})}),this.materialRecivingForm=new c.cw({outward_employee_id:new c.NI(null,[c.kI.required]),inward_employee_id:new c.NI(this.user.emp_id,[c.kI.required]),rm_id:new c.NI(null,[c.kI.required]),value:new c.NI(0,[c.kI.required])})}return a(t,[{key:"ngOnInit",value:function(){}},{key:"saveMaterialTransfer",value:function(){var e=this;g().fire({title:"Receiving Material from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(t){!t.value||e.managerService.saveMaterialFromEmployee(e.materialRecivingForm.value).subscribe(function(t){!0===t.status&&(g().fire({timer:2e3,title:"Saved",text:"Transferred successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.savedResponse=t)},function(e){g().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}},{key:"onEmployeeChange",value:function(e){var t=this,a=this.materialRecivingForm.get("outward_employee_id").value;a&&this.reportService.getMaterialBalanceByEmployee(a).subscribe(function(e){t.senderMaterialBalances=e.data})}}]),t}(),R.\u0275fac=function(e){return new(e||R)(d.Y36(o.gz),d.Y36(s.eN),d.Y36(m.b),d.Y36(Z.v),d.Y36(p.r))},R.\u0275cmp=d.Xpm({type:R,selectors:[["app-received-raw-material-from-employee"]],decls:43,vars:10,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","outward_employee_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"w-100",3,"items"],[1,"w-100"],["type","number","matInput","","formControlName","value","placeholder","Material value",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[1,"my-4"],[1,"col-md-6","col-12","mb-4"],[1,"table","table-hover","table-sm","align-middle","mt-2"],[1,"table-light"],[3,"ngClass",4,"ngFor","ngForOf"],["class","col-md-6 col-12 mb-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){var a;1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mat-card",3),d.TgZ(4,"mat-card-title",4),d._uU(5,"Material Receiving Form"),d.qZA(),d._uU(6),d.TgZ(7,"form",5),d.TgZ(8,"div",4),d.TgZ(9,"ng-select",6),d.NdJ("change",function(e){return t.onEmployeeChange(e)}),d.qZA(),d.qZA(),d.TgZ(10,"div",4),d._UZ(11,"ng-select",7),d.qZA(),d.TgZ(12,"div",4),d.TgZ(13,"mat-form-field",8),d.TgZ(14,"mat-label"),d._uU(15,"Enter Material Value"),d.qZA(),d._UZ(16,"input",9),d.YNc(17,_,2,0,"mat-error",10),d.qZA(),d.qZA(),d.TgZ(18,"div",11),d.TgZ(19,"button",12),d.NdJ("click",function(){return t.saveMaterialTransfer()}),d._uU(20," \ud83d\udcbe Save Record "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",13),d.YNc(22,y,19,2,"div",10),d.TgZ(23,"div"),d._UZ(24,"mat-divider",14),d.TgZ(25,"h3",4),d._uU(26,"Balance before Transaction"),d.qZA(),d.TgZ(27,"div",1),d.TgZ(28,"div",15),d.TgZ(29,"mat-card",3),d.TgZ(30,"mat-card-title"),d._uU(31,"Your Material Balance"),d.qZA(),d.TgZ(32,"table",16),d.TgZ(33,"thead",17),d.TgZ(34,"tr"),d.TgZ(35,"th"),d._uU(36,"Material Name"),d.qZA(),d.TgZ(37,"th",11),d._uU(38,"Value"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"tbody"),d.YNc(40,O,6,8,"tr",18),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(41,N,13,1,"div",19),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(42,B,7,4,"div",20),d.qZA()),2&e&&(d.xp6(6),d.hij(" selected rm ",t.materialRecivingForm.get("rm_id").value," "),d.xp6(1),d.Q6J("formGroup",t.materialRecivingForm),d.xp6(2),d.Q6J("items",t.selectableEmployees),d.xp6(2),d.Q6J("items",t.selectableMaterials),d.xp6(6),d.Q6J("ngIf",null==(a=t.materialRecivingForm.get("value"))?null:a.hasError("required")),d.xp6(2),d.Q6J("disabled",!t.materialRecivingForm.valid||t.materialRecivingForm.pristine),d.xp6(3),d.Q6J("ngIf",t.savedResponse),d.xp6(18),d.Q6J("ngForOf",t.materialBalances),d.xp6(1),d.Q6J("ngIf",null==t.senderMaterialBalances?null:t.senderMaterialBalances.length),d.xp6(1),d.Q6J("ngIf",!t.isProduction))},directives:[f.a8,f.n5,c._Y,c.JL,c.sg,v.w9,c.JJ,c.u,b.KE,b.hX,c.wV,A.Nt,c.Fj,i.O5,T.d,i.sg,b.TO,i.mk,q.A9,c.On,q.Yi,h.SP,h.uX],pipes:[i.JJ,i.Ts],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f4f6f8}mat-card[_ngcontent-%COMP%]{border-radius:12px!important;border:none!important;background:#fff}mat-card-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600;color:#444}.table[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f1f3f5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#555}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#333}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}ng-select.custom[_ngcontent-%COMP%], ng-select.w-100[_ngcontent-%COMP%]{border-radius:6px;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border:1px solid #d1d5db;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding:6px 10px}.mat-form-field[_ngcontent-%COMP%]{background:white;border-radius:6px;padding:0 6px}.mat-input-element[_ngcontent-%COMP%]{font-size:.95rem}button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),R)}],k=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.Bz.forChild(J)],o.Bz]}),t}(),I=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez,k,c.UX,q.vV,h.Nh,v.A0,A.c,q.vV,f.QW,c.u5,T.t]]}),t}()}}])}();