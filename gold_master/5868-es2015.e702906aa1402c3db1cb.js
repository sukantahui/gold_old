"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[5868],{45868:function(t,o,e){e.r(o),e.d(o,{TopUpGoldModule:function(){return N}});var i=e(38583),s=e(63423),l=e(3679),a=e(37716),u=e(57916),n=e(82820),r=e(5620),Z=e(35618),d=e(98295),g=e(49983),p=e(51095);function c(t,o){1&t&&(a.TgZ(0,"mat-error"),a._uU(1," Job number is required "),a.qZA())}function q(t,o){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td",19),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.qZA()),2&t){const t=o.$implicit;a.xp6(2),a.Oqu(t.transaction_text),a.xp6(2),a.Oqu(t.comment),a.xp6(2),a.Oqu(t.gold_value),a.xp6(2),a.Oqu(t.timestamp)}}function A(t,o){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td",19),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.qZA()),2&t){const t=o.$implicit;a.xp6(2),a.Oqu(t.transaction_text),a.xp6(2),a.Oqu(t.comment),a.xp6(2),a.Oqu(t.gold_value),a.xp6(2),a.Oqu(t.timestamp)}}function b(t,o){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td",19),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.qZA()),2&t){const t=o.$implicit;a.xp6(2),a.Oqu(t.transaction_text),a.xp6(2),a.Oqu(t.comment),a.xp6(2),a.Oqu(t.gold_value),a.xp6(2),a.Oqu(t.timestamp)}}function U(t,o){if(1&t&&(a.TgZ(0,"div",12),a.TgZ(1,"h2"),a._uU(2),a.qZA(),a.TgZ(3,"h3"),a._uU(4),a.qZA(),a.TgZ(5,"table",13),a.TgZ(6,"thead"),a.TgZ(7,"tr"),a.TgZ(8,"th"),a._uU(9,"Transaction"),a.qZA(),a.TgZ(10,"th"),a._uU(11,"Comment"),a.qZA(),a.TgZ(12,"th"),a._uU(13,"Value (gms)"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"Timestamp"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"tbody"),a.YNc(17,q,9,4,"tr",14),a.TgZ(18,"tr",15),a.TgZ(19,"td",16),a._uU(20,"Gold Used"),a.qZA(),a.TgZ(21,"td",17),a._uU(22),a.ALo(23,"number"),a.qZA(),a.qZA(),a.YNc(24,A,9,4,"tr",14),a.TgZ(25,"tr",15),a.TgZ(26,"td",16),a._uU(27,"Pan Used"),a.qZA(),a.TgZ(28,"td",17),a._uU(29),a.ALo(30,"number"),a.qZA(),a.qZA(),a.YNc(31,b,9,4,"tr",14),a.TgZ(32,"tr",15),a.TgZ(33,"td",18),a._uU(34,"Nitric Used"),a.qZA(),a.TgZ(35,"td",17),a._uU(36),a.ALo(37,"number"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"h3"),a._uU(39,"Final Calculation"),a.qZA(),a.TgZ(40,"table",13),a.TgZ(41,"thead"),a.TgZ(42,"tr"),a.TgZ(43,"td"),a._uU(44,"Sl"),a.qZA(),a.TgZ(45,"td"),a._uU(46,"Subject"),a.qZA(),a.TgZ(47,"td"),a._uU(48,"Value"),a.qZA(),a.TgZ(49,"td"),a._uU(50,"Job%"),a.qZA(),a.TgZ(51,"td"),a._uU(52,"Bill%"),a.qZA(),a.TgZ(53,"td"),a._uU(54,"Bill Value"),a.qZA(),a.TgZ(55,"td"),a._uU(56,"Fine 92%"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(57,"tbody"),a.TgZ(58,"tr"),a.TgZ(59,"th"),a._uU(60,"1"),a.qZA(),a.TgZ(61,"td"),a._uU(62,"Gold Used"),a.qZA(),a.TgZ(63,"td"),a._uU(64),a.ALo(65,"number"),a.qZA(),a.TgZ(66,"td"),a._uU(67,"100%"),a.qZA(),a.TgZ(68,"td"),a._uU(69,"100%"),a.qZA(),a.TgZ(70,"td"),a._uU(71),a.ALo(72,"number"),a.qZA(),a.TgZ(73,"td",19),a._uU(74),a.ALo(75,"number"),a.qZA(),a.qZA(),a.TgZ(76,"tr"),a.TgZ(77,"th"),a._uU(78,"2"),a.qZA(),a.TgZ(79,"td"),a._uU(80,"Pan Used"),a.qZA(),a.TgZ(81,"td"),a._uU(82),a.ALo(83,"number"),a.qZA(),a.TgZ(84,"td"),a._uU(85,"100%"),a.qZA(),a.TgZ(86,"td"),a._uU(87,"40%"),a.qZA(),a.TgZ(88,"td"),a._uU(89),a.ALo(90,"number"),a.qZA(),a.TgZ(91,"td",19),a._uU(92),a.ALo(93,"number"),a.qZA(),a.qZA(),a.TgZ(94,"tr"),a.TgZ(95,"th"),a._uU(96,"3"),a.qZA(),a.TgZ(97,"td"),a._uU(98,"Nitric Used"),a.qZA(),a.TgZ(99,"td"),a._uU(100),a.ALo(101,"number"),a.qZA(),a.TgZ(102,"td"),a._uU(103,"93%"),a.qZA(),a.TgZ(104,"td"),a._uU(105,"100%"),a.qZA(),a.TgZ(106,"td"),a._uU(107),a.ALo(108,"number"),a.qZA(),a.TgZ(109,"td",19),a._uU(110),a.ALo(111,"number"),a.qZA(),a.qZA(),a.TgZ(112,"tr"),a.TgZ(113,"th"),a._uU(114,"4"),a.qZA(),a.TgZ(115,"td"),a._uU(116,"P Loss"),a.qZA(),a.TgZ(117,"td",20),a._uU(118),a.ALo(119,"number"),a.qZA(),a.TgZ(120,"td"),a._uU(121),a.ALo(122,"number"),a.qZA(),a.TgZ(123,"td",19),a._uU(124),a.ALo(125,"number"),a.qZA(),a.qZA(),a.TgZ(126,"tr"),a.TgZ(127,"th"),a._uU(128,"5"),a.qZA(),a.TgZ(129,"td"),a._uU(130,"MV"),a.qZA(),a.TgZ(131,"td",20),a._uU(132),a.ALo(133,"number"),a.qZA(),a.TgZ(134,"td"),a._uU(135),a.ALo(136,"number"),a.qZA(),a.TgZ(137,"td",19),a._uU(138),a.ALo(139,"number"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(140,"tfoot"),a.TgZ(141,"tr",15),a.TgZ(142,"th",21),a._uU(143,"Final Bill Calculated"),a.qZA(),a.TgZ(144,"th"),a._uU(145),a.ALo(146,"number"),a.qZA(),a.TgZ(147,"th",19),a._uU(148),a.ALo(149,"number"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij("JOB Details for ID: ",t.jobDetails.job.job_id,""),a.xp6(2),a.hij("Bill No . ",t.jobDetails.bill_no,""),a.xp6(13),a.Q6J("ngForOf",t.jobDetails.gold),a.xp6(5),a.hij(" ",a.xi3(23,27,t.totalGoldUse,"1.3-3"),""),a.xp6(2),a.Q6J("ngForOf",t.jobDetails.pan),a.xp6(5),a.hij(" ",a.xi3(30,30,t.totalPanUse,"1.3-3"),""),a.xp6(2),a.Q6J("ngForOf",t.jobDetails.nitric),a.xp6(5),a.hij(" ",a.xi3(37,33,t.totalNitricUse,"1.3-3"),""),a.xp6(28),a.Oqu(a.xi3(65,36,t.totalGoldUse,"1.3-3")),a.xp6(7),a.Oqu(a.xi3(72,39,t.totalGoldUse,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(75,42,.92*t.totalGoldUse,"1.3-3")),a.xp6(8),a.Oqu(a.xi3(83,45,t.totalPanUse,"1.3-3")),a.xp6(7),a.Oqu(a.xi3(90,48,t.totalPanUse*t.jobDetails.rm_bangle_pan.bill_percentage,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(93,51,t.totalPanUse*t.jobDetails.rm_bangle_pan.bill_percentage*.92,"1.3-3")),a.xp6(8),a.Oqu(a.xi3(101,54,t.totalNitricUse,"1.3-3")),a.xp6(7),a.Oqu(a.xi3(108,57,t.totalNitricUse*t.jobDetails.rm_nitric.job_percentage,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(111,60,t.totalNitricUse*t.jobDetails.rm_nitric.job_percentage*.92,"1.3-3")),a.xp6(8),a.AsE("",a.xi3(119,63,t.jobDetails.job.p_loss,"1.3-3")," X ",t.jobDetails.job.pieces," pcs "),a.xp6(3),a.Oqu(a.xi3(122,66,t.totalPLoss,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(125,69,.92*t.totalPLoss,"1.3-3")),a.xp6(8),a.AsE("",a.xi3(133,72,t.jobDetails.job.markup_value,"1.3-3")," X ",t.jobDetails.job.pieces," pcs "),a.xp6(3),a.Oqu(a.xi3(136,75,t.totalMV,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(139,78,.92*t.totalMV,"1.3-3")),a.xp6(7),a.Oqu(a.xi3(146,81,t.finalGini,"1.3-3")),a.xp6(3),a.Oqu(a.xi3(149,84,.92*t.finalGini,"1.3-3"))}}const T=[{path:"",component:(()=>{class t{constructor(t,o,e,i){this.managerService=t,this.reportService=o,this.commonService=e,this.fb=i,this.responseMessage=null,this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0,this.topUpGoldForm=this.fb.group({job:[null,l.kI.required],gold:[0,l.kI.required]})}ngOnInit(){}onSubmit(){const{job:t,gold:o}=this.topUpGoldForm.value;this.managerService.addTopUpGold(t,o).subscribe({next:t=>{this.responseMessage=t.data[0]}}),this.loadJobDetails(t)}onReset(){this.topUpGoldForm.reset({job:null,gold:0}),this.responseMessage=null,this.resetTotals()}onSearch(){const t=this.topUpGoldForm.value.job;t&&this.loadJobDetails(t)}loadJobDetails(t){this.reportService.getJobDetailsforOwner(t).subscribe({next:t=>{this.jobDetails=t.data,this.calculateTotals()},error:t=>{alert("Error: "+t.error.message)}})}resetTotals(){this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0}calculateTotals(){this.totalGoldUse=this.sumValues(this.jobDetails.gold),this.totalPanUse=this.sumValues(this.jobDetails.pan),this.totalNitricUse=this.sumValues(this.jobDetails.nitric),this.totalPLoss=this.jobDetails.job.p_loss*this.jobDetails.job.pieces,this.totalMV=this.jobDetails.job.markup_value*this.jobDetails.job.pieces,this.finalGini=this.totalGoldUse+this.totalPanUse*this.jobDetails.rm_bangle_pan.bill_percentage+.93*this.totalNitricUse+this.totalPLoss+this.totalMV}sumValues(t){return t.reduce((t,o)=>t+o.gold_value,0)}}return t.\u0275fac=function(o){return new(o||t)(a.Y36(u.b),a.Y36(n.r),a.Y36(r.v),a.Y36(l.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-top-up-gold"]],decls:16,vars:4,consts:[["id","main-div"],[3,"formGroup"],["fxLayoutGap","15px",2,"padding-left","50px"],["fxFlex","10"],["type","text","formControlName","job","matInput","","placeholder","Job Number",1,"p-1",2,"border-radius","5px"],["type","number","formControlName","gold","matInput","","placeholder","Gold",1,"p-1",2,"border-radius","5px"],["fxLayoutGap","15px",2,"text-align","center"],["mat-raised-button","",1,"btn-info",3,"click"],["mat-raised-button","",1,"btn-info",3,"disabled","click"],["mat-raised-button","","color","warn","type","button",3,"click"],[4,"ngIf"],["style","margin-left: 50px;","id","print-job-details",4,"ngIf"],["id","print-job-details",2,"margin-left","50px"],["border","1","cellpadding","8","cellspacing","0"],[4,"ngFor","ngForOf"],[2,"border-top","1px solid black","border-bottom","1px solid black"],["colspan","2",1,"text-center","fw-bold"],[1,"text-end","fw-bold"],["colspan","2",1,"text-end","fw-bold"],[1,"text-end"],["colspan","3"],["colspan","5"]],template:function(t,o){if(1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.TgZ(2,"div",2),a.TgZ(3,"mat-form-field",3),a._UZ(4,"input",4),a.qZA(),a.TgZ(5,"mat-form-field",3),a._UZ(6,"input",5),a.qZA(),a.qZA(),a.TgZ(7,"div",6),a.TgZ(8,"button",7),a.NdJ("click",function(){return o.onSearch()}),a._uU(9,"Search Job"),a.qZA(),a.TgZ(10,"button",8),a.NdJ("click",function(){return o.onSubmit()}),a._uU(11,"Update Topup Gold"),a.qZA(),a.TgZ(12,"button",9),a.NdJ("click",function(){return o.onReset()}),a._uU(13,"Reset"),a.qZA(),a.qZA(),a.YNc(14,c,2,0,"mat-error",10),a.qZA(),a.YNc(15,U,150,87,"div",11),a.qZA()),2&t){let t;a.xp6(1),a.Q6J("formGroup",o.topUpGoldForm),a.xp6(9),a.Q6J("disabled",null!=o.responseMessage),a.xp6(4),a.Q6J("ngIf",(null==(t=o.topUpGoldForm.get("job"))?null:t.hasError("required"))&&(null==(t=o.topUpGoldForm.get("job"))?null:t.touched)),a.xp6(1),a.Q6J("ngIf",o.jobDetails)}},directives:[l._Y,l.JL,l.sg,Z.SQ,d.KE,Z.yH,l.Fj,g.Nt,l.JJ,l.u,l.wV,p.lW,i.O5,d.TO,i.sg],pipes:[i.JJ],styles:["#main-div[_ngcontent-%COMP%]{margin-top:100px;min-height:90vh;margin-left:50}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),t})();var _=e(45480),h=e(43220),x=e(67441),f=e(45396),j=e(93738),O=e(86640),L=e(7539),D=e(44981),G=e(72533),J=e(70346),v=e(76627);let N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,m,_.q,d.lN,l.UX,g.c,h.FA,x.LD,f.rP,p.ot,j.QW,O.A0,Z.ae,L.p9,l.u5,D.h,G.JX,J.g,v.Ps]]}),t})()}}]);