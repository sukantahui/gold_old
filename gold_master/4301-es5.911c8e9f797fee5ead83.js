!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?o:String(o)),n)}var r,o}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[4301],{74301:function(t,n,r){r.r(n),r.d(n,{ManagerCashWithdrawnModule:function(){return F}});var o=r(38583),i=r(63423),s=r(92340),c=r(3679),u=r(88259),l=r.n(u),d=r(37716),h=r(57916),g=r(82820),p=r(93738),Z=r(86640),m=r(98295),f=r(49983),v=r(42542),T=r(65939);function A(e,t){1&e&&(d.TgZ(0,"div",18),d._uU(1," Employee selection is required "),d.qZA())}function q(e,t){1&e&&(d.TgZ(0,"mat-error"),d._uU(1," Cash value is required "),d.qZA())}function b(e,t){1&e&&(d.TgZ(0,"mat-error"),d._uU(1," Cash must be greater than 0 "),d.qZA())}var y=function(e,t){return{"text-success":e,"text-danger":t}};function w(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td",11),d._uU(6),d.ALo(7,"number"),d.qZA(),d.TgZ(8,"td",23),d._uU(9),d.ALo(10,"number"),d.qZA(),d.TgZ(11,"td",24),d._uU(12),d.ALo(13,"number"),d.qZA(),d.TgZ(14,"td",25),d._uU(15),d.ALo(16,"number"),d.qZA(),d.qZA()),2&e){var a=t.$implicit;d.xp6(2),d.Oqu(a.emp_id),d.xp6(2),d.Oqu(a.emp_name),d.xp6(2),d.Oqu(d.lcZ(7,7,a.op_balance)),d.xp6(3),d.Oqu(d.lcZ(10,9,a.inward)),d.xp6(3),d.Oqu(d.lcZ(13,11,a.outward)),d.xp6(2),d.Q6J("ngClass",d.WLB(15,y,a.balance>=0,a.balance<0)),d.xp6(1),d.hij(" ",d.lcZ(16,13,a.balance)," ")}}function x(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",19),d.TgZ(2,"table",20),d.TgZ(3,"thead",21),d.TgZ(4,"tr"),d.TgZ(5,"th"),d._uU(6,"ID"),d.qZA(),d.TgZ(7,"th"),d._uU(8,"Name"),d.qZA(),d.TgZ(9,"th"),d._uU(10,"Opening Balance"),d.qZA(),d.TgZ(11,"th"),d._uU(12,"Inward"),d.qZA(),d.TgZ(13,"th"),d._uU(14,"Outward"),d.qZA(),d.TgZ(15,"th"),d._uU(16,"Balance"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"tbody"),d.YNc(18,w,17,18,"tr",22),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw();d.xp6(18),d.Q6J("ngForOf",a.cashBalances)}}function _(e,t){1&e&&(d.TgZ(0,"p",26),d._uU(1,"No Cash Balance available."),d.qZA())}function U(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.ALo(3,"date"),d.qZA(),d.TgZ(4,"td"),d._uU(5),d.qZA(),d.TgZ(6,"td"),d._uU(7),d.qZA(),d.TgZ(8,"td",11),d._uU(9),d.ALo(10,"number"),d.qZA(),d.qZA()),2&e){var a=t.$implicit;d.xp6(2),d.Oqu(d.xi3(3,4,a.tr_date,"short")),d.xp6(3),d.Oqu(a.payer_name||a.payer_id),d.xp6(2),d.Oqu(a.payee_name||a.payee_id),d.xp6(2),d.Oqu(d.xi3(10,7,a.cash,"1.2-2"))}}function C(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",19),d.TgZ(2,"table",20),d.TgZ(3,"thead",21),d.TgZ(4,"tr"),d.TgZ(5,"th"),d._uU(6,"Date"),d.qZA(),d.TgZ(7,"th"),d._uU(8,"Payer(\u09a6\u09bf\u09df\u09c7\u099b\u09c7)"),d.qZA(),d.TgZ(9,"th"),d._uU(10,"Payee(\u09a8\u09bf\u09df\u09c7\u099b\u09c7)"),d.qZA(),d.TgZ(11,"th",11),d._uU(12,"Cash"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"tbody"),d.YNc(14,U,11,10,"tr",22),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw();d.xp6(14),d.Q6J("ngForOf",a.cashTransactions)}}function I(e,t){1&e&&(d.TgZ(0,"p",26),d._uU(1,"No transactions available."),d.qZA())}function B(e,t){if(1&e&&(d.TgZ(0,"div",31),d.TgZ(1,"mat-card",3),d.TgZ(2,"mat-card-title"),d._uU(3,"Developer Area"),d.qZA(),d.TgZ(4,"mat-tab-group",32),d.TgZ(5,"mat-tab",33),d.TgZ(6,"pre"),d._uU(7),d.ALo(8,"json"),d.qZA(),d.qZA(),d.TgZ(9,"mat-tab",34),d.TgZ(10,"pre"),d._uU(11),d.ALo(12,"json"),d.qZA(),d.qZA(),d.TgZ(13,"mat-tab",35),d.TgZ(14,"pre"),d._uU(15),d.ALo(16,"json"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var a=d.oxw(2);d.xp6(7),d.hij("                            cashWithdrawForm=",d.lcZ(8,3,a.cashWithdrawForm.value),"\n                        "),d.xp6(4),d.hij("                            cashBalances=",d.lcZ(12,5,a.cashBalances),"\n                        "),d.xp6(4),d.hij("                            cashTransactions = ",d.lcZ(16,7,a.cashTransactions),"\n                        ")}}function N(e,t){if(1&e){var a=d.EpF();d.TgZ(0,"div",27),d.TgZ(1,"mat-button-toggle-group",28),d.NdJ("ngModelChange",function(e){return d.CHM(a),d.oxw().showDeveloperDiv=e}),d.TgZ(2,"mat-button-toggle",29),d._uU(3,"Show Developer Area"),d.qZA(),d.TgZ(4,"mat-button-toggle",29),d._uU(5,"Hide Developer Area"),d.qZA(),d.qZA(),d.YNc(6,B,17,9,"div",30),d.qZA()}if(2&e){var n=d.oxw();d.xp6(1),d.Q6J("ngModel",n.showDeveloperDiv),d.xp6(1),d.Q6J("value",!0),d.xp6(2),d.Q6J("value",!1),d.xp6(2),d.Q6J("ngIf",n.showDeveloperDiv)}}var W,J=[{path:"",component:(W=function(){function t(a,n,r){e(this,t),this.route=a,this.managerService=n,this.reportService=r,this.showDeveloperDiv=!1,this.isProduction=s.N.production,this.employees=[],this.cashWithdrawForm=new c.cw({payer_id:new c.NI(null,[c.kI.required]),payee_id:new c.NI(null,[c.kI.required]),cash:new c.NI(null,[c.kI.required])})}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.employees=this.route.snapshot.data.employeeResolver.data,this.projectDetails=this.route.snapshot.data.projectDetails,this.cashBalances=this.route.snapshot.data.cashBalances.data,this.currentUser=this.route.snapshot.data.currentUser.data,this.cashWithdrawForm.patchValue({payee_id:this.currentUser.employeeId}),this.currentUser&&72===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(function(t){return e.projectDetails.managerCashWithdrawn.employees.find(function(e){return e===t.employeeId})})),this.currentUser&&28===this.currentUser.employeeId&&(this.selectableEmployees=this.employees.filter(function(t){return e.projectDetails.ownerCashWithdrawnFromManager.employees.find(function(e){return e===t.employeeId})})),this.cashTransactions=this.route.snapshot.data.cashTransactionsByEmployee.data}},{key:"saveCashWithdrawn",value:function(){var e=this;l().fire({title:"Withdraw Cash from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Withdraw",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(t){!t.value||e.managerService.saveCashTransactionBetweenEmployee(e.cashWithdrawForm.value).subscribe(function(t){!0===t.status&&(l().fire({timer:2e3,title:"Saved",text:"Cash Withdrawn successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.savedResponse=t,e.managerService.cashTransactionsByCurrentUser().subscribe(function(t){e.cashTransactions=t.data}),e.reportService.cashBalance().subscribe(function(t){e.cashBalances=t.data}),e.cashWithdrawForm.reset())},function(e){l().fire({title:e.message,text:"Cash Withdrawn Unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}},{key:"onEmployeeChange",value:function(e){console.log(e),this.cashTransactions=e?this.route.snapshot.data.cashTransactionsByEmployee.data.filter(function(t){return t.payer_id===e.employeeId||t.payee_id===e.employeeId}):this.route.snapshot.data.cashTransactionsByEmployee.data}}]),t}(),W.\u0275fac=function(e){return new(e||W)(d.Y36(i.gz),d.Y36(h.b),d.Y36(g.r))},W.\u0275cmp=d.Xpm({type:W,selectors:[["app-manager-cash-withdrawn"]],decls:35,vars:12,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","payer_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"w-100"],["type","number","matInput","","formControlName","cash","placeholder","Cash",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[4,"ngIf","ngIfElse"],["noCashBalances",""],["noTransactions",""],["class","mt-4",4,"ngIf"],[1,"text-danger","mt-1"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-end","text-success"],[1,"text-end","text-danger"],[1,"text-end",3,"ngClass"],[1,"text-muted","m-3"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mat-card",3),d.TgZ(4,"mat-card-title",4),d._uU(5),d.qZA(),d.TgZ(6,"form",5),d.TgZ(7,"div",4),d.TgZ(8,"ng-select",6),d.NdJ("change",function(e){return t.onEmployeeChange(e)}),d.qZA(),d.YNc(9,A,2,0,"div",7),d.qZA(),d.TgZ(10,"div",4),d.TgZ(11,"mat-form-field",8),d.TgZ(12,"mat-label"),d._uU(13,"Enter Cash"),d.qZA(),d._UZ(14,"input",9),d.YNc(15,q,2,0,"mat-error",10),d.YNc(16,b,2,0,"mat-error",10),d.qZA(),d.qZA(),d._UZ(17,"div",4),d.TgZ(18,"div",11),d.TgZ(19,"button",12),d.NdJ("click",function(){return t.saveCashWithdrawn()}),d._uU(20," \ud83d\udcbe Save Record "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",13),d.TgZ(22,"mat-card",3),d.TgZ(23,"mat-card-title"),d._uU(24,"Cash Balance"),d.qZA(),d.YNc(25,x,19,1,"div",14),d.YNc(26,_,2,0,"ng-template",null,15,d.W1O),d.qZA(),d.TgZ(28,"mat-card",3),d.TgZ(29,"mat-card-title"),d._uU(30,"Cash Transactions"),d.qZA(),d.YNc(31,C,15,1,"div",14),d.YNc(32,I,2,0,"ng-template",null,16,d.W1O),d.qZA(),d.qZA(),d.qZA(),d.YNc(34,N,7,4,"div",17),d.qZA()),2&e){var a,n,r,o=d.MAs(27),i=d.MAs(33);d.xp6(5),d.hij("Cash Withdraw by ",t.currentUser.userName,""),d.xp6(1),d.Q6J("formGroup",t.cashWithdrawForm),d.xp6(2),d.Q6J("items",t.selectableEmployees),d.xp6(1),d.Q6J("ngIf",(null==(a=t.cashWithdrawForm.get("payer_id"))?null:a.touched)&&(null==(a=t.cashWithdrawForm.get("payer_id"))?null:a.invalid)),d.xp6(6),d.Q6J("ngIf",null==(n=t.cashWithdrawForm.get("cash"))?null:n.hasError("required")),d.xp6(1),d.Q6J("ngIf",null==(r=t.cashWithdrawForm.get("cash"))?null:r.hasError("min")),d.xp6(3),d.Q6J("disabled",!t.cashWithdrawForm.valid||t.cashWithdrawForm.pristine),d.xp6(6),d.Q6J("ngIf",t.cashBalances&&t.cashBalances.length)("ngIfElse",o),d.xp6(6),d.Q6J("ngIf",t.cashTransactions&&t.cashTransactions.length)("ngIfElse",i),d.xp6(3),d.Q6J("ngIf",!t.isProduction)}},directives:[p.a8,p.n5,c._Y,c.JL,c.sg,Z.w9,c.JJ,c.u,o.O5,m.KE,m.hX,c.wV,f.Nt,c.Fj,m.TO,o.sg,o.mk,v.A9,c.On,v.Yi,T.SP,T.uX],pipes:[o.JJ,o.uU,o.Ts],styles:["button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),W)}],O=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.Bz.forChild(J)],i.Bz]}),t}(),E=r(1769),F=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.ez,O,v.vV,c.u5,p.QW,T.Nh,c.UX,Z.A0,m.lN,E.t,f.c]]}),t}()}}])}();