"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[5868],{45868:function(t,e,r){r.r(e),r.d(e,{TopUpGoldModule:function(){return D}});var o=r(38583),i=r(63423),s=r(3679),n=r(37716),a=r(57916),l=r(82820),u=r(5620),p=r(35618),Z=r(98295),c=r(49983),g=r(51095);function d(t,e){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Job number is required "),n.qZA())}function h(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td",19),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(2),n.Oqu(t.transaction_text),n.xp6(2),n.Oqu(t.comment),n.xp6(2),n.Oqu(t.gold_value),n.xp6(2),n.Oqu(t.timestamp)}}function m(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td",19),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(2),n.Oqu(t.transaction_text),n.xp6(2),n.Oqu(t.comment),n.xp6(2),n.Oqu(t.gold_value),n.xp6(2),n.Oqu(t.timestamp)}}function A(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td",19),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(2),n.Oqu(t.transaction_text),n.xp6(2),n.Oqu(t.comment),n.xp6(2),n.Oqu(t.gold_value),n.xp6(2),n.Oqu(t.timestamp)}}function b(t,e){if(1&t&&(n.TgZ(0,"div",12),n.TgZ(1,"h2"),n._uU(2),n.qZA(),n.TgZ(3,"h3"),n._uU(4),n.qZA(),n.TgZ(5,"table",13),n.TgZ(6,"thead"),n.TgZ(7,"tr"),n.TgZ(8,"th"),n._uU(9,"Transaction"),n.qZA(),n.TgZ(10,"th"),n._uU(11,"Comment"),n.qZA(),n.TgZ(12,"th"),n._uU(13,"Value (gms)"),n.qZA(),n.TgZ(14,"th"),n._uU(15,"Timestamp"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,h,9,4,"tr",14),n.TgZ(18,"tr",15),n.TgZ(19,"td",16),n._uU(20,"Gold Used"),n.qZA(),n.TgZ(21,"td",17),n._uU(22),n.ALo(23,"number"),n.qZA(),n.qZA(),n.YNc(24,m,9,4,"tr",14),n.TgZ(25,"tr",15),n.TgZ(26,"td",16),n._uU(27,"Pan Used"),n.qZA(),n.TgZ(28,"td",17),n._uU(29),n.ALo(30,"number"),n.qZA(),n.qZA(),n.YNc(31,A,9,4,"tr",14),n.TgZ(32,"tr",15),n.TgZ(33,"td",18),n._uU(34,"Nitric Used"),n.qZA(),n.TgZ(35,"td",17),n._uU(36),n.ALo(37,"number"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(38,"h3"),n._uU(39,"Final Calculation"),n.qZA(),n.TgZ(40,"table",13),n.TgZ(41,"thead"),n.TgZ(42,"tr"),n.TgZ(43,"td"),n._uU(44,"Sl"),n.qZA(),n.TgZ(45,"td"),n._uU(46,"Subject"),n.qZA(),n.TgZ(47,"td"),n._uU(48,"Value"),n.qZA(),n.TgZ(49,"td"),n._uU(50,"Job%"),n.qZA(),n.TgZ(51,"td"),n._uU(52,"Bill%"),n.qZA(),n.TgZ(53,"td"),n._uU(54,"Bill Value"),n.qZA(),n.TgZ(55,"td"),n._uU(56,"Fine 92%"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(57,"tbody"),n.TgZ(58,"tr"),n.TgZ(59,"th"),n._uU(60,"1"),n.qZA(),n.TgZ(61,"td"),n._uU(62,"Gold Used"),n.qZA(),n.TgZ(63,"td"),n._uU(64),n.ALo(65,"number"),n.qZA(),n.TgZ(66,"td"),n._uU(67,"100%"),n.qZA(),n.TgZ(68,"td"),n._uU(69,"100%"),n.qZA(),n.TgZ(70,"td"),n._uU(71),n.ALo(72,"number"),n.qZA(),n.TgZ(73,"td",19),n._uU(74),n.ALo(75,"number"),n.qZA(),n.qZA(),n.TgZ(76,"tr"),n.TgZ(77,"th"),n._uU(78,"2"),n.qZA(),n.TgZ(79,"td"),n._uU(80,"Pan Used"),n.qZA(),n.TgZ(81,"td"),n._uU(82),n.ALo(83,"number"),n.qZA(),n.TgZ(84,"td"),n._uU(85,"100%"),n.qZA(),n.TgZ(86,"td"),n._uU(87,"40%"),n.qZA(),n.TgZ(88,"td"),n._uU(89),n.ALo(90,"number"),n.qZA(),n.TgZ(91,"td",19),n._uU(92),n.ALo(93,"number"),n.qZA(),n.qZA(),n.TgZ(94,"tr"),n.TgZ(95,"th"),n._uU(96,"3"),n.qZA(),n.TgZ(97,"td"),n._uU(98,"Nitric Used"),n.qZA(),n.TgZ(99,"td"),n._uU(100),n.ALo(101,"number"),n.qZA(),n.TgZ(102,"td"),n._uU(103,"93%"),n.qZA(),n.TgZ(104,"td"),n._uU(105,"100%"),n.qZA(),n.TgZ(106,"td"),n._uU(107),n.ALo(108,"number"),n.qZA(),n.TgZ(109,"td",19),n._uU(110),n.ALo(111,"number"),n.qZA(),n.qZA(),n.TgZ(112,"tr"),n.TgZ(113,"th"),n._uU(114,"4"),n.qZA(),n.TgZ(115,"td"),n._uU(116,"P Loss"),n.qZA(),n.TgZ(117,"td",20),n._uU(118),n.ALo(119,"number"),n.qZA(),n.TgZ(120,"td"),n._uU(121),n.ALo(122,"number"),n.qZA(),n.TgZ(123,"td",19),n._uU(124),n.ALo(125,"number"),n.qZA(),n.qZA(),n.TgZ(126,"tr"),n.TgZ(127,"th"),n._uU(128,"5"),n.qZA(),n.TgZ(129,"td"),n._uU(130,"MV"),n.qZA(),n.TgZ(131,"td",20),n._uU(132),n.ALo(133,"number"),n.qZA(),n.TgZ(134,"td"),n._uU(135),n.ALo(136,"number"),n.qZA(),n.TgZ(137,"td",19),n._uU(138),n.ALo(139,"number"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(140,"tfoot"),n.TgZ(141,"tr",15),n.TgZ(142,"th",21),n._uU(143,"Final Bill Calculated"),n.qZA(),n.TgZ(144,"th"),n._uU(145),n.ALo(146,"number"),n.qZA(),n.TgZ(147,"th",19),n._uU(148),n.ALo(149,"number"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.hij("JOB Details for ID: ",t.jobDetails.job.job_id,""),n.xp6(2),n.hij("Bill No . ",t.jobDetails.bill_no,""),n.xp6(13),n.Q6J("ngForOf",t.jobDetails.gold),n.xp6(5),n.hij(" ",n.xi3(23,27,t.totalGoldUse,"1.3-3"),""),n.xp6(2),n.Q6J("ngForOf",t.jobDetails.pan),n.xp6(5),n.hij(" ",n.xi3(30,30,t.totalPanUse,"1.3-3"),""),n.xp6(2),n.Q6J("ngForOf",t.jobDetails.nitric),n.xp6(5),n.hij(" ",n.xi3(37,33,t.totalNitricUse,"1.3-3"),""),n.xp6(28),n.Oqu(n.xi3(65,36,t.totalGoldUse,"1.3-3")),n.xp6(7),n.Oqu(n.xi3(72,39,t.totalGoldUse,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(75,42,.92*t.totalGoldUse,"1.3-3")),n.xp6(8),n.Oqu(n.xi3(83,45,t.totalPanUse,"1.3-3")),n.xp6(7),n.Oqu(n.xi3(90,48,t.totalPanUse*t.jobDetails.rm_bangle_pan.bill_percentage,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(93,51,t.totalPanUse*t.jobDetails.rm_bangle_pan.bill_percentage*.92,"1.3-3")),n.xp6(8),n.Oqu(n.xi3(101,54,t.totalNitricUse,"1.3-3")),n.xp6(7),n.Oqu(n.xi3(108,57,t.totalNitricUse*t.jobDetails.rm_nitric.job_percentage,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(111,60,t.totalNitricUse*t.jobDetails.rm_nitric.job_percentage*.92,"1.3-3")),n.xp6(8),n.AsE("",n.xi3(119,63,t.jobDetails.job.p_loss,"1.3-3")," X ",t.jobDetails.job.pieces," pcs "),n.xp6(3),n.Oqu(n.xi3(122,66,t.totalPLoss,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(125,69,.92*t.totalPLoss,"1.3-3")),n.xp6(8),n.AsE("",n.xi3(133,72,t.jobDetails.job.markup_value,"1.3-3")," X ",t.jobDetails.job.pieces," pcs "),n.xp6(3),n.Oqu(n.xi3(136,75,t.totalMV,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(139,78,.92*t.totalMV,"1.3-3")),n.xp6(7),n.Oqu(n.xi3(146,81,t.finalGini,"1.3-3")),n.xp6(3),n.Oqu(n.xi3(149,84,.92*t.finalGini,"1.3-3"))}}const q=[{path:"",component:(()=>{class t{constructor(t,e,r,o){this.managerService=t,this.reportService=e,this.commonService=r,this.fb=o,this.responseMessage=null,this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0,this.topUpGoldForm=this.fb.group({job:[null,s.kI.required],gold:[0,s.kI.required]})}ngOnInit(){}onSubmit(){const{job:t,gold:e}=this.topUpGoldForm.value;this.managerService.addTopUpGold(t,e).subscribe({next:t=>{this.responseMessage=t.data[0]}}),this.loadJobDetails(t)}onReset(){this.topUpGoldForm.reset({job:null,gold:0}),this.responseMessage=null,this.resetTotals()}onSearch(){const t=this.topUpGoldForm.value.job;t&&this.loadJobDetails(t)}loadJobDetails(t){this.reportService.getJobDetailsforOwner(t).subscribe({next:t=>{this.jobDetails=t.data,this.calculateTotals()},error:t=>{alert("Error: "+t.error.message)}})}resetTotals(){this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0}calculateTotals(){this.totalGoldUse=this.sumValues(this.jobDetails.gold),this.totalPanUse=this.sumValues(this.jobDetails.pan),this.totalNitricUse=this.sumValues(this.jobDetails.nitric),this.totalPLoss=this.jobDetails.job.p_loss*this.jobDetails.job.pieces,this.totalMV=this.jobDetails.job.markup_value*this.jobDetails.job.pieces,this.finalGini=this.totalGoldUse+this.totalPanUse*this.jobDetails.rm_bangle_pan.bill_percentage+.93*this.totalNitricUse+this.totalPLoss+this.totalMV}sumValues(t){return t.reduce((t,e)=>t+e.gold_value,0)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(a.b),n.Y36(l.r),n.Y36(u.v),n.Y36(s.qu))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-top-up-gold"]],decls:16,vars:4,consts:[["id","main-div"],[3,"formGroup"],["fxLayoutGap","15px",2,"padding-left","50px"],["fxFlex","10"],["type","text","formControlName","job","matInput","","placeholder","Job Number",1,"p-1",2,"border-radius","5px"],["type","number","formControlName","gold","matInput","","placeholder","Gold",1,"p-1",2,"border-radius","5px"],["fxLayoutGap","15px",2,"text-align","center"],["mat-raised-button","",1,"btn-info",3,"click"],["mat-raised-button","",1,"btn-info",3,"disabled","click"],["mat-raised-button","","color","warn","type","button",3,"click"],[4,"ngIf"],["style","margin-left: 50px;","id","print-job-details",4,"ngIf"],["id","print-job-details",2,"margin-left","50px"],["border","1","cellpadding","8","cellspacing","0"],[4,"ngFor","ngForOf"],[2,"border-top","1px solid black","border-bottom","1px solid black"],["colspan","2",1,"text-center","fw-bold"],[1,"text-end","fw-bold"],["colspan","2",1,"text-end","fw-bold"],[1,"text-end"],["colspan","3"],["colspan","5"]],template:function(t,e){if(1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"form",1),n.TgZ(2,"div",2),n.TgZ(3,"mat-form-field",3),n._UZ(4,"input",4),n.qZA(),n.TgZ(5,"mat-form-field",3),n._UZ(6,"input",5),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"button",7),n.NdJ("click",function(){return e.onSearch()}),n._uU(9,"Search Job"),n.qZA(),n.TgZ(10,"button",8),n.NdJ("click",function(){return e.onSubmit()}),n._uU(11,"Update Topup Gold"),n.qZA(),n.TgZ(12,"button",9),n.NdJ("click",function(){return e.onReset()}),n._uU(13,"Reset"),n.qZA(),n.qZA(),n.YNc(14,d,2,0,"mat-error",10),n.qZA(),n.YNc(15,b,150,87,"div",11),n.qZA()),2&t){let t;n.xp6(1),n.Q6J("formGroup",e.topUpGoldForm),n.xp6(9),n.Q6J("disabled",null!=e.responseMessage),n.xp6(4),n.Q6J("ngIf",(null==(t=e.topUpGoldForm.get("job"))?null:t.hasError("required"))&&(null==(t=e.topUpGoldForm.get("job"))?null:t.touched)),n.xp6(1),n.Q6J("ngIf",e.jobDetails)}},directives:[s._Y,s.JL,s.sg,p.SQ,Z.KE,p.yH,s.Fj,c.Nt,s.JJ,s.u,s.wV,g.lW,o.O5,Z.TO,o.sg],pipes:[o.JJ],styles:["#main-div[_ngcontent-%COMP%]{margin-top:100px;min-height:90vh;margin-left:50}"]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[i.Bz.forChild(q)],i.Bz]}),t})();var U=r(45480),_=r(43220),x=r(67441),v=r(45396),f=r(93738),j=r(86640),O=r(7539),S=r(44981),G=r(72533),L=r(70346),P=r(76627);let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.ez,T,U.q,Z.lN,s.UX,c.c,_.FA,x.LD,v.rP,g.ot,f.QW,j.A0,p.ae,O.p9,s.u5,S.h,G.JX,L.g,P.Ps]]}),t})()},57916:function(t,e,r){r.d(e,{b:function(){return u}});var o=r(5304),i=r(68307),s=r(37716),n=r(5620),a=r(91841),l=r(84889);let u=(()=>{class t{constructor(t,e,r){this.commonService=t,this.http=e,this.errorService=r}saveFineToNinetyTwo(t){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveDalCreation(t){return this.http.post(this.commonService.getAPI()+"/dalCreation",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}savePanCreation(t){return this.http.post(this.commonService.getAPI()+"/panCreation",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveMaterialTransfer(t){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveMaterialFromEmployee(t){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveCashTransactionBetweenEmployee(t){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveMaterialFromOwnerToManager(t){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveMaterialFromManagerToOwner(t){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveNitricToFine(t){return this.http.post(this.commonService.getAPI()+"/nitricToFine",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}addTopUpGold(t,e){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+t+"/"+e,{}).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}saveGpTransactions(t){return this.http.post(this.commonService.getAPI()+"/gpTransactions",t).pipe((0,o.K)(this.errorService.serverError),(0,i.b)(t=>{}))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(n.v),s.LFG(a.eN),s.LFG(l.T))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);