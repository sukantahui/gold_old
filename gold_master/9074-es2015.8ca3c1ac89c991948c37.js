"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[9074],{69074:function(e,t,r){r.r(t),r.d(t,{ReceivedRawMaterialFromEmployeeModule:function(){return N}});var a=r(38583),n=r(63423),o=r(92340),i=r(3679),l=r(88259),s=r.n(l),c=r(37716),g=r(91841),m=r(57916),d=r(5620),u=r(82820),p=r(93738),Z=r(86640),v=r(98295),h=r(49983),f=r(1769),T=r(42542),A=r(65939);function b(e,t){1&e&&(c.TgZ(0,"mat-error"),c._uU(1," Value is required "),c.qZA())}function q(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",19),c._uU(4),c.ALo(5,"number"),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e.rawMaterialName),c.xp6(2),c.hij("",c.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function _(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"mat-card",3),c.TgZ(2,"mat-card-title"),c._uU(3,"Sender Material Balance (Updated)"),c.qZA(),c.TgZ(4,"table",17),c.TgZ(5,"thead",18),c.TgZ(6,"tr"),c.TgZ(7,"th"),c._uU(8,"Material Name"),c.qZA(),c.TgZ(9,"th",19),c._uU(10,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"tbody"),c.YNc(12,q,6,5,"tr",23),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(12),c.Q6J("ngForOf",e.savedResponse.data.sender_material_balance)}}function M(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",19),c._uU(4),c.ALo(5,"number"),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e.rawMaterialName),c.xp6(2),c.hij("",c.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function w(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"mat-divider",15),c.TgZ(2,"h3",4),c._uU(3,"Balance after Transaction"),c.qZA(),c.TgZ(4,"div",1),c.YNc(5,_,13,1,"div",21),c.TgZ(6,"div",16),c.TgZ(7,"mat-card",3),c.TgZ(8,"mat-card-title"),c._uU(9,"Your Material Balance (Updated)"),c.qZA(),c.TgZ(10,"table",17),c.TgZ(11,"thead",18),c.TgZ(12,"tr"),c.TgZ(13,"th"),c._uU(14,"Material Name"),c.qZA(),c.TgZ(15,"th",19),c._uU(16,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"tbody"),c.YNc(18,M,6,5,"tr",23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(5),c.Q6J("ngIf",null==e.savedResponse.data.sender_material_balance?null:e.savedResponse.data.sender_material_balance.length),c.xp6(13),c.Q6J("ngForOf",e.savedResponse.data.receiver_material_balance)}}const x=function(e){return{"table-active":e}};function C(e,t){if(1&e&&(c.TgZ(0,"tr",24),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",19),c._uU(4),c.ALo(5,"number"),c.qZA(),c.qZA()),2&e){const e=t.$implicit,r=c.oxw();let a;c.Q6J("ngClass",c.VKq(6,x,e.rawMaterial.rm_ID==(null==(a=r.materialRecivingForm.get("rm_id"))?null:a.value))),c.xp6(2),c.Oqu(e.rawMaterialName),c.xp6(2),c.hij("",c.xi3(5,3,e.closingBalance,"1.3-3")," gm")}}function y(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",19),c._uU(4),c.ALo(5,"number"),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e.rawMaterialName),c.xp6(2),c.hij("",c.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function O(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"mat-card",3),c.TgZ(2,"mat-card-title"),c._uU(3,"Sender Material Balance"),c.qZA(),c.TgZ(4,"table",17),c.TgZ(5,"thead",18),c.TgZ(6,"tr"),c.TgZ(7,"th"),c._uU(8,"Material Name"),c.qZA(),c.TgZ(9,"th",19),c._uU(10,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"tbody"),c.YNc(12,y,6,5,"tr",23),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(12),c.Q6J("ngForOf",e.senderMaterialBalances)}}function U(e,t){if(1&e&&(c.TgZ(0,"div",29),c.TgZ(1,"mat-card",3),c.TgZ(2,"mat-card-title"),c._uU(3,"Developer Area"),c.qZA(),c.TgZ(4,"mat-tab-group",30),c.TgZ(5,"mat-tab",31),c.TgZ(6,"pre"),c._uU(7),c.ALo(8,"json"),c.qZA(),c.TgZ(9,"pre"),c._uU(10),c.ALo(11,"json"),c.qZA(),c.qZA(),c.TgZ(12,"mat-tab",32),c.TgZ(13,"pre"),c._uU(14),c.ALo(15,"json"),c.qZA(),c.qZA(),c.TgZ(16,"mat-tab",33),c.TgZ(17,"pre"),c._uU(18),c.ALo(19,"json"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(7),c.Oqu(c.lcZ(8,4,e.materialRecivingForm.value)),c.xp6(3),c.Oqu(c.lcZ(11,6,e.user)),c.xp6(4),c.hij("savedResponse=",c.lcZ(15,8,null==e.savedResponse?null:e.savedResponse.data),""),c.xp6(4),c.hij("materialBalances=",c.lcZ(19,10,e.materialBalances),"")}}function P(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",25),c.TgZ(1,"mat-button-toggle-group",26),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().showDeveloperDiv=t}),c.TgZ(2,"mat-button-toggle",27),c._uU(3,"Show Developer Area"),c.qZA(),c.TgZ(4,"mat-button-toggle",27),c._uU(5,"Hide Developer Area"),c.qZA(),c.qZA(),c.YNc(6,U,20,12,"div",28),c.qZA()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngModel",e.showDeveloperDiv),c.xp6(1),c.Q6J("value",!0),c.xp6(2),c.Q6J("value",!1),c.xp6(2),c.Q6J("ngIf",e.showDeveloperDiv)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,r,a,n){this.route=e,this.http=t,this.managerService=r,this.commonservice=a,this.reportService=n,this.isProduction=o.N.production,this.materialBalances=[],this.route.data.subscribe(e=>{this.user=e.materialResolver.user.data,this.resolverValues=e.materialResolver,this.employees=e.materialResolver.employees.data,this.projectDetails=e.materialResolver.projectDetails,this.rawMaterials=e.materialResolver.rawMaterials.data,this.materialBalances=e.materialResolver.materialBalances.data,this.selectableEmployees=this.employees.filter(e=>this.projectDetails.employeeToManagerMaterial.employees.find(t=>t===e.employeeId)),this.selectableMaterials=this.rawMaterials.filter(e=>this.projectDetails.employeeToManagerMaterial.materialsToSend.find(t=>t===e.rmID)),this.materialRecivingForm=new i.cw({outward_employee_id:new i.NI(null,[i.kI.required]),inward_employee_id:new i.NI(this.user.employeeId,[i.kI.required]),rm_id:new i.NI(null,[i.kI.required]),value:new i.NI(0,[i.kI.required])})})}ngOnInit(){}saveMaterialTransfer(){s().fire({title:"Receiving Material from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{!e.value||this.managerService.saveMaterialFromEmployee(this.materialRecivingForm.value).subscribe(e=>{!0===e.status&&(s().fire({timer:2e3,title:"Saved",text:"Transferred successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.savedResponse=e)},e=>{s().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}onEmployeeChange(e){const t=this.materialRecivingForm.get("outward_employee_id").value;t&&this.reportService.getMaterialBalanceByEmployee(t).subscribe(e=>{this.senderMaterialBalances=e.data})}resetForm(){this.materialRecivingForm.reset({outward_employee_id:null,inward_employee_id:this.user.employeeId,rm_id:null,value:0}),this.savedResponse=null,this.senderMaterialBalances=[]}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(n.gz),c.Y36(g.eN),c.Y36(m.b),c.Y36(d.v),c.Y36(u.r))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-received-raw-material-from-employee"]],decls:45,vars:10,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","outward_employee_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"w-100",3,"items"],[1,"w-100"],["type","number","matInput","","formControlName","value","placeholder","Material value",1,"text-end"],[4,"ngIf"],[1,"text-end","d-flex","gap-2"],["mat-stroked-button","","color","warn","type","button",1,"text-right",3,"click"],["mat-stroked-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[1,"my-4"],[1,"col-md-6","col-12","mb-4"],[1,"table","table-hover","table-sm","align-middle","mt-2"],[1,"table-light"],[1,"text-end"],[3,"ngClass",4,"ngFor","ngForOf"],["class","col-md-6 col-12 mb-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"mat-card",3),c.TgZ(4,"mat-card-title",4),c._uU(5,"Material Receiving Form"),c.qZA(),c._uU(6),c.TgZ(7,"form",5),c.TgZ(8,"div",4),c.TgZ(9,"ng-select",6),c.NdJ("change",function(e){return t.onEmployeeChange(e)}),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c._UZ(11,"ng-select",7),c.qZA(),c.TgZ(12,"div",4),c.TgZ(13,"mat-form-field",8),c.TgZ(14,"mat-label"),c._uU(15,"Enter Material Value"),c.qZA(),c._UZ(16,"input",9),c.YNc(17,b,2,0,"mat-error",10),c.qZA(),c.qZA(),c.TgZ(18,"div",11),c.TgZ(19,"button",12),c.NdJ("click",function(){return t.resetForm()}),c._uU(20," Reset "),c.qZA(),c.TgZ(21,"button",13),c.NdJ("click",function(){return t.saveMaterialTransfer()}),c._uU(22," \ud83d\udcbe Save Record "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",14),c.YNc(24,w,19,2,"div",10),c.TgZ(25,"div"),c._UZ(26,"mat-divider",15),c.TgZ(27,"h3",4),c._uU(28,"Balance before Transaction"),c.qZA(),c.TgZ(29,"div",1),c.TgZ(30,"div",16),c.TgZ(31,"mat-card",3),c.TgZ(32,"mat-card-title"),c._uU(33,"Your Material Balance"),c.qZA(),c.TgZ(34,"table",17),c.TgZ(35,"thead",18),c.TgZ(36,"tr"),c.TgZ(37,"th"),c._uU(38,"Material Name"),c.qZA(),c.TgZ(39,"th",19),c._uU(40,"Value"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"tbody"),c.YNc(42,C,6,8,"tr",20),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(43,O,13,1,"div",21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(44,P,7,4,"div",22),c.qZA()),2&e){let e;c.xp6(6),c.hij(" selected rm ",t.materialRecivingForm.get("rm_id").value," "),c.xp6(1),c.Q6J("formGroup",t.materialRecivingForm),c.xp6(2),c.Q6J("items",t.selectableEmployees),c.xp6(2),c.Q6J("items",t.selectableMaterials),c.xp6(6),c.Q6J("ngIf",null==(e=t.materialRecivingForm.get("value"))?null:e.hasError("required")),c.xp6(4),c.Q6J("disabled",!t.materialRecivingForm.valid||t.materialRecivingForm.pristine),c.xp6(3),c.Q6J("ngIf",t.savedResponse),c.xp6(18),c.Q6J("ngForOf",t.materialBalances),c.xp6(1),c.Q6J("ngIf",null==t.senderMaterialBalances?null:t.senderMaterialBalances.length),c.xp6(1),c.Q6J("ngIf",!t.isProduction)}},directives:[p.a8,p.n5,i._Y,i.JL,i.sg,Z.w9,i.JJ,i.u,v.KE,v.hX,i.wV,h.Nt,i.Fj,a.O5,f.d,a.sg,v.TO,a.mk,T.A9,i.On,T.Yi,A.SP,A.uX],pipes:[a.JJ,a.Ts],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f4f6f8}mat-card[_ngcontent-%COMP%]{border-radius:12px!important;border:none!important;background:#fff}mat-card-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600;color:#444}.table[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f1f3f5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#555}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#333}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}ng-select.custom[_ngcontent-%COMP%], ng-select.w-100[_ngcontent-%COMP%]{border-radius:6px;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border:1px solid #d1d5db;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding:6px 10px}.mat-form-field[_ngcontent-%COMP%]{background:white;border-radius:6px;padding:0 6px}.mat-input-element[_ngcontent-%COMP%]{font-size:.95rem}button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.Bz.forChild(S)],n.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.ez,I,i.UX,T.vV,A.Nh,Z.A0,h.c,T.vV,p.QW,i.u5,f.t]]}),e})()},57916:function(e,t,r){r.d(t,{b:function(){return c}});var a=r(5304),n=r(68307),o=r(37716),i=r(5620),l=r(91841),s=r(84889);let c=(()=>{class e{constructor(e,t,r){this.commonService=e,this.http=t,this.errorService=r}saveFineToNinetyTwo(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveDalCreation(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}savePanCreation(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialTransfer(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromEmployee(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveCashTransactionBetweenEmployee(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}cashTransactionsByCurrentUser(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromOwnerToManager(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveMaterialFromManagerToOwner(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveNitricToFine(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}addTopUpGold(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}saveGpTransactions(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,n.b)(e=>{}))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(i.v),o.LFG(l.eN),o.LFG(s.T))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);