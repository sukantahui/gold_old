"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[554],{26554:function(t,e,n){n.r(e),n.d(e,{AgentWiseCustomerReportModule:function(){return P}});var i=n(16274),c=n(65543),s=n(24766),o=n(42741),d=n(75239),u=n(56880),g=n(81608),r=n(39009),a=n(67617),Z=n(19275),l=n(31749);function p(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"a",20),o.NdJ("click",function(){o.CHM(t);const e=o.oxw(),n=e.$implicit,i=e.index;return o.oxw(2).agentSelected(n,i)}),o.TgZ(1,"mat-icon"),o._uU(2,"gps_not_fixed"),o.qZA(),o.qZA()}}function A(t,e){1&t&&(o.TgZ(0,"a",21),o.TgZ(1,"mat-icon"),o._uU(2,"gps_fixed"),o.qZA(),o.qZA())}function q(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",16),o._uU(8),o.ALo(9,"number"),o.qZA(),o.TgZ(10,"td",16),o._uU(11),o.qZA(),o.TgZ(12,"td",17),o.YNc(13,p,3,0,"a",18),o.YNc(14,A,3,0,"a",19),o.qZA(),o.qZA()),2&t){const t=e.$implicit,n=e.index,i=o.oxw(2);o.xp6(2),o.Oqu(n+1),o.xp6(2),o.Oqu(t.agent_id),o.xp6(2),o.Oqu(t.agent_name),o.xp6(2),o.Oqu(o.xi3(9,7,t.gold_due,"1.3")),o.xp6(3),o.Oqu(t.lc_due),o.xp6(2),o.Q6J("ngIf",i.selectedAgentIndex!=n),o.xp6(1),o.Q6J("ngIf",i.selectedAgentIndex==n)}}function x(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"a",20),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).agentSelected(null,-1)}),o.TgZ(1,"mat-icon"),o._uU(2,"gps_not_fixed"),o.qZA(),o.qZA()}}function m(t,e){1&t&&(o.TgZ(0,"a",21),o.TgZ(1,"mat-icon"),o._uU(2,"gps_fixed"),o.qZA(),o.qZA())}function _(t,e){if(1&t&&(o.TgZ(0,"div",13),o.TgZ(1,"h3"),o._uU(2,"Agent List"),o.qZA(),o.TgZ(3,"table",14),o.TgZ(4,"thead"),o.TgZ(5,"tr"),o.TgZ(6,"th"),o._uU(7,"SL"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"Agent ID"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"Agent Name"),o.qZA(),o.TgZ(12,"th"),o._uU(13,"Gold"),o.qZA(),o.TgZ(14,"th"),o._uU(15,"LC"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"tbody"),o.YNc(17,q,15,10,"tr",15),o.qZA(),o.TgZ(18,"tfoot"),o.TgZ(19,"tr"),o._UZ(20,"td"),o._UZ(21,"td"),o.TgZ(22,"td"),o._uU(23,"All Agents"),o.qZA(),o.TgZ(24,"td",16),o._uU(25),o.ALo(26,"number"),o.qZA(),o.TgZ(27,"td",16),o._uU(28),o.qZA(),o.TgZ(29,"td",17),o.YNc(30,x,3,0,"a",18),o.YNc(31,m,3,0,"a",19),o.qZA(),o.qZA(),o._UZ(32,"tfoot"),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(17),o.Q6J("ngForOf",t.agents),o.xp6(8),o.Oqu(o.xi3(26,5,t.agentDues.gold,"1.3")),o.xp6(3),o.Oqu(t.agentDues.lc),o.xp6(2),o.Q6J("ngIf",-1!=t.selectedAgentIndex),o.xp6(1),o.Q6J("ngIf",-1==t.selectedAgentIndex)}}function T(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td",16),o._uU(10),o.qZA(),o.TgZ(11,"td",16),o._uU(12),o.ALo(13,"number"),o.qZA(),o.TgZ(14,"td",16),o._uU(15),o.qZA(),o.TgZ(16,"td",16),o._uU(17),o.ALo(18,"number"),o.qZA(),o.TgZ(19,"td",16),o._uU(20),o.qZA(),o.qZA()),2&t){const t=e.$implicit,n=e.index;o.xp6(2),o.Oqu(n+1),o.xp6(2),o.Oqu(t.tr_date),o.xp6(2),o.Oqu(t.particulars),o.xp6(2),o.Oqu(t.reference),o.xp6(2),o.Oqu(t.billed_qty),o.xp6(2),o.Oqu(o.xi3(13,9,t.op_gold_due+t.billed_gold+t.received_gold,"1.3")),o.xp6(3),o.Oqu(t.op_lc_due+t.billed_lc+t.received_lc),o.xp6(2),o.Oqu(o.xi3(18,12,t.current_gold_due,"1.3")),o.xp6(3),o.Oqu(t.current_lc_due)}}function f(t,e){if(1&t&&(o.TgZ(0,"mat-card",22),o.TgZ(1,"mat-card-content"),o.TgZ(2,"button",23),o.TgZ(3,"mat-icon"),o._uU(4,"print"),o.qZA(),o.qZA(),o.TgZ(5,"div",24),o.TgZ(6,"h3"),o._uU(7),o.qZA(),o.TgZ(8,"table",25),o.TgZ(9,"thead"),o.TgZ(10,"tr"),o.TgZ(11,"th"),o._uU(12,"SL"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Date"),o.qZA(),o.TgZ(15,"th"),o._uU(16,"Particulars"),o.qZA(),o.TgZ(17,"th"),o._uU(18,"Reference"),o.qZA(),o.TgZ(19,"th"),o._uU(20,"Qty"),o.qZA(),o.TgZ(21,"th"),o._uU(22,"Gold"),o.qZA(),o.TgZ(23,"th"),o._uU(24,"LC"),o.qZA(),o.TgZ(25,"th"),o._uU(26,"Gold Balance"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"LC Balance"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(29,"tbody"),o.YNc(30,T,21,15,"tr",15),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Q6J("useExistingCss",!0),o.xp6(5),o.hij("Receipt and Payment of ",t.selectedCustomer.cust_name,""),o.xp6(23),o.Q6J("ngForOf",t.customerReceiptPayment)}}function h(t,e){if(1&t&&(o.TgZ(0,"h3"),o._uU(1),o.qZA()),2&t){const t=o.oxw(2);o.xp6(1),o.hij("Customers of ",t.selectedAgent.agent_name,"")}}function b(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"a",20),o.NdJ("click",function(){o.CHM(t);const e=o.oxw(),n=e.$implicit,i=e.index;return o.oxw(2).customerSelected(n,i)}),o.TgZ(1,"mat-icon"),o._uU(2,"gps_not_fixed"),o.qZA(),o.qZA()}}function U(t,e){1&t&&(o.TgZ(0,"a",21),o.TgZ(1,"mat-icon"),o._uU(2,"gps_fixed"),o.qZA(),o.qZA())}function v(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td",16),o._uU(10),o.ALo(11,"number"),o.qZA(),o.TgZ(12,"td",16),o._uU(13),o.qZA(),o.TgZ(14,"td",17),o.YNc(15,b,3,0,"a",18),o.YNc(16,U,3,0,"a",19),o.qZA(),o.qZA()),2&t){const t=e.$implicit,n=e.index,i=o.oxw(2);o.xp6(2),o.Oqu(n+1),o.xp6(2),o.Oqu(t.cust_id),o.xp6(2),o.Oqu(t.cust_name),o.xp6(2),o.Oqu(t.city),o.xp6(2),o.Oqu(o.xi3(11,8,t.gold_due,"1.3")),o.xp6(3),o.Oqu(t.lc_due),o.xp6(2),o.Q6J("ngIf",i.selectedCustomerIndex!=n),o.xp6(1),o.Q6J("ngIf",i.selectedCustomerIndex==n)}}function y(t,e){if(1&t&&(o.TgZ(0,"div",26),o.YNc(1,h,2,1,"h3",27),o.TgZ(2,"table",28),o.TgZ(3,"thead"),o.TgZ(4,"tr"),o.TgZ(5,"th"),o._uU(6,"SL"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Customer ID"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Name"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"City"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Gold"),o.qZA(),o.TgZ(15,"th"),o._uU(16,"LC"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"tbody"),o.YNc(18,v,17,11,"tr",15),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.selectedAgent),o.xp6(17),o.Q6J("ngForOf",t.customers)}}function C(t,e){if(1&t&&(o.TgZ(0,"div",29),o.TgZ(1,"div",30),o.TgZ(2,"div",31),o.TgZ(3,"div",32),o.TgZ(4,"pre"),o._uU(5),o.ALo(6,"json"),o.qZA(),o.qZA(),o._UZ(7,"div",33),o.TgZ(8,"div",32),o._uU(9,"3"),o.qZA(),o.TgZ(10,"div",32),o._uU(11,"4"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(5),o.hij("                    selectedAgentIndex = ",o.lcZ(6,1,t.selectedAgentIndex),"\n                ")}}const I=[{path:"",component:(()=>{class t{constructor(t,e){this.agentService=t,this.commonService=e,this.isProduction=s.N.production,this.selectedAgentIndex=-2,this.selectedCustomerIndex=-1}ngOnInit(){this.agentService.getAgentsWithDues().subscribe(t=>{this.agents=t.data;const e=this.agents.reduce((t,e)=>t+e.lc_due,0),n=this.agents.reduce((t,e)=>t+e.gold_due,0);this.agentDues={gold:n,lc:e}})}agentSelected(t,e){this.selectedCustomerIndex=-1,-1==e?(this.selectedAgentIndex=-1,this.selectedAgent=null,this.agentService.getCustomersWithDues().subscribe(t=>{this.customers=t.data,this.customerReceiptPayment=null})):(this.selectedAgentIndex=e,this.selectedAgent=t,this.agentService.getCustomersWithDuesByAgent(t.agent_id).subscribe(t=>{this.customers=t.data,this.customerReceiptPayment=null}))}customerSelected(t,e){this.agentService.getCustomerReceiptPayment(t.cust_id).subscribe(n=>{this.customerReceiptPayment=n.data,this.selectedCustomer=t,this.selectedCustomerIndex=e})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.R),o.Y36(u.v))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-agent-wise-customer-report"]],decls:28,vars:6,consts:[["id","agent-wise-customer-report-div"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","40",1,"child-1"],["id","agent-card",1,"example-card"],["mat-button","","color","primary","printSectionId","agent-list-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["mat-button","","color","primary",3,"click"],["id","agent-list-table","class","table-responsive",4,"ngIf"],["fxFlex","60",1,"child-2"],["class","example-card","id","customer-receipt-payment-div",4,"ngIf"],[1,"example-card"],["mat-button","","color","primary","printSectionId","customer-list-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["id","customer-list-table","class","table-responsive",4,"ngIf"],["id","developer-div",4,"ngIf"],["id","agent-list-table",1,"table-responsive"],["id","printable-agent-table",1,"table","table-bodered","table-condensed"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"text-right","noprint"],[3,"routerLink","click",4,"ngIf"],[3,"routerLink",4,"ngIf"],[3,"routerLink","click"],[3,"routerLink"],["id","customer-receipt-payment-div",1,"example-card"],["mat-button","","color","primary","printSectionId","customer-receipt-payment-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["id","customer-receipt-payment-table",1,"table-responsive"],["id","printable-receipt-payment-table",1,"table","table-bodered","table-condensed"],["id","customer-list-table",1,"table-responsive"],[4,"ngIf"],["id","printable-customer-dues-table",1,"table","table-bodered","table-condensed"],["id","developer-div"],[1,"outerContainer"],["fxLayout","row","fxLayoutGap","1px","fxLayout.sm","column",1,"container"],["fxLayoutAlign","center center"],["fxFlex","2 1 auto","fxLayoutAlign","center center"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"mat-card",3),o.TgZ(4,"mat-card-header"),o.TgZ(5,"mat-card-subtitle"),o.TgZ(6,"button",4),o.TgZ(7,"mat-icon"),o._uU(8,"print"),o.qZA(),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return e.commonService.exportToExcel("printable-agent-table","all_agents.xlsx",5)}),o.TgZ(10,"mat-icon"),o._uU(11,"cloud_download"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"mat-card-content"),o.YNc(13,_,33,8,"div",6),o.qZA(),o.qZA(),o.qZA(),o.TgZ(14,"div",7),o.YNc(15,f,31,3,"mat-card",8),o.TgZ(16,"mat-card",9),o.TgZ(17,"mat-card-header"),o.TgZ(18,"mat-card-subtitle"),o.TgZ(19,"button",10),o.TgZ(20,"mat-icon"),o._uU(21,"print"),o.qZA(),o.qZA(),o.TgZ(22,"button",5),o.NdJ("click",function(){return e.commonService.exportToExcel("printable-customer-dues-table","customers.xlsx",6)}),o.TgZ(23,"mat-icon"),o._uU(24,"cloud_download"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"mat-card-content"),o.YNc(26,y,19,2,"div",11),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(27,C,12,3,"div",12)),2&t&&(o.xp6(6),o.Q6J("useExistingCss",!0),o.xp6(7),o.Q6J("ngIf",e.agents),o.xp6(2),o.Q6J("ngIf",e.customerReceiptPayment),o.xp6(4),o.Q6J("useExistingCss",!0),o.xp6(7),o.Q6J("ngIf",e.customers),o.xp6(1),o.Q6J("ngIf",!e.isProduction))},directives:[g.xw,g.yH,r.a8,r.dk,r.$j,a.lW,Z.I,l.Hw,r.dn,i.O5,i.sg,c.yS,g.SQ,g.Wh],pipes:[i.JJ,i.Ts],styles:["@media print{.noprint[_ngcontent-%COMP%]{visibility:hidden}}#working-job-report-div[_ngcontent-%COMP%]{min-height:100vh;width:100vw;padding-left:35px;padding-right:65px}#developer-div[_ngcontent-%COMP%]{padding-left:35px;padding-right:65px}#agent-card[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#f5e7d6,#f3f3c4)}#customer-receipt-payment-div[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#e9e7f8,#f3e3c7)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:unset}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),t})();var w=n(21499),J=n(93324),S=n(19018),k=n(94477),L=n(73454);let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.ez,O,r.QW,w.A0,g.ae,l.Ps,J.u5,J.UX,S.c,a.ot,k.uH,L.pm,Z.K]]}),t})()}}]);