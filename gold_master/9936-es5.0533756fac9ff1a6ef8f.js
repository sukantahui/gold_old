!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,n=void 0,"symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?n:String(n)),r)}var o,n}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[9936],{39936:function(t,r,o){o.r(r),o.d(r,{LabourChargeModule:function(){return j}});var n=o(38583),c=o(63423),a=o(92340),u=o(3679),l=o(88259),s=o.n(l),d=o(37716),p=o(52541),m=o(82820),g=o(30535),Z=o(86640),f=o(82613),v=o(98295),h=o(49983),b=o(51095),_=o(95913),q=o(76627),A=o(26584),T=o(33013);function x(e,t){if(1&e&&(d.TgZ(0,"div",27),d.TgZ(1,"span"),d._uU(2),d.qZA(),d._uU(3," and "),d.TgZ(4,"span"),d._uU(5),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(2),d.hij(" Gold Due: ",i.customerDues.gold_due,""),d.xp6(3),d.hij(" LC Due: ",i.customerDues.lc_due,"")}}function y(e,t){1&e&&(d.TgZ(0,"mat-form-field",28),d.TgZ(1,"mat-label"),d._uU(2,"Enter Cheque Details"),d.qZA(),d._UZ(3,"textarea",29),d.qZA())}function R(e,t){if(1&e&&(d.TgZ(0,"div",30),d._uU(1),d._UZ(2,"br"),d._uU(3),d._UZ(4,"br"),d._uU(5),d._UZ(6,"br"),d._uU(7),d._UZ(8,"br"),d._uU(9),d._UZ(10,"br"),d.TgZ(11,"table"),d.TgZ(12,"tbody"),d.TgZ(13,"tr",31),d.TgZ(14,"td"),d._uU(15,"Previous Dues: "),d.qZA(),d.TgZ(16,"td",32),d._uU(17),d.qZA(),d.qZA(),d.TgZ(18,"tr"),d.TgZ(19,"td"),d._uU(20,"Less: Now refund"),d.qZA(),d.TgZ(21,"td",32),d._uU(22),d.qZA(),d.qZA(),d.TgZ(23,"tr",33),d.TgZ(24,"td"),d._uU(25,"Current Due "),d.qZA(),d.TgZ(26,"td",32),d._uU(27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(1),d.hij(" ID: ",i.afterSaveResponse.lc_receipt.lc_receipt_no,""),d.xp6(2),d.hij(" From ",i.afterSaveResponse.customer.mailing_name,""),d.xp6(2),d.hij(" of ",i.afterSaveResponse.customer.city,""),d.xp6(2),d.hij(" through ",i.afterSaveResponse.agent.agent_name,""),d.xp6(2),d.hij(" Received by ",i.afterSaveResponse.employee.emp_name,""),d.xp6(8),d.Oqu(i.afterSaveResponse.lc_due.lc_due_before),d.xp6(5),d.Oqu(i.afterSaveResponse.lc_receipt.amount),d.xp6(5),d.Oqu(i.afterSaveResponse.lc_due.lc_due_before-i.afterSaveResponse.lc_receipt.amount)}}function w(e,t){1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"th"),d._uU(2,"Date"),d.qZA(),d.TgZ(3,"th"),d._uU(4,"Receipt No."),d.qZA(),d.TgZ(5,"th"),d._uU(6,"Amount"),d.qZA(),d.qZA())}function S(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",34),d.TgZ(4,"a",35),d.NdJ("click",function(){var e=d.CHM(i).$implicit;return d.oxw().onLcReceiptSelected(e)}),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"td",34),d._uU(7),d.qZA(),d.qZA()}if(2&e){var r=t.$implicit;d.xp6(2),d.hij(" ",r.lc_receipt_date," "),d.xp6(3),d.Oqu(r.lc_receipt_no),d.xp6(2),d.hij(" ",r.amount," ")}}function C(e,t){if(1&e&&(d.TgZ(0,"div",36),d.TgZ(1,"div",0),d.TgZ(2,"div",37),d.TgZ(3,"pre"),d._uU(4),d.ALo(5,"json"),d.qZA(),d.qZA(),d.TgZ(6,"div",37),d.TgZ(7,"pre"),d._uU(8),d.ALo(9,"json"),d.qZA(),d.qZA(),d.TgZ(10,"div",37),d.TgZ(11,"pre"),d._uU(12),d.ALo(13,"json"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.hij("                LcReceiptForm.value=",d.lcZ(5,3,i.lcReceiptForm.value),"\n            "),d.xp6(4),d.hij("                customers= ",d.lcZ(9,5,i.customers),"\n            "),d.xp6(4),d.hij("                agents= ",d.lcZ(13,7,i.agents),"\n            ")}}var U,k=[{path:"",component:(U=function(){function t(i,r,o,c){var l=this;e(this,t),this.route=i,this.customerService=r,this.reportService=o,this.receiptService=c,this.afterSaveResponse=null,this.isProduction=a.N.production,this.showChequeDetails=!1,this.printDivStyle={table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},th:{border:"1px  solid black",fontSize:"small"},td:{border:"1px  solid black",fontSize:"small"}},this.route.data.subscribe(function(e){l.agents=e.customerReceiptResolver.agents.data,l.customers=e.customerReceiptResolver.customers.data});var s=new Date,d=(0,n.p6)(s,"yyyy-MM-dd","en");this.lcReceiptForm=new u.cw({lc_receipt_date:new u.NI(d),agent_id:new u.NI(null,[u.kI.required]),cust_id:new u.NI(null,[u.kI.required]),mode:new u.NI("1",[u.kI.required]),emp_id:new u.NI(72,[u.kI.required]),amount:new u.NI(null,[u.kI.required]),discount:new u.NI(0),cheque_details:new u.NI(null)})}return i(t,[{key:"ngOnInit",value:function(){this.onPaymentModeValueChanged()}},{key:"agentSelected",value:function(){}},{key:"onLcReceiptFormValueChange",value:function(){this.lcReceiptForm.valueChanges.subscribe(function(e){console.log("value changed",e)})}},{key:"onPaymentModeValueChanged",value:function(){var e=this;this.lcReceiptForm.get("mode").valueChanges.subscribe(function(t){e.showChequeDetails="2"===t})}},{key:"onCustomerSelected",value:function(e){var t=this;this.selectedCustomer=e.cust_id,this.afterSaveResponse=null,this.customerService.getCustomerDues(e.cust_id).subscribe(function(e){console.log("value changed",e.data),t.customerDues=e.data}),this.receiptService.getLcReceiptsByCustomer(this.selectedCustomer).subscribe(function(e){t.lcReceipts=e.data})}},{key:"saveLcReceipt",value:function(){var e=this;this.receiptService.saveLcReceipt(this.lcReceiptForm.value).subscribe(function(t){!0===t.status&&(s().fire({title:"Done",text:"LC Received added successfully",icon:"success"}),e.customerDues.lc_due=e.customerDues.lc_due-e.lcReceiptForm.value.amount,console.log(t.data),e.afterSaveResponse=t.data,e.lcReceiptForm.markAsPristine())},function(e){s().fire({title:"Done",text:"Error saving LC",icon:"error"})})}},{key:"resetForm",value:function(){this.lcReceiptForm.reset(),this.customerDues=null}},{key:"onLcReceiptSelected",value:function(e){var t=this;console.log(e.lc_receipt_no),this.receiptService.getLcReceiptById(e.lc_receipt_no).subscribe(function(e){t.afterSaveResponse=e.data})}}]),t}(),U.\u0275fac=function(e){return new(e||U)(d.Y36(c.gz),d.Y36(p.v),d.Y36(m.r),d.Y36(g.V))},U.\u0275cmp=d.Xpm({type:U,selectors:[["app-labour-charge"]],decls:40,vars:9,consts:[[1,"d-flex","flex-row"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","agent_name","bindValue","agent_id","formControlName","agent_id","placeholder","Select Agent",1,"custom",3,"items","change"],["bindLabel","cust_name","bindValue","cust_id","formControlName","cust_id","placeholder","Select Customer",1,"custom",3,"items","change"],["class","border-glow",4,"ngIf"],["aria-label","Select an option","formControlName","mode",1,"payment-mode"],["value","1"],["value","2"],[1,"col-12"],["class","example-full-width  col-12",4,"ngIf"],[1,"example-full-width"],["type","number","matInput","","formControlName","amount","placeholder","LC Amount",1,"text-right"],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"click"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[1,"p-2","col-8"],[2,"text-align","right"],["mat-button","","color","primary","styleSheetFile","assets/print_css/lc_receipt_print.css","printSectionId","lc-receipt-report","ngxPrint",""],["id","lc-receipt-report",4,"ngIf"],[3,"value"],["myTab",""],["pTemplate","header"],["pTemplate","body"],["id","developer-div",4,"ngIf"],[1,"border-glow"],[1,"example-full-width","col-12"],["matInput","","aria-placeholder","Cheque number and Bank","formControlName","cheque_details","placeholder","Cheque No. Bank Name"],["id","lc-receipt-report"],[2,"border-top","1px solid black"],["align","right"],[2,"border-top","1px solid black","border-bottom","1px double black"],[1,"text-right"],[3,"routerLink","click"],["id","developer-div"],[1,"p-2"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"form",2),d.TgZ(3,"ng-select",3),d.NdJ("change",function(){return t.agentSelected()}),d.qZA(),d.TgZ(4,"ng-select",4),d.NdJ("change",function(e){return t.onCustomerSelected(e)}),d.qZA(),d.YNc(5,x,6,2,"div",5),d.TgZ(6,"div"),d.TgZ(7,"mat-radio-group",6),d.TgZ(8,"mat-radio-button",7),d._uU(9,"Cash"),d.qZA(),d.TgZ(10,"mat-radio-button",8),d._uU(11,"Cheque"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"div",9),d.YNc(13,y,4,0,"mat-form-field",10),d.qZA(),d.TgZ(14,"div"),d.TgZ(15,"mat-form-field",11),d.TgZ(16,"mat-label"),d._uU(17,"Enter LC Received"),d.qZA(),d._UZ(18,"input",12),d.qZA(),d.qZA(),d.TgZ(19,"div",13),d.TgZ(20,"div",14),d.TgZ(21,"div",15),d.TgZ(22,"button",16),d.NdJ("click",function(){return t.resetForm()}),d._uU(23,"Reset"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"div",14),d.TgZ(25,"div",15),d.TgZ(26,"button",17),d.NdJ("click",function(){return t.saveLcReceipt()}),d._uU(27,"Save Record"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"div",18),d.TgZ(29,"div",19),d.TgZ(30,"button",20),d.TgZ(31,"mat-icon"),d._uU(32,"print"),d.qZA(),d.qZA(),d.qZA(),d.YNc(33,R,28,8,"div",21),d.TgZ(34,"div"),d.TgZ(35,"p-table",22,23),d.YNc(37,w,7,0,"ng-template",24),d.YNc(38,S,8,3,"ng-template",25),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(39,C,14,9,"div",26)),2&e&&(d.xp6(2),d.Q6J("formGroup",t.lcReceiptForm),d.xp6(1),d.Q6J("items",t.agents),d.xp6(1),d.Q6J("items",t.customers),d.xp6(1),d.Q6J("ngIf",t.customerDues),d.xp6(8),d.Q6J("ngIf",t.showChequeDetails),d.xp6(13),d.Q6J("disabled",!t.lcReceiptForm.valid||t.lcReceiptForm.pristine),d.xp6(7),d.Q6J("ngIf",t.afterSaveResponse),d.xp6(2),d.Q6J("value",t.lcReceipts),d.xp6(4),d.Q6J("ngIf",!t.isProduction&&!1))},directives:[u._Y,u.JL,u.sg,Z.w9,u.JJ,u.u,n.O5,f.VQ,f.U0,v.KE,v.hX,u.wV,h.Nt,u.Fj,b.lW,_.I,q.Hw,A.iA,T.jx,c.yS],pipes:[n.Ts],styles:[".payment-mode[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.border-glow[_ngcontent-%COMP%]{padding:2px;border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540;border-radius:5px;margin-bottom:5px}"]}),U)}],N=function(){var t=i(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),t}(),I=o(80291),j=function(){var t=i(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[n.ez,N,u.UX,Z.A0,f.Fk,v.lN,h.c,b.ot,q.Ps,I.pm,_.K,A.U$]]}),t}()}}])}();