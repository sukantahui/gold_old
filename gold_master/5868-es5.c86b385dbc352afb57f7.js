!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,n=void 0,"symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?n:String(n)),r)}var i,n}function o(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[5868],{45868:function(e,r,i){i.r(r),i.d(r,{TopUpGoldModule:function(){return F}});var n=i(38583),a=i(63423),u=i(3679),s=i(37716),l=i(57916),c=i(82820),p=i(5620),Z=i(35618),g=i(98295),d=i(49983),h=i(51095);function m(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Job number is required "),s.qZA())}function b(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td",19),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.qZA()),2&t){var o=e.$implicit;s.xp6(2),s.Oqu(o.transaction_text),s.xp6(2),s.Oqu(o.comment),s.xp6(2),s.Oqu(o.gold_value),s.xp6(2),s.Oqu(o.timestamp)}}function A(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td",19),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.qZA()),2&t){var o=e.$implicit;s.xp6(2),s.Oqu(o.transaction_text),s.xp6(2),s.Oqu(o.comment),s.xp6(2),s.Oqu(o.gold_value),s.xp6(2),s.Oqu(o.timestamp)}}function f(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td",19),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.qZA()),2&t){var o=e.$implicit;s.xp6(2),s.Oqu(o.transaction_text),s.xp6(2),s.Oqu(o.comment),s.xp6(2),s.Oqu(o.gold_value),s.xp6(2),s.Oqu(o.timestamp)}}function q(t,e){if(1&t&&(s.TgZ(0,"div",12),s.TgZ(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"h3"),s._uU(4),s.qZA(),s.TgZ(5,"table",13),s.TgZ(6,"thead"),s.TgZ(7,"tr"),s.TgZ(8,"th"),s._uU(9,"Transaction"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Comment"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Value (gms)"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Timestamp"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"tbody"),s.YNc(17,b,9,4,"tr",14),s.TgZ(18,"tr",15),s.TgZ(19,"td",16),s._uU(20,"Gold Used"),s.qZA(),s.TgZ(21,"td",17),s._uU(22),s.ALo(23,"number"),s.qZA(),s.qZA(),s.YNc(24,A,9,4,"tr",14),s.TgZ(25,"tr",15),s.TgZ(26,"td",16),s._uU(27,"Pan Used"),s.qZA(),s.TgZ(28,"td",17),s._uU(29),s.ALo(30,"number"),s.qZA(),s.qZA(),s.YNc(31,f,9,4,"tr",14),s.TgZ(32,"tr",15),s.TgZ(33,"td",18),s._uU(34,"Nitric Used"),s.qZA(),s.TgZ(35,"td",17),s._uU(36),s.ALo(37,"number"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(38,"h3"),s._uU(39,"Final Calculation"),s.qZA(),s.TgZ(40,"table",13),s.TgZ(41,"thead"),s.TgZ(42,"tr"),s.TgZ(43,"td"),s._uU(44,"Sl"),s.qZA(),s.TgZ(45,"td"),s._uU(46,"Subject"),s.qZA(),s.TgZ(47,"td"),s._uU(48,"Value"),s.qZA(),s.TgZ(49,"td"),s._uU(50,"Job%"),s.qZA(),s.TgZ(51,"td"),s._uU(52,"Bill%"),s.qZA(),s.TgZ(53,"td"),s._uU(54,"Bill Value"),s.qZA(),s.TgZ(55,"td"),s._uU(56,"Fine 92%"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(57,"tbody"),s.TgZ(58,"tr"),s.TgZ(59,"th"),s._uU(60,"1"),s.qZA(),s.TgZ(61,"td"),s._uU(62,"Gold Used"),s.qZA(),s.TgZ(63,"td"),s._uU(64),s.ALo(65,"number"),s.qZA(),s.TgZ(66,"td"),s._uU(67,"100%"),s.qZA(),s.TgZ(68,"td"),s._uU(69,"100%"),s.qZA(),s.TgZ(70,"td"),s._uU(71),s.ALo(72,"number"),s.qZA(),s.TgZ(73,"td",19),s._uU(74),s.ALo(75,"number"),s.qZA(),s.qZA(),s.TgZ(76,"tr"),s.TgZ(77,"th"),s._uU(78,"2"),s.qZA(),s.TgZ(79,"td"),s._uU(80,"Pan Used"),s.qZA(),s.TgZ(81,"td"),s._uU(82),s.ALo(83,"number"),s.qZA(),s.TgZ(84,"td"),s._uU(85,"100%"),s.qZA(),s.TgZ(86,"td"),s._uU(87,"40%"),s.qZA(),s.TgZ(88,"td"),s._uU(89),s.ALo(90,"number"),s.qZA(),s.TgZ(91,"td",19),s._uU(92),s.ALo(93,"number"),s.qZA(),s.qZA(),s.TgZ(94,"tr"),s.TgZ(95,"th"),s._uU(96,"3"),s.qZA(),s.TgZ(97,"td"),s._uU(98,"Nitric Used"),s.qZA(),s.TgZ(99,"td"),s._uU(100),s.ALo(101,"number"),s.qZA(),s.TgZ(102,"td"),s._uU(103,"93%"),s.qZA(),s.TgZ(104,"td"),s._uU(105,"100%"),s.qZA(),s.TgZ(106,"td"),s._uU(107),s.ALo(108,"number"),s.qZA(),s.TgZ(109,"td",19),s._uU(110),s.ALo(111,"number"),s.qZA(),s.qZA(),s.TgZ(112,"tr"),s.TgZ(113,"th"),s._uU(114,"4"),s.qZA(),s.TgZ(115,"td"),s._uU(116,"P Loss"),s.qZA(),s.TgZ(117,"td",20),s._uU(118),s.ALo(119,"number"),s.qZA(),s.TgZ(120,"td"),s._uU(121),s.ALo(122,"number"),s.qZA(),s.TgZ(123,"td",19),s._uU(124),s.ALo(125,"number"),s.qZA(),s.qZA(),s.TgZ(126,"tr"),s.TgZ(127,"th"),s._uU(128,"5"),s.qZA(),s.TgZ(129,"td"),s._uU(130,"MV"),s.qZA(),s.TgZ(131,"td",20),s._uU(132),s.ALo(133,"number"),s.qZA(),s.TgZ(134,"td"),s._uU(135),s.ALo(136,"number"),s.qZA(),s.TgZ(137,"td",19),s._uU(138),s.ALo(139,"number"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(140,"tfoot"),s.TgZ(141,"tr",15),s.TgZ(142,"th",21),s._uU(143,"Final Bill Calculated"),s.qZA(),s.TgZ(144,"th"),s._uU(145),s.ALo(146,"number"),s.qZA(),s.TgZ(147,"th",19),s._uU(148),s.ALo(149,"number"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var o=s.oxw();s.xp6(2),s.hij("JOB Details for ID: ",o.jobDetails.job.job_id,""),s.xp6(2),s.hij("Bill No . ",o.jobDetails.bill_no,""),s.xp6(13),s.Q6J("ngForOf",o.jobDetails.gold),s.xp6(5),s.hij(" ",s.xi3(23,27,o.totalGoldUse,"1.3-3"),""),s.xp6(2),s.Q6J("ngForOf",o.jobDetails.pan),s.xp6(5),s.hij(" ",s.xi3(30,30,o.totalPanUse,"1.3-3"),""),s.xp6(2),s.Q6J("ngForOf",o.jobDetails.nitric),s.xp6(5),s.hij(" ",s.xi3(37,33,o.totalNitricUse,"1.3-3"),""),s.xp6(28),s.Oqu(s.xi3(65,36,o.totalGoldUse,"1.3-3")),s.xp6(7),s.Oqu(s.xi3(72,39,o.totalGoldUse,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(75,42,.92*o.totalGoldUse,"1.3-3")),s.xp6(8),s.Oqu(s.xi3(83,45,o.totalPanUse,"1.3-3")),s.xp6(7),s.Oqu(s.xi3(90,48,o.totalPanUse*o.jobDetails.rm_bangle_pan.bill_percentage,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(93,51,o.totalPanUse*o.jobDetails.rm_bangle_pan.bill_percentage*.92,"1.3-3")),s.xp6(8),s.Oqu(s.xi3(101,54,o.totalNitricUse,"1.3-3")),s.xp6(7),s.Oqu(s.xi3(108,57,o.totalNitricUse*o.jobDetails.rm_nitric.job_percentage,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(111,60,o.totalNitricUse*o.jobDetails.rm_nitric.job_percentage*.92,"1.3-3")),s.xp6(8),s.AsE("",s.xi3(119,63,o.jobDetails.job.p_loss,"1.3-3")," X ",o.jobDetails.job.pieces," pcs "),s.xp6(3),s.Oqu(s.xi3(122,66,o.totalPLoss,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(125,69,.92*o.totalPLoss,"1.3-3")),s.xp6(8),s.AsE("",s.xi3(133,72,o.jobDetails.job.markup_value,"1.3-3")," X ",o.jobDetails.job.pieces," pcs "),s.xp6(3),s.Oqu(s.xi3(136,75,o.totalMV,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(139,78,.92*o.totalMV,"1.3-3")),s.xp6(7),s.Oqu(s.xi3(146,81,o.finalGini,"1.3-3")),s.xp6(3),s.Oqu(s.xi3(149,84,.92*o.finalGini,"1.3-3"))}}var T,v=[{path:"",component:(T=function(){function e(o,r,i,n){t(this,e),this.managerService=o,this.reportService=r,this.commonService=i,this.fb=n,this.responseMessage=null,this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0,this.topUpGoldForm=this.fb.group({job:[null,u.kI.required],gold:[0,u.kI.required]})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this,e=this.topUpGoldForm.value,o=e.job,r=e.gold;this.managerService.addTopUpGold(o,r).subscribe({next:function(e){t.responseMessage=e.data[0]}}),this.loadJobDetails(o)}},{key:"onReset",value:function(){this.topUpGoldForm.reset({job:null,gold:0}),this.responseMessage=null,this.resetTotals()}},{key:"onSearch",value:function(){var t=this.topUpGoldForm.value.job;t&&this.loadJobDetails(t)}},{key:"loadJobDetails",value:function(t){var e=this;this.reportService.getJobDetailsforOwner(t).subscribe({next:function(t){e.jobDetails=t.data,e.calculateTotals()},error:function(t){alert("Error: "+t.error.message)}})}},{key:"resetTotals",value:function(){this.totalGoldUse=0,this.totalPanUse=0,this.totalNitricUse=0,this.totalPLoss=0,this.totalMV=0,this.finalGini=0}},{key:"calculateTotals",value:function(){this.totalGoldUse=this.sumValues(this.jobDetails.gold),this.totalPanUse=this.sumValues(this.jobDetails.pan),this.totalNitricUse=this.sumValues(this.jobDetails.nitric),this.totalPLoss=this.jobDetails.job.p_loss*this.jobDetails.job.pieces,this.totalMV=this.jobDetails.job.markup_value*this.jobDetails.job.pieces,this.finalGini=this.totalGoldUse+this.totalPanUse*this.jobDetails.rm_bangle_pan.bill_percentage+.93*this.totalNitricUse+this.totalPLoss+this.totalMV}},{key:"sumValues",value:function(t){return t.reduce(function(t,e){return t+e.gold_value},0)}}]),e}(),T.\u0275fac=function(t){return new(t||T)(s.Y36(l.b),s.Y36(c.r),s.Y36(p.v),s.Y36(u.qu))},T.\u0275cmp=s.Xpm({type:T,selectors:[["app-top-up-gold"]],decls:16,vars:4,consts:[["id","main-div"],[3,"formGroup"],["fxLayoutGap","15px",2,"padding-left","50px"],["fxFlex","10"],["type","text","formControlName","job","matInput","","placeholder","Job Number",1,"p-1",2,"border-radius","5px"],["type","number","formControlName","gold","matInput","","placeholder","Gold",1,"p-1",2,"border-radius","5px"],["fxLayoutGap","15px",2,"text-align","center"],["mat-raised-button","",1,"btn-info",3,"click"],["mat-raised-button","",1,"btn-info",3,"disabled","click"],["mat-raised-button","","color","warn","type","button",3,"click"],[4,"ngIf"],["style","margin-left: 50px;","id","print-job-details",4,"ngIf"],["id","print-job-details",2,"margin-left","50px"],["border","1","cellpadding","8","cellspacing","0"],[4,"ngFor","ngForOf"],[2,"border-top","1px solid black","border-bottom","1px solid black"],["colspan","2",1,"text-center","fw-bold"],[1,"text-end","fw-bold"],["colspan","2",1,"text-end","fw-bold"],[1,"text-end"],["colspan","3"],["colspan","5"]],template:function(t,e){var o;1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"form",1),s.TgZ(2,"div",2),s.TgZ(3,"mat-form-field",3),s._UZ(4,"input",4),s.qZA(),s.TgZ(5,"mat-form-field",3),s._UZ(6,"input",5),s.qZA(),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"button",7),s.NdJ("click",function(){return e.onSearch()}),s._uU(9,"Search Job"),s.qZA(),s.TgZ(10,"button",8),s.NdJ("click",function(){return e.onSubmit()}),s._uU(11,"Update Topup Gold"),s.qZA(),s.TgZ(12,"button",9),s.NdJ("click",function(){return e.onReset()}),s._uU(13,"Reset"),s.qZA(),s.qZA(),s.YNc(14,m,2,0,"mat-error",10),s.qZA(),s.YNc(15,q,150,87,"div",11),s.qZA()),2&t&&(s.xp6(1),s.Q6J("formGroup",e.topUpGoldForm),s.xp6(9),s.Q6J("disabled",null!=e.responseMessage),s.xp6(4),s.Q6J("ngIf",(null==(o=e.topUpGoldForm.get("job"))?null:o.hasError("required"))&&(null==(o=e.topUpGoldForm.get("job"))?null:o.touched)),s.xp6(1),s.Q6J("ngIf",e.jobDetails))},directives:[u._Y,u.JL,u.sg,Z.SQ,g.KE,Z.yH,u.Fj,d.Nt,u.JJ,u.u,u.wV,h.lW,n.O5,g.TO,n.sg],pipes:[n.JJ],styles:["#main-div[_ngcontent-%COMP%]{margin-top:100px;min-height:90vh;margin-left:50}"]}),T)}],U=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[a.Bz.forChild(v)],a.Bz]}),e}(),_=i(45480),x=i(43220),j=i(67441),y=i(45396),S=i(93738),O=i(86640),k=i(7539),P=i(44981),G=i(72533),L=i(70346),D=i(76627),F=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,U,_.q,g.lN,u.UX,d.c,x.FA,j.LD,y.rP,h.ot,S.QW,O.A0,Z.ae,k.p9,u.u5,P.h,G.JX,L.g,D.Ps]]}),e}()},57916:function(e,r,i){i.d(r,{b:function(){return Z}});var n,a=i(5304),u=i(68307),s=i(37716),l=i(5620),c=i(91841),p=i(84889),Z=((n=function(){function e(o,r,i){t(this,e),this.commonService=o,this.http=r,this.errorService=i}return o(e,[{key:"saveFineToNinetyTwo",value:function(t){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveDalCreation",value:function(t){return this.http.post(this.commonService.getAPI()+"/dalCreation",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"savePanCreation",value:function(t){return this.http.post(this.commonService.getAPI()+"/panCreation",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveMaterialTransfer",value:function(t){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveMaterialFromEmployee",value:function(t){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveCashTransactionBetweenEmployee",value:function(t){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"cashTransactionsByCurrentUser",value:function(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveMaterialFromOwnerToManager",value:function(t){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveMaterialFromManagerToOwner",value:function(t){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveNitricToFine",value:function(t){return this.http.post(this.commonService.getAPI()+"/nitricToFine",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"addTopUpGold",value:function(t,e){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+t+"/"+e,{}).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}},{key:"saveGpTransactions",value:function(t){return this.http.post(this.commonService.getAPI()+"/gpTransactions",t).pipe((0,a.K)(this.errorService.serverError),(0,u.b)(function(t){}))}}]),e}()).\u0275fac=function(t){return new(t||n)(s.LFG(l.v),s.LFG(c.eN),s.LFG(p.T))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)}}])}();