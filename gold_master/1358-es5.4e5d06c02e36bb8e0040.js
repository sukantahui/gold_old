!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),n)}var o,i}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[1358],{61358:function(t,n,o){o.r(n),o.d(n,{GpTransactionModule:function(){return E}});var i=o(72458),a=o(38583),c=o(63423),u=o(92340),s=o(3679),p=o(37716),l=o(57916),m=o(98295),v=o(49983),g=o(43220),f=o(67441),h=o(51095),d=o(42542),T=o(65939);function Z(e,t){if(1&e&&(p.TgZ(0,"mat-option",17),p._uU(1),p.qZA()),2&e){var r=t.$implicit;p.Q6J("value",r.id),p.xp6(1),p.hij(" ",r.name," ")}}function y(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1," Transaction type is required. "),p.qZA())}function b(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1," Must be a valid transaction type. "),p.qZA())}function S(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1," GP value is required. "),p.qZA())}function A(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1," Must be at least 0.001. "),p.qZA())}function _(e,t){if(1&e){var r=p.EpF();p.TgZ(0,"mat-button-toggle-group",18),p.TgZ(1,"mat-button-toggle",19),p.NdJ("click",function(){return p.CHM(r),p.oxw().showDeveloperDiv=!0}),p._uU(2,"Show"),p.qZA(),p.TgZ(3,"mat-button-toggle",19),p.NdJ("click",function(){return p.CHM(r),p.oxw().showDeveloperDiv=!1}),p._uU(4,"Hide"),p.qZA(),p.qZA()}}function w(e,t){if(1&e&&(p.TgZ(0,"div",20),p.TgZ(1,"div",21),p.TgZ(2,"h2"),p._uU(3,"Developer Area"),p.qZA(),p.TgZ(4,"mat-tab-group",22),p.TgZ(5,"mat-tab",23),p.TgZ(6,"pre"),p._uU(7),p.ALo(8,"json"),p.qZA(),p.qZA(),p.TgZ(9,"mat-tab",24),p.TgZ(10,"pre"),p._uU(11,"\n                "),p.qZA(),p.qZA(),p.TgZ(12,"mat-tab",25),p.TgZ(13,"pre"),p._uU(14,"\n                "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var r=p.oxw();p.xp6(7),p.hij("                    transanctionForm = ",p.lcZ(8,1,r.gpTransactionForm.value),"\n                ")}}var F,q=[{path:"",component:(F=function(){function t(r){e(this,t),this.managerService=r,this.isProduction=u.N.production,this.showDeveloperDiv=!1,this.transactionTypes=[{id:2,name:"Purchased"},{id:3,name:"Brought from owner, \u09ae\u09be\u09b2\u09bf\u0995 \u09a6\u09bf\u09df\u09c7\u099b\u09c7"},{id:4,name:"Used \u0995\u09be\u099c\u09c7 \u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7"},{id:5,name:"Destroyed \u09a8\u09b7\u09cd\u099f \u09b9\u09df\u09c7 \u0997\u09c7\u099b\u09c7"},{id:6,name:"Returned to owner \u09ae\u09be\u09b2\u09bf\u0995 \u0995\u09c7 \u09ab\u09c7\u09b0\u09a4 \u09a6\u09c7\u0993\u09df\u09be \u09b9\u09df\u09c7\u099b\u09c7"}],this.gpTransactionForm=new s.cw({transaction_date:new s.NI(new Date,[s.kI.required,this.dateNotInFutureValidator]),gp_transaction_type_id:new s.NI(null,[s.kI.required,s.kI.pattern("^[1-6]$")]),gp_value:new s.NI(null,[s.kI.required,s.kI.min(.001)])})}return r(t,[{key:"dateNotInFutureValidator",value:function(e){var t=new Date(e.value),r=new Date;return t.setHours(0,0,0,0),r.setHours(0,0,0,0),t<=r?null:{dateInFuture:!0}}},{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var e=this;if(!this.gpTransactionForm.invalid){var t=new Date(this.gpTransactionForm.value.transaction_date),r={comment:"Save",transaction_date:"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0")),gp_transaction_type_id:this.gpTransactionForm.value.gp_transaction_type_id,gp_value:this.gpTransactionForm.value.gp_value};console.log(r),this.managerService.saveGpTransactions(r).subscribe({next:function(t){console.log("Transaction saved successfully",t),alert("Transaction saved successfully!"),e.gpTransactionForm.reset(),e.gpTransactionForm.patchValue({transaction_date:new Date})},error:function(e){console.error("Error saving transaction:",e),alert("Failed to save transaction. Please try again.")}})}}}]),t}(),F.\u0275fac=function(e){return new(e||F)(p.Y36(l.b))},F.\u0275cmp=p.Xpm({type:F,selectors:[["app-gp-transaction"]],decls:32,vars:11,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[1,"mat-elevation-z2","p-4","bg-white","rounded",3,"formGroup","ngSubmit"],[1,"mat-headline","mb-4"],["appearance","fill"],["matInput","","formControlName","transaction_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["appearance","fill",1,"w-100","mb-3"],["formControlName","gp_transaction_type_id"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","formControlName","gp_value","placeholder","Enter GP value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"p-2","col-8","d-flex"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[3,"value"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,t){if(1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"h3"),p._uU(3,"GP Transaction"),p.qZA(),p.TgZ(4,"form",2),p.NdJ("ngSubmit",function(){return t.onSubmit()}),p.TgZ(5,"h2",3),p._uU(6,"GP Transaction Form"),p.qZA(),p.TgZ(7,"mat-form-field",4),p.TgZ(8,"mat-label"),p._uU(9,"Transaction Date"),p.qZA(),p._UZ(10,"input",5),p._UZ(11,"mat-datepicker-toggle",6),p._UZ(12,"mat-datepicker",null,7),p.qZA(),p.TgZ(14,"mat-form-field",8),p.TgZ(15,"mat-label"),p._uU(16,"Transaction Type"),p.qZA(),p.TgZ(17,"mat-select",9),p.YNc(18,Z,2,2,"mat-option",10),p.qZA(),p.YNc(19,y,2,0,"mat-error",11),p.YNc(20,b,2,0,"mat-error",11),p.qZA(),p.TgZ(21,"mat-form-field",8),p.TgZ(22,"mat-label"),p._uU(23,"GP Value"),p.qZA(),p._UZ(24,"input",12),p.YNc(25,S,2,0,"mat-error",11),p.YNc(26,A,2,0,"mat-error",11),p.qZA(),p.TgZ(27,"button",13),p._uU(28," Submit "),p.qZA(),p.qZA(),p.qZA(),p._UZ(29,"div",14),p.qZA(),p.YNc(30,_,5,0,"mat-button-toggle-group",15),p.YNc(31,w,15,3,"div",16)),2&e){var r,n,o,i,a=p.MAs(13);p.xp6(4),p.Q6J("formGroup",t.gpTransactionForm),p.xp6(6),p.Q6J("matDatepicker",a),p.xp6(1),p.Q6J("for",a),p.xp6(7),p.Q6J("ngForOf",t.transactionTypes),p.xp6(1),p.Q6J("ngIf",null==(r=t.gpTransactionForm.get("gp_transaction_type_id"))?null:r.hasError("required")),p.xp6(1),p.Q6J("ngIf",null==(n=t.gpTransactionForm.get("gp_transaction_type_id"))?null:n.hasError("pattern")),p.xp6(5),p.Q6J("ngIf",null==(o=t.gpTransactionForm.get("gp_value"))?null:o.hasError("required")),p.xp6(1),p.Q6J("ngIf",null==(i=t.gpTransactionForm.get("gp_value"))?null:i.hasError("min")),p.xp6(1),p.Q6J("disabled",t.gpTransactionForm.invalid),p.xp6(3),p.Q6J("ngIf",!t.isProduction),p.xp6(1),p.Q6J("ngIf",t.showDeveloperDiv&&!t.isProduction)}},directives:[s._Y,s.JL,s.sg,m.KE,m.hX,v.Nt,s.Fj,g.hl,s.JJ,s.u,g.nW,m.R9,g.Mq,f.gD,a.sg,a.O5,s.wV,h.lW,i.ey,m.TO,d.A9,d.Yi,T.SP,T.uX],pipes:[a.Ts],styles:[""]}),F)}],I=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[c.Bz.forChild(q)],c.Bz]}),t}(),k=o(86640),E=function(){var t=r(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[{provide:i.Ad,useValue:"en-GB"}],imports:[[a.ez,I,T.Nh,m.lN,s.UX,v.c,d.vV,k.A0,h.ot,g.FA,f.LD,i.XK]]}),t}()},57916:function(t,n,o){o.d(n,{b:function(){return m}});var i,a=o(5304),c=o(68307),u=o(37716),s=o(5620),p=o(91841),l=o(84889),m=((i=function(){function t(r,n,o){e(this,t),this.commonService=r,this.http=n,this.errorService=o}return r(t,[{key:"saveFineToNinetyTwo",value:function(e){return this.http.post(this.commonService.getAPI()+"/fineTwoNinetyTwo",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveDalCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/dalCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"savePanCreation",value:function(e){return this.http.post(this.commonService.getAPI()+"/panCreation",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveMaterialTransfer",value:function(e){return this.http.post(this.commonService.getAPI()+"/matBetweenEmployees",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveMaterialFromEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveCashTransactionBetweenEmployee",value:function(e){return this.http.post(this.commonService.getAPI()+"/cashTransactionBetweenEmployee",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"cashTransactionsByCurrentUser",value:function(){return this.http.get(this.commonService.getAPI()+"/cahTransactionsByCurrentEmployee").pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveMaterialFromOwnerToManager",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromOwnerToManager",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveMaterialFromManagerToOwner",value:function(e){return this.http.post(this.commonService.getAPI()+"/materialFromManagerToOwner",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveNitricToFine",value:function(e){return this.http.post(this.commonService.getAPI()+"/nitricToFine",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"addTopUpGold",value:function(e,t){return this.http.put(this.commonService.getAPI()+"/topUpGold/"+e+"/"+t,{}).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}},{key:"saveGpTransactions",value:function(e){return this.http.post(this.commonService.getAPI()+"/gpTransactions",e).pipe((0,a.K)(this.errorService.serverError),(0,c.b)(function(e){}))}}]),t}()).\u0275fac=function(e){return new(e||i)(u.LFG(s.v),u.LFG(p.eN),u.LFG(l.T))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)}}])}();