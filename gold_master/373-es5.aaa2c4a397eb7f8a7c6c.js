!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?i:String(i)),r)}var n,i}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[373],{10373:function(t,r,n){n.r(r),n.d(r,{SendRawMaterialToEmployeeModule:function(){return k}});var i=n(38583),o=n(63423),l=n(92340),c=n(3679),u=n(88259),s=n.n(u),m=n(37716),d=n(91841),g=n(57916),p=n(5620),f=n(86640),Z=n(98295),v=n(49983),b=n(51095),h=n(42542),T=n(65939);function A(e,t){if(1&e&&(m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td",19),m._uU(4),m.qZA(),m.qZA()),2&e){var a=t.$implicit;m.xp6(2),m.Oqu(a.rawMaterialName),m.xp6(2),m.Oqu(a.closingBalance)}}function q(e,t){if(1&e&&(m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td",19),m._uU(4),m.qZA(),m.qZA()),2&e){var a=t.$implicit;m.xp6(2),m.Oqu(a.rawMaterialName),m.xp6(2),m.Oqu(a.closingBalance)}}function y(e,t){if(1&e&&(m.TgZ(0,"div",11),m.TgZ(1,"table",12),m.TgZ(2,"thead"),m.TgZ(3,"tr"),m.TgZ(4,"td",13),m._uU(5,"Updated Value"),m.qZA(),m.qZA(),m.TgZ(6,"tr"),m.TgZ(7,"th",14),m._uU(8,"Material Name"),m.qZA(),m.TgZ(9,"th",14),m._uU(10,"Value"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"tbody"),m.YNc(12,q,5,2,"tr",15),m.qZA(),m.qZA(),m.qZA()),2&e){var a=m.oxw();m.xp6(12),m.Q6J("ngForOf",a.savedResponse.data.sender_all_material_balance)}}function w(e,t){if(1&e){var a=m.EpF();m.TgZ(0,"mat-button-toggle-group",20),m.TgZ(1,"mat-button-toggle",21),m.NdJ("click",function(){return m.CHM(a),m.oxw().showDeveloperDiv=!0}),m._uU(2,"Show"),m.qZA(),m.TgZ(3,"mat-button-toggle",21),m.NdJ("click",function(){return m.CHM(a),m.oxw().showDeveloperDiv=!1}),m._uU(4,"Hide"),m.qZA(),m.qZA()}}function _(e,t){if(1&e&&(m.TgZ(0,"div",22),m.TgZ(1,"div",23),m.TgZ(2,"h2"),m._uU(3,"Developer Area"),m.qZA(),m.TgZ(4,"mat-tab-group",24),m.TgZ(5,"mat-tab",25),m.TgZ(6,"pre"),m._uU(7),m.ALo(8,"json"),m.qZA(),m.qZA(),m.TgZ(9,"mat-tab",26),m.TgZ(10,"pre"),m._uU(11),m.ALo(12,"json"),m.qZA(),m.qZA(),m.TgZ(13,"mat-tab",27),m.TgZ(14,"pre"),m._uU(15),m.ALo(16,"json"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){var a=m.oxw();m.xp6(7),m.hij("                    materialSendingForm = ",m.lcZ(8,3,a.materialSendingForm.value),"\n                "),m.xp6(4),m.hij("                    savedResponse = ",m.lcZ(12,5,a.savedResponse.data.sender_all_material_balance),"\n                "),m.xp6(4),m.hij("                    materialBalances = ",m.lcZ(16,7,a.materialBalances),"\n                ")}}var x,S=[{path:"",component:(x=function(){function t(a,r,n,i){var o=this;e(this,t),this.route=a,this.http=r,this.managerService=n,this.commonservice=i,this.isProduction=l.N.production,this.materialBalances=[],this.route.data.subscribe(function(e){o.user=e.materialResolver.user,o.resolverValues=e.materialResolver,o.employees=e.materialResolver.employees.data,o.projectDetails=e.materialResolver.projectDetails,o.rawMaterials=e.materialResolver.rawMaterials.data,o.materialBalances=e.materialResolver.materialBalances.data,o.selectableEmployees=o.employees.filter(function(e){return o.projectDetails.managerToEmployeeMaterial.employees.find(function(t){return t===e.employeeId})}),o.selectableMaterials=o.rawMaterials.filter(function(e){return o.projectDetails.managerToEmployeeMaterial.materialsToSend.find(function(t){return t===e.rmID})})}),this.materialSendingForm=new c.cw({outward_employee_id:new c.NI(this.user.emp_id,[c.kI.required]),inward_employee_id:new c.NI(null,[c.kI.required]),rm_id:new c.NI(null,[c.kI.required]),value:new c.NI(0,[c.kI.required])})}return a(t,[{key:"ngOnInit",value:function(){}},{key:"saveMaterialTransfer",value:function(){var e=this;s().fire({title:"Send Material",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(function(t){!t.value||e.managerService.saveMaterialTransfer(e.materialSendingForm.value).subscribe(function(t){!0===t.status&&(s().fire({timer:2e3,title:"Saved",text:"Transferred successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),e.savedResponse=t)},function(e){s().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}},{key:"onEmployeeChange",value:function(){var e=this.materialSendingForm.get("inward_employee_id").value;this.http.get(this.commonservice.getAPI()+"/materialBalance/"+e).subscribe(function(e){console.log(e.data)})}}]),t}(),x.\u0275fac=function(e){return new(e||x)(m.Y36(o.gz),m.Y36(d.eN),m.Y36(g.b),m.Y36(p.v))},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-send-raw-material-to-employee"]],decls:31,vars:8,consts:[[1,"d-flex","flex-row",2,"min-height","80vh"],[1,"p-2","col-4"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","inward_employee_id","placeholder","Select Employee",1,"custom",3,"items","click"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"custom",3,"items"],[1,"example-full-width"],["type","number","matInput","","formControlName","value","placeholder","Material value",1,"text-right"],[1,"p-2","bd-highlight"],[1,"example-button-row"],["mat-button","","color","primary",1,"text-right",3,"disabled","click"],[1,"p-2","col-8","d-flex"],[1,"p-2","col-6"],[1,"table","table-striped","col-xl-12","col-lg-12","col-xs-12"],["colspan","2"],["scope","col"],[4,"ngFor","ngForOf"],["class","p-2 col-6",4,"ngIf"],["name","fontStyle","aria-label","Font Style",4,"ngIf"],["id","developer-div",4,"ngIf"],[1,"text-right"],["name","fontStyle","aria-label","Font Style"],[3,"click"],["id","developer-div"],[1,"outerContainer"],["mat-align-tabs","center","backgroundColor","accent"],["label","Sec 1"],["label","Sec 2"],["label","Sec 3"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"form",2),m.TgZ(3,"ng-select",3),m.NdJ("click",function(){return t.onEmployeeChange()}),m.qZA(),m._UZ(4,"ng-select",4),m.TgZ(5,"div"),m.TgZ(6,"mat-form-field",5),m.TgZ(7,"mat-label"),m._uU(8,"Enter Material Value"),m.qZA(),m._UZ(9,"input",6),m.qZA(),m.qZA(),m.TgZ(10,"div",7),m.TgZ(11,"div",8),m.TgZ(12,"button",9),m.NdJ("click",function(){return t.saveMaterialTransfer()}),m._uU(13,"Save Record"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(14,"div",10),m.TgZ(15,"div",11),m.TgZ(16,"table",12),m.TgZ(17,"thead"),m.TgZ(18,"tr"),m.TgZ(19,"td",13),m._uU(20,"Previous Value"),m.qZA(),m.qZA(),m.TgZ(21,"tr"),m.TgZ(22,"th",14),m._uU(23,"Material Name"),m.qZA(),m.TgZ(24,"th",14),m._uU(25,"Value"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"tbody"),m.YNc(27,A,5,2,"tr",15),m.qZA(),m.qZA(),m.qZA(),m.YNc(28,y,13,1,"div",16),m.qZA(),m.qZA(),m.YNc(29,w,5,0,"mat-button-toggle-group",17),m.YNc(30,_,17,9,"div",18)),2&e&&(m.xp6(2),m.Q6J("formGroup",t.materialSendingForm),m.xp6(1),m.Q6J("items",t.selectableEmployees),m.xp6(1),m.Q6J("items",t.selectableMaterials),m.xp6(8),m.Q6J("disabled",!t.materialSendingForm.valid||t.materialSendingForm.pristine),m.xp6(15),m.Q6J("ngForOf",t.materialBalances),m.xp6(1),m.Q6J("ngIf",t.savedResponse),m.xp6(1),m.Q6J("ngIf",!t.isProduction),m.xp6(1),m.Q6J("ngIf",t.showDeveloperDiv&&!t.isProduction))},directives:[c._Y,c.JL,c.sg,f.w9,c.JJ,c.u,Z.KE,Z.hX,c.wV,v.Nt,c.Fj,b.lW,i.sg,i.O5,h.A9,h.Yi,T.SP,T.uX],pipes:[i.Ts],styles:[""]}),x)}],N=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.Bz.forChild(S)],o.Bz]}),t}(),k=function(){var t=a(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[i.ez,N,T.Nh,h.vV,c.UX,f.A0,Z.lN,v.c,b.ot]]}),t}()}}])}();