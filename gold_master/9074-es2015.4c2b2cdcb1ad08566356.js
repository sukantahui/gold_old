"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[9074],{69074:function(e,t,a){a.r(t),a.d(t,{ReceivedRawMaterialFromEmployeeModule:function(){return P}});var n=a(38583),r=a(63423),i=a(92340),o=a(3679),l=a(88259),c=a.n(l),s=a(37716),g=a(91841),d=a(57916),m=a(5620),u=a(82820),Z=a(93738),p=a(86640),f=a(98295),v=a(49983),A=a(1769),h=a(42542),T=a(65939);function q(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Value is required "),s.qZA())}function b(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td",11),s._uU(4),s.ALo(5,"number"),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.Oqu(e.rawMaterialName),s.xp6(2),s.hij("",s.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function _(e,t){if(1&e&&(s.TgZ(0,"div",15),s.TgZ(1,"mat-card",3),s.TgZ(2,"mat-card-title"),s._uU(3,"Sender Material Balance (Updated)"),s.qZA(),s.TgZ(4,"table",16),s.TgZ(5,"thead",17),s.TgZ(6,"tr"),s.TgZ(7,"th"),s._uU(8,"Material Name"),s.qZA(),s.TgZ(9,"th",11),s._uU(10,"Value"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"tbody"),s.YNc(12,b,6,5,"tr",21),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(12),s.Q6J("ngForOf",e.savedResponse.data.sender_material_balance)}}function M(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td",11),s._uU(4),s.ALo(5,"number"),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.Oqu(e.rawMaterialName),s.xp6(2),s.hij("",s.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function x(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"mat-divider",14),s.TgZ(2,"h3",4),s._uU(3,"Balance after Transaction"),s.qZA(),s.TgZ(4,"div",1),s.YNc(5,_,13,1,"div",19),s.TgZ(6,"div",15),s.TgZ(7,"mat-card",3),s.TgZ(8,"mat-card-title"),s._uU(9,"Your Material Balance (Updated)"),s.qZA(),s.TgZ(10,"table",16),s.TgZ(11,"thead",17),s.TgZ(12,"tr"),s.TgZ(13,"th"),s._uU(14,"Material Name"),s.qZA(),s.TgZ(15,"th",11),s._uU(16,"Value"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"tbody"),s.YNc(18,M,6,5,"tr",21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(5),s.Q6J("ngIf",null==e.savedResponse.data.sender_material_balance?null:e.savedResponse.data.sender_material_balance.length),s.xp6(13),s.Q6J("ngForOf",e.savedResponse.data.receiver_material_balance)}}const w=function(e){return{"table-active":e}};function C(e,t){if(1&e&&(s.TgZ(0,"tr",22),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td",11),s._uU(4),s.ALo(5,"number"),s.qZA(),s.qZA()),2&e){const e=t.$implicit,a=s.oxw();let n;s.Q6J("ngClass",s.VKq(6,w,e.rawMaterial.rm_ID==(null==(n=a.materialRecivingForm.get("rm_id"))?null:n.value))),s.xp6(2),s.Oqu(e.rawMaterialName),s.xp6(2),s.hij("",s.xi3(5,3,e.closingBalance,"1.3-3")," gm")}}function O(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td",11),s._uU(4),s.ALo(5,"number"),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.Oqu(e.rawMaterialName),s.xp6(2),s.hij("",s.xi3(5,2,e.closingBalance,"1.3-3")," gm")}}function U(e,t){if(1&e&&(s.TgZ(0,"div",15),s.TgZ(1,"mat-card",3),s.TgZ(2,"mat-card-title"),s._uU(3,"Sender Material Balance"),s.qZA(),s.TgZ(4,"table",16),s.TgZ(5,"thead",17),s.TgZ(6,"tr"),s.TgZ(7,"th"),s._uU(8,"Material Name"),s.qZA(),s.TgZ(9,"th",11),s._uU(10,"Value"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"tbody"),s.YNc(12,O,6,5,"tr",21),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(12),s.Q6J("ngForOf",e.senderMaterialBalances)}}function y(e,t){if(1&e&&(s.TgZ(0,"div",27),s.TgZ(1,"mat-card",3),s.TgZ(2,"mat-card-title"),s._uU(3,"Developer Area"),s.qZA(),s.TgZ(4,"mat-tab-group",28),s.TgZ(5,"mat-tab",29),s.TgZ(6,"pre"),s._uU(7),s.ALo(8,"json"),s.qZA(),s.qZA(),s.TgZ(9,"mat-tab",30),s.TgZ(10,"pre"),s._uU(11),s.ALo(12,"json"),s.qZA(),s.qZA(),s.TgZ(13,"mat-tab",31),s.TgZ(14,"pre"),s._uU(15),s.ALo(16,"json"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(7),s.Oqu(s.lcZ(8,3,e.materialRecivingForm.value)),s.xp6(4),s.hij("savedResponse=",s.lcZ(12,5,null==e.savedResponse?null:e.savedResponse.data),""),s.xp6(4),s.hij("materialBalances=",s.lcZ(16,7,e.materialBalances),"")}}function N(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",23),s.TgZ(1,"mat-button-toggle-group",24),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().showDeveloperDiv=t}),s.TgZ(2,"mat-button-toggle",25),s._uU(3,"Show Developer Area"),s.qZA(),s.TgZ(4,"mat-button-toggle",25),s._uU(5,"Hide Developer Area"),s.qZA(),s.qZA(),s.YNc(6,y,17,9,"div",26),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngModel",e.showDeveloperDiv),s.xp6(1),s.Q6J("value",!0),s.xp6(2),s.Q6J("value",!1),s.xp6(2),s.Q6J("ngIf",e.showDeveloperDiv)}}const B=[{path:"",component:(()=>{class e{constructor(e,t,a,n,r){this.route=e,this.http=t,this.managerService=a,this.commonservice=n,this.reportService=r,this.isProduction=i.N.production,this.materialBalances=[],this.route.data.subscribe(e=>{this.user=e.materialResolver.user,this.resolverValues=e.materialResolver,this.employees=e.materialResolver.employees.data,this.projectDetails=e.materialResolver.projectDetails,this.rawMaterials=e.materialResolver.rawMaterials.data,this.materialBalances=e.materialResolver.materialBalances.data,this.selectableEmployees=this.employees.filter(e=>this.projectDetails.employeeToManagerMaterial.employees.find(t=>t===e.employeeId)),this.selectableMaterials=this.rawMaterials.filter(e=>this.projectDetails.employeeToManagerMaterial.materialsToSend.find(t=>t===e.rmID))}),this.materialRecivingForm=new o.cw({outward_employee_id:new o.NI(null,[o.kI.required]),inward_employee_id:new o.NI(this.user.emp_id,[o.kI.required]),rm_id:new o.NI(null,[o.kI.required]),value:new o.NI(0,[o.kI.required])})}ngOnInit(){}saveMaterialTransfer(){c().fire({title:"Receiving Material from Employee",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Convert",cancelButtonText:"No!",background:"rgba(38,39,47,0.95)"}).then(e=>{!e.value||this.managerService.saveMaterialFromEmployee(this.materialRecivingForm.value).subscribe(e=>{!0===e.status&&(c().fire({timer:2e3,title:"Saved",text:"Transferred successfully",icon:"success",showCancelButton:!1,confirmButtonColor:"#1661a0",cancelButtonColor:"#d33",background:"rgba(38,39,47,0.95)"}),this.savedResponse=e)},e=>{c().fire({title:e.message,text:"Transfer unsuccessful",icon:"error",showConfirmButton:!1,background:"rgba(38,39,47,0.95)",timer:3e3})})})}onEmployeeChange(e){const t=this.materialRecivingForm.get("outward_employee_id").value;t&&this.reportService.getMaterialBalanceByEmployee(t).subscribe(e=>{this.senderMaterialBalances=e.data})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.gz),s.Y36(g.eN),s.Y36(d.b),s.Y36(m.v),s.Y36(u.r))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-received-raw-material-from-employee"]],decls:43,vars:10,consts:[[1,"container-fluid","py-3",2,"min-height","80vh","background-color","#f9f9f9"],[1,"row"],[1,"col-lg-4","col-md-6","col-12","mb-4"],[1,"shadow-sm","p-3"],[1,"mb-3"],[3,"formGroup"],["bindLabel","employeeName","bindValue","employeeId","formControlName","outward_employee_id","placeholder","Receiving from",1,"w-100",3,"items","change"],["bindLabel","rmName","bindValue","rmID","formControlName","rm_id","placeholder","Select Material",1,"w-100",3,"items"],[1,"w-100"],["type","number","matInput","","formControlName","value","placeholder","Material value",1,"text-end"],[4,"ngIf"],[1,"text-end"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-lg-8","col-12"],[1,"my-4"],[1,"col-md-6","col-12","mb-4"],[1,"table","table-hover","table-sm","align-middle","mt-2"],[1,"table-light"],[3,"ngClass",4,"ngFor","ngForOf"],["class","col-md-6 col-12 mb-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"mt-4"],[3,"ngModel","ngModelChange"],[3,"value"],["id","developer-div","class","mt-3",4,"ngIf"],["id","developer-div",1,"mt-3"],["mat-align-tabs","center","backgroundColor","accent"],["label","Form Data"],["label","Saved Response"],["label","Section 3"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"mat-card",3),s.TgZ(4,"mat-card-title",4),s._uU(5,"Material Receiving Form"),s.qZA(),s._uU(6),s.TgZ(7,"form",5),s.TgZ(8,"div",4),s.TgZ(9,"ng-select",6),s.NdJ("change",function(e){return t.onEmployeeChange(e)}),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s._UZ(11,"ng-select",7),s.qZA(),s.TgZ(12,"div",4),s.TgZ(13,"mat-form-field",8),s.TgZ(14,"mat-label"),s._uU(15,"Enter Material Value"),s.qZA(),s._UZ(16,"input",9),s.YNc(17,q,2,0,"mat-error",10),s.qZA(),s.qZA(),s.TgZ(18,"div",11),s.TgZ(19,"button",12),s.NdJ("click",function(){return t.saveMaterialTransfer()}),s._uU(20," \ud83d\udcbe Save Record "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(21,"div",13),s.YNc(22,x,19,2,"div",10),s.TgZ(23,"div"),s._UZ(24,"mat-divider",14),s.TgZ(25,"h3",4),s._uU(26,"Balance before Transaction"),s.qZA(),s.TgZ(27,"div",1),s.TgZ(28,"div",15),s.TgZ(29,"mat-card",3),s.TgZ(30,"mat-card-title"),s._uU(31,"Your Material Balance"),s.qZA(),s.TgZ(32,"table",16),s.TgZ(33,"thead",17),s.TgZ(34,"tr"),s.TgZ(35,"th"),s._uU(36,"Material Name"),s.qZA(),s.TgZ(37,"th",11),s._uU(38,"Value"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"tbody"),s.YNc(40,C,6,8,"tr",18),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(41,U,13,1,"div",19),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(42,N,7,4,"div",20),s.qZA()),2&e){let e;s.xp6(6),s.hij(" selected rm ",t.materialRecivingForm.get("rm_id").value," "),s.xp6(1),s.Q6J("formGroup",t.materialRecivingForm),s.xp6(2),s.Q6J("items",t.selectableEmployees),s.xp6(2),s.Q6J("items",t.selectableMaterials),s.xp6(6),s.Q6J("ngIf",null==(e=t.materialRecivingForm.get("value"))?null:e.hasError("required")),s.xp6(2),s.Q6J("disabled",!t.materialRecivingForm.valid||t.materialRecivingForm.pristine),s.xp6(3),s.Q6J("ngIf",t.savedResponse),s.xp6(18),s.Q6J("ngForOf",t.materialBalances),s.xp6(1),s.Q6J("ngIf",null==t.senderMaterialBalances?null:t.senderMaterialBalances.length),s.xp6(1),s.Q6J("ngIf",!t.isProduction)}},directives:[Z.a8,Z.n5,o._Y,o.JL,o.sg,p.w9,o.JJ,o.u,f.KE,f.hX,o.wV,v.Nt,o.Fj,n.O5,A.d,n.sg,f.TO,n.mk,h.A9,o.On,h.Yi,T.SP,T.uX],pipes:[n.JJ,n.Ts],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f4f6f8}mat-card[_ngcontent-%COMP%]{border-radius:12px!important;border:none!important;background:#fff}mat-card-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600;color:#444}.table[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f1f3f5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#555}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#333}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}ng-select.custom[_ngcontent-%COMP%], ng-select.w-100[_ngcontent-%COMP%]{border-radius:6px;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border:1px solid #d1d5db;min-height:48px}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5}ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding:6px 10px}.mat-form-field[_ngcontent-%COMP%]{background:white;border-radius:6px;padding:0 6px}.mat-input-element[_ngcontent-%COMP%]{font-size:.95rem}button[mat-raised-button][_ngcontent-%COMP%]{padding:8px 18px;font-size:.9rem;font-weight:500}#developer-div[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#212529;color:#f8f9fa;padding:12px;border-radius:6px;font-size:.85rem;overflow-x:auto}"]}),e})()}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.Bz.forChild(B)],r.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,R,o.UX,h.vV,T.Nh,p.A0,v.c,h.vV,Z.QW,o.u5,A.t]]}),e})()}}]);