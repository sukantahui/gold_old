"use strict";(self.webpackChunkaccounts=self.webpackChunkaccounts||[]).push([[8037],{38037:function(t,e,n){n.r(e),n.d(e,{AgentWiseCustomerReportModule:function(){return j}});var i=n(38583),o=n(63423),c=n(92340),s=n(37716),r=n(37825),u=n(52541),a=n(5620),d=n(35618),g=n(93738),l=n(51095),Z=n(95913),p=n(76627),m=n(26584),A=n(33013);function _(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"a",21),s.NdJ("click",function(){s.CHM(t);const e=s.oxw(),n=e.$implicit,i=e.index;return s.oxw(2).agentSelected(n,i)}),s._uU(1),s.qZA()}if(2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.agent_name," ")}}function x(t,e){if(1&t&&(s.TgZ(0,"span",22),s._uU(1),s.TgZ(2,"mat-icon"),s._uU(3,"done_outline"),s.qZA(),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.agent_name,"")}}function q(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s.YNc(6,_,2,1,"a",19),s.YNc(7,x,4,1,"span",20),s.qZA(),s.TgZ(8,"td"),s._uU(9),s.qZA(),s.TgZ(10,"td",18),s._uU(11),s.ALo(12,"number"),s.qZA(),s.TgZ(13,"td",18),s._uU(14),s.qZA(),s.qZA()),2&t){const t=e.$implicit,n=e.index,i=s.oxw(2);s.xp6(2),s.Oqu(n+1),s.xp6(2),s.Oqu(t.agent_id),s.xp6(2),s.Q6J("ngIf",i.selectedAgentIndex!=n),s.xp6(1),s.Q6J("ngIf",i.selectedAgentIndex==n),s.xp6(2),s.Oqu(t.agent_phone),s.xp6(2),s.Oqu(s.xi3(12,7,t.gold_due,"1.3")),s.xp6(3),s.Oqu(t.lc_due)}}function T(t,e){if(1&t&&(s.TgZ(0,"div",14),s.TgZ(1,"h3"),s._uU(2,"Agent List"),s.qZA(),s.TgZ(3,"table",15),s.TgZ(4,"thead"),s.TgZ(5,"tr"),s.TgZ(6,"th"),s._uU(7,"SL"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Agent ID"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Agent Name"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Phone"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Gold"),s.qZA(),s.TgZ(16,"th"),s._uU(17,"LC"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"tbody"),s.YNc(19,q,15,10,"tr",16),s.qZA(),s.TgZ(20,"tfoot"),s.TgZ(21,"tr"),s.TgZ(22,"td",17),s._uU(23,"All Agents"),s.qZA(),s.TgZ(24,"td",18),s._uU(25),s.ALo(26,"number"),s.qZA(),s.TgZ(27,"td",18),s._uU(28),s.qZA(),s.qZA(),s._UZ(29,"tfoot"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(19),s.Q6J("ngForOf",t.agents),s.xp6(6),s.Oqu(s.xi3(26,3,t.agentDues.gold,"1.3")),s.xp6(3),s.Oqu(t.agentDues.lc)}}function f(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td",18),s._uU(10),s.qZA(),s.TgZ(11,"td",18),s._uU(12),s.ALo(13,"number"),s.qZA(),s.TgZ(14,"td",18),s._uU(15),s.qZA(),s.TgZ(16,"td",18),s._uU(17),s.ALo(18,"number"),s.qZA(),s.TgZ(19,"td",18),s._uU(20),s.qZA(),s.qZA()),2&t){const t=e.$implicit,n=e.index;s.xp6(2),s.Oqu(n+1),s.xp6(2),s.Oqu(t.tr_date),s.xp6(2),s.Oqu(t.particulars),s.xp6(2),s.Oqu(t.reference),s.xp6(2),s.Oqu(t.billed_qty),s.xp6(2),s.Oqu(s.xi3(13,9,t.op_gold_due+t.billed_gold+t.received_gold,"1.3")),s.xp6(3),s.Oqu(t.op_lc_due+t.billed_lc+t.received_lc),s.xp6(2),s.Oqu(s.xi3(18,12,t.current_gold_due,"1.3")),s.xp6(3),s.Oqu(t.current_lc_due)}}function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-card",23),s.TgZ(1,"mat-card-content"),s.TgZ(2,"button",24),s.TgZ(3,"mat-icon"),s._uU(4,"print"),s.qZA(),s.qZA(),s.TgZ(5,"button",5),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return e.showCustomerReceiptPayment=!1,e.selectedCustomerIndex=-1}),s.TgZ(6,"mat-icon"),s._uU(7,"delete_forever"),s.qZA(),s.qZA(),s.TgZ(8,"div",25),s.TgZ(9,"h3"),s._uU(10),s.qZA(),s.TgZ(11,"table",26),s.TgZ(12,"thead"),s.TgZ(13,"tr"),s.TgZ(14,"th"),s._uU(15,"SL"),s.qZA(),s.TgZ(16,"th"),s._uU(17,"Date"),s.qZA(),s.TgZ(18,"th"),s._uU(19,"Particulars"),s.qZA(),s.TgZ(20,"th"),s._uU(21,"Reference"),s.qZA(),s.TgZ(22,"th"),s._uU(23,"Qty"),s.qZA(),s.TgZ(24,"th"),s._uU(25,"Gold"),s.qZA(),s.TgZ(26,"th"),s._uU(27,"LC"),s.qZA(),s.TgZ(28,"th"),s._uU(29,"Gold Balance"),s.qZA(),s.TgZ(30,"th"),s._uU(31,"LC Balance"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(32,"tbody"),s.YNc(33,f,21,15,"tr",16),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(2),s.Q6J("useExistingCss",!0),s.xp6(8),s.hij("Receipt and Payment of ",t.selectedCustomer.cust_name,""),s.xp6(23),s.Q6J("ngForOf",t.customerReceiptPayment)}}function b(t,e){if(1&t&&(s.TgZ(0,"h3"),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.hij("Customers of ",t.selectedAgent.agent_name,"")}}function U(t,e){1&t&&(s.TgZ(0,"h3"),s._uU(1,"All Customers"),s.qZA())}function w(t,e){1&t&&(s.TgZ(0,"h3"),s._uU(1,"\u098f\u0987 \u098f\u099c\u09c7\u09a8\u09cd\u099f\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u0995\u09cb\u09a8 \u09b0\u0995\u09ae \u0995\u09be\u09b8\u09cd\u099f\u09cb\u09ae\u09be\u09b0 \u09a8\u09bf\u09b0\u09cd\u09a7\u09be\u09b0\u09a3 \u0995\u09b0\u09be \u09b9\u09df \u09a8\u09bf"),s.qZA())}function C(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",32),s.TgZ(1,"div",33),s._UZ(2,"i",34),s.TgZ(3,"input",35),s.NdJ("input",function(e){return s.CHM(t),s.oxw(),s.MAs(1).filterGlobal(e.target.value,"contains")}),s.qZA(),s.qZA(),s.qZA()}}function v(t,e){1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"th"),s._uU(2,"SL"),s.qZA(),s.TgZ(3,"th",36),s._uU(4,"Customer Id "),s._UZ(5,"p-sortIcon",37),s.qZA(),s.TgZ(6,"th",38),s._uU(7,"Customer"),s._UZ(8,"p-sortIcon",39),s.qZA(),s.TgZ(9,"th",40),s._uU(10,"City"),s._UZ(11,"p-sortIcon",41),s.qZA(),s.TgZ(12,"th",42),s._uU(13,"Gold"),s._UZ(14,"p-sortIcon",43),s.qZA(),s.TgZ(15,"th",44),s._uU(16,"LC"),s._UZ(17,"p-sortIcon",45),s.qZA(),s.qZA())}function y(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"a",21),s.NdJ("click",function(){s.CHM(t);const e=s.oxw(),n=e.$implicit,i=e.rowIndex;return s.oxw(2).customerSelected(n,i)}),s._uU(1),s.qZA()}if(2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.cust_name," ")}}function I(t,e){if(1&t&&(s.TgZ(0,"span",22),s._uU(1),s.TgZ(2,"mat-icon"),s._uU(3,"done_outline"),s.qZA(),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.cust_name,"")}}function P(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td",46),s._uU(4),s.qZA(),s.TgZ(5,"td",46),s.YNc(6,y,2,1,"a",19),s.YNc(7,I,4,1,"span",20),s.qZA(),s.TgZ(8,"td",47),s._uU(9),s.qZA(),s.TgZ(10,"td",18),s._uU(11),s.ALo(12,"number"),s.qZA(),s.TgZ(13,"td",18),s._uU(14),s.qZA(),s.qZA()),2&t){const t=e.$implicit,n=e.rowIndex,i=s.oxw(2);s.xp6(2),s.Oqu(n+1),s.xp6(2),s.Oqu(t.cust_id),s.xp6(2),s.Q6J("ngIf",i.selectedCustomerIndex!=n),s.xp6(1),s.Q6J("ngIf",i.selectedCustomerIndex==n),s.xp6(2),s.Oqu(t.city),s.xp6(2),s.Oqu(s.xi3(12,7,t.gold_due,"1.3")),s.xp6(3),s.Oqu(t.lc_due)}}const O=function(){return[200,300,500]},S=function(){return["cust_id","cust_name","city","gold_due","lc_due"]};function J(t,e){if(1&t&&(s.TgZ(0,"p-table",27,28),s.YNc(2,C,4,0,"ng-template",29),s.YNc(3,v,18,0,"ng-template",30),s.YNc(4,P,15,10,"ng-template",31),s.qZA()),2&t){const t=s.oxw();s.Q6J("value",t.customers)("rows",1e4)("showCurrentPageReport",!0)("rowsPerPageOptions",s.DdM(7,O))("paginator",!0)("globalFilterFields",s.DdM(8,S))("responsive",!0)}}function N(t,e){if(1&t&&(s.TgZ(0,"div",48),s.TgZ(1,"div",49),s.TgZ(2,"div",50),s.TgZ(3,"div",51),s.TgZ(4,"pre"),s._uU(5),s.ALo(6,"json"),s.qZA(),s.qZA(),s._UZ(7,"div",52),s.TgZ(8,"div",51),s._uU(9,"3"),s.qZA(),s.TgZ(10,"div",51),s._uU(11,"4"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(5),s.hij("                    selectedAgentIndex = ",s.lcZ(6,1,t.selectedAgentIndex),"\n                ")}}const k=[{path:"",component:(()=>{class t{constructor(t,e,n){this.agentService=t,this.customerService=e,this.commonService=n,this.isProduction=c.N.production,this.selectedAgentIndex=-2,this.selectedCustomerIndex=-1,this.showCustomerReceiptPayment=!1}ngOnInit(){this.agentService.getAgentsWithDues().subscribe(t=>{this.agents=t.data;const e=this.agents.reduce((t,e)=>t+e.lc_due,0),n=this.agents.reduce((t,e)=>t+e.gold_due,0);this.agentDues={gold:n,lc:e}}),this.customerService.getCustomersWithBalance().subscribe(t=>{this.customers=t.data,this.showCustomerReceiptPayment=!0})}agentSelected(t,e){this.selectedAgentIndex=e,this.selectedAgent=t,this.selectedCustomerIndex=-1,this.agentService.getCustomersWithDuesByAgent(t.agent_id).subscribe(t=>{this.customers=t.data,this.showCustomerReceiptPayment=!0,this.customerReceiptPayment=null})}customerSelected(t,e){this.agentService.getCustomerReceiptPayment(t.cust_id).subscribe(n=>{this.customerReceiptPayment=n.data,this.selectedCustomer=t,this.selectedCustomerIndex=e,this.showCustomerReceiptPayment=!0})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.R),s.Y36(u.v),s.Y36(a.v))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-agent-wise-customer-report"]],decls:31,vars:9,consts:[["id","agent-wise-customer-report-div"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","40",1,"child-1"],["id","agent-card",1,"example-card"],["mat-button","","color","primary","printSectionId","agent-list-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["mat-button","","color","primary",3,"click"],["id","agent-list-table","class","table-responsive",4,"ngIf"],["fxFlex","60",1,"child-2"],["class","example-card","id","customer-receipt-payment-div",4,"ngIf"],[1,"example-card"],["mat-button","","color","primary","printSectionId","customer-list-table-new","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],[4,"ngIf"],["id","customer-list-table-new","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","responsive",4,"ngIf"],["id","developer-div",4,"ngIf"],["id","agent-list-table",1,"table-responsive"],["id","printable-agent-table",1,"table","table-bodered","table-condensed","ml-3"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"text-right"],["style","text-decoration: none;",3,"routerLink","click",4,"ngIf"],["style","color: red;",4,"ngIf"],[2,"text-decoration","none",3,"routerLink","click"],[2,"color","red"],["id","customer-receipt-payment-div",1,"example-card"],["mat-button","","color","primary","printSectionId","customer-receipt-payment-table","styleSheetFile","assets/print_css/agent_wise_stock/style1.css","ngxPrint","",3,"useExistingCss"],["id","customer-receipt-payment-table",1,"table-responsive"],["id","printable-receipt-payment-table",1,"table","table-bodered","table-condensed"],["id","customer-list-table-new","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","responsive"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","justify-content-between"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"text-right",3,"input"],["pSortableColumn","cust_id"],["field","cust_id"],["pSortableColumn","cust_name"],["field","cust_name"],["pSortableColumn","city"],["field","city"],["pSortableColumn","gold_due"],["field","gold_due"],["pSortableColumn","lc_due"],["field","lc_due"],[1,"text-left"],[1,"text-leftt"],["id","developer-div"],[1,"outerContainer"],["fxLayout","row","fxLayoutGap","1px","fxLayout.sm","column",1,"container"],["fxLayoutAlign","center center"],["fxFlex","2 1 auto","fxLayoutAlign","center center"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"mat-card",3),s.TgZ(4,"mat-card-header"),s.TgZ(5,"mat-card-subtitle"),s.TgZ(6,"button",4),s.TgZ(7,"mat-icon"),s._uU(8,"print"),s.qZA(),s.qZA(),s.TgZ(9,"button",5),s.NdJ("click",function(){return e.commonService.exportToExcel("printable-agent-table","all_agents.xlsx",6)}),s.TgZ(10,"mat-icon"),s._uU(11,"cloud_download"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"mat-card-content"),s.YNc(13,T,30,6,"div",6),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",7),s.YNc(15,h,34,3,"mat-card",8),s.TgZ(16,"mat-card",9),s.TgZ(17,"mat-card-header"),s.TgZ(18,"mat-card-subtitle"),s.TgZ(19,"button",10),s.TgZ(20,"mat-icon"),s._uU(21,"print"),s.qZA(),s.qZA(),s.TgZ(22,"button",5),s.NdJ("click",function(){return e.commonService.exportToExcel("customer-list-table-new","customers.xlsx",6)}),s.TgZ(23,"mat-icon"),s._uU(24,"cloud_download"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"mat-card-content"),s.YNc(26,b,2,1,"h3",11),s.YNc(27,U,2,0,"h3",11),s.YNc(28,w,2,0,"h3",11),s.YNc(29,J,5,9,"p-table",12),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(30,N,12,3,"div",13)),2&t&&(s.xp6(6),s.Q6J("useExistingCss",!0),s.xp6(7),s.Q6J("ngIf",e.agents),s.xp6(2),s.Q6J("ngIf",e.customerReceiptPayment&&e.showCustomerReceiptPayment),s.xp6(4),s.Q6J("useExistingCss",!0),s.xp6(7),s.Q6J("ngIf",e.selectedAgent),s.xp6(1),s.Q6J("ngIf",!e.selectedAgent),s.xp6(1),s.Q6J("ngIf",e.customers.length<=0),s.xp6(1),s.Q6J("ngIf",e.customers.length>0),s.xp6(1),s.Q6J("ngIf",!e.isProduction))},directives:[d.xw,d.yH,g.a8,g.dk,g.$j,l.lW,Z.I,p.Hw,g.dn,i.O5,i.sg,o.yS,m.iA,A.jx,m.lQ,m.fz,d.SQ,d.Wh],pipes:[i.JJ,i.Ts],styles:["@media print{.noprint[_ngcontent-%COMP%]{visibility:hidden}}#working-job-report-div[_ngcontent-%COMP%]{min-height:100vh;width:100vw;padding-left:35px;padding-right:65px}#developer-div[_ngcontent-%COMP%]{padding-left:35px;padding-right:65px}#agent-card[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#f5e7d6,#f3f3c4)}#customer-receipt-payment-div[_ngcontent-%COMP%]{background-color:#dfefcd;background-image:linear-gradient(#e9e7f8,#f3e3c7)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:unset}"]}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.Bz.forChild(k)],o.Bz]}),t})();var R=n(86640),Q=n(3679),F=n(49983),Y=n(39577),M=n(80291);let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,L,g.QW,R.A0,d.ae,p.Ps,Q.u5,Q.UX,F.c,l.ot,Y.uH,M.pm,Z.K,m.U$]]}),t})()}}]);